# My research and development
ç¦…é“å½•å…¥4/5ä¸ªä»»åŠ¡åˆ—è¡¨è®°å·¥æ—¶ï¼ˆ2å°æ—¶/ä¸ªï¼‰:

ToDoList:
kt-lib:masteråˆ†æ”¯ä»£ç å‰¥ç¦»æ‰“åŒ…
kdm-æ„å›¾è¯†åˆ«(è¯ºè°›å¤§æ¨¡å‹)
kdm-è¯­éŸ³è¯†åˆ«asr
kdm-è¯­éŸ³åˆæˆtts
kdm-æ•æ„Ÿè¯è¯†åˆ«(è¯ºè°›å¤§æ¨¡å‹)
kdm-æ–‡æœ¬åˆ†è¯å‘é‡åŒ–æ¨¡å‹
æ¶ˆæ¯è®¢é˜…/å›è°ƒæœºåˆ¶(grpc,ws,dbus,mqtt)
æ‰©å±•èƒ½åŠ›sysfunc(ç½‘ç»œWIFIã€åº”ç”¨å•†åº—)

// è®¾è®¡åŸåˆ™ï¼š
//   å®‰å…¨è´¨é‡
//   å¥½ç”¨çµæ´»
//   æŠ˜ä¸­


9æœˆ13æ—¥å‰è®¡åˆ’:
å®Œæˆè¯­éŸ³ASR/TTSåŠŸèƒ½å¼€å‘å¹¶æ²‰æ·€ä¸ºKDM		éœ€å®Œæˆæ¨¡å—è®¾è®¡ä»¥åŠåŠŸèƒ½å¼€å‘è½åœ°	50%	è¾“å‡ºå®Œæ•´KDMå¹¶ä¸Šçº¿ä½¿ç”¨	9æœˆ13æ—¥	AIPCç«¯æœåŠ¡æ¦‚è¦è®¾è®¡
å®Œæˆç«¯ä¸Šæ„å›¾è¯†åˆ«æ”¹é€ å¹¶æ²‰æ·€ä¸ºKDM			å®ŒæˆKDMæ”¹é€ å¹¶æ²‰æ·€ä¸ºé€šç”¨ä¾èµ–	20%	è¾“å‡ºå®Œæ•´KDMå¹¶ä¸Šçº¿ä½¿ç”¨	9æœˆ13æ—¥	AIPCç«¯æœåŠ¡æ¦‚è¦è®¾è®¡
å®Œæˆç«¯ä¸Šæ•æ„Ÿè¯è¯†åˆ«KDMæ”¹é€ å¹¶æ²‰æ·€ä¸ºKDM		å®ŒæˆKDMæ”¹é€ å¹¶æ²‰æ·€ä¸ºé€šç”¨ä¾èµ–	20%	è¾“å‡ºå®Œæ•´KDMå¹¶ä¸Šçº¿ä½¿ç”¨	9æœˆ13æ—¥	AIPCç«¯æœåŠ¡æ¦‚è¦è®¾è®¡
å®Œæˆä¸¤ä¸ªç¬¬ä¸‰æ–¹åº“çš„KDMè½åœ°					å®ŒæˆKDMæ”¹é€ å¹¶æ²‰æ·€ä¸ºé€šç”¨ä¾èµ–	10%	è¾“å‡ºå®Œæ•´KDMå¹¶ä¸Šçº¿ä½¿ç”¨	9æœˆ13æ—¥	AIPCç«¯æœåŠ¡æ¦‚è¦è®¾è®¡

è”æƒ³å¼€å¤©è´Ÿè´£äººå¾æ±Ÿè(è¾‰ç…Œå›½é™…Aåº§701)
æ— çº¿WIFI:Lenovokt

1ã€è°ƒç ”MQTT
2ã€ç¬¬ä¸‰æ–¹å¦‚ä½•ä½¿ç”¨kt-libçš„grpcæœåŠ¡èƒ½åŠ›ï¼ˆintentã€senwordã€llmã€doc parseã€pkgï¼‰


vcpkg bin url:
https://github.com/microsoft/vcpkg-tool/releases/download/2024-01-11/vcpkg-glibc
https://github.com/microsoft/vcpkg-tool/releases/download/2024-08-01/vcpkg-glibc



æ’æŸ¥loggeræ¨¡å—åˆ›å»ºæ—¥å¿—ç›®å½•å¤±è´¥
å¯»æ±‚è®¯é£æŠ€æœ¯æ”¯æŒï¼Œå®šä½æˆæƒç­¾åä¸åˆæ³•é—®é¢˜
ç¼–å†™KDM ASRå·¥ç¨‹README.md
ç¼–å†™KDM ASR APIåŠŸèƒ½è¯´æ˜
ç¼–å†™KDM ASRè®¾è®¡è¯´æ˜






kd-asr-proxy
rtpç«¯å£å·èŒƒå›´å¤ªå°æ—¶ï¼ŒæœåŠ¡å¯åŠ¨logæç¤ºç«¯å£é…ç½®ä¸åˆç†å¹¶è‡ªåŠ¨é€€å‡º
(max-min)/4 < 1



çº¿ä¸Šæµ‹è¯•kd-asr-proxyé•œåƒ5.0ç‰ˆæœ¬ï¼Œå®šä½httpè¶…æ—¶é—®é¢˜
ä¿®æ”¹sysfuncä¸­intentè°ƒç”¨æµç¨‹ä¸é€»è¾‘ï¼Œå› æŠ½æ§½æ¨¡å—æ›´æ–°ï¼Œsysfuncè§£ææ§½ä½ä¿¡æ¯æ— æ³•å…¼å®¹

mrcpå’Œfreeswitch



è®¾è®¡ä¿®æ”¹sysfunc/intent2
å¹¶å‘åº”ç”¨å®‰è£…å­˜åœ¨"å…¶ä»–ä»»åŠ¡æ­£åœ¨æ›´æ–°å‡çº§ä¸­ï¼Œè¯·ç¨åå†è¯•ã€‚"é—®é¢˜





è®¾è®¡sysfuncè¯­ä¹‰è·¯ç”±æ¨¡å—semantic_router
å¼€å‘æ•°æ®åº“db_keeperæ¨¡å—








<!-- ---
æŠ€æœ¯æ–¹æ¡ˆè°ƒç ”åŠè¯„ä¼°
- Speech Denoise
  - [ClearerVoice-Studio](https://stable-learn.com/zh/clearvoice-studio-tutorial)

  - VoiceBank + DEMAND (Noisy speech database for training speech enhancement algorithms and TTS models):https://paperswithcode.com/dataset/demand

  - DNS Challenge (Deep Noise Suppression Challenge):https://paperswithcode.com/dataset/deep-noise-suppression-2020

å…³äºå®æ—¶é™å™ªåŠŸèƒ½ï¼Œç›®å‰è®¯é£å¼€æ”¾å¹³å°çš„å®æ—¶è¯­éŸ³è½¬å†™äº§å“ä¸æ”¯æŒé™å™ªåŠŸèƒ½ã€‚å¦‚æœæ‚¨éœ€è¦é™å™ªç›¸å…³çš„è§£å†³æ–¹æ¡ˆï¼Œå»ºè®®æ‚¨è€ƒè™‘ä½¿ç”¨åŒéº¦å…‹é£é˜µåˆ—å¼€å‘å¥—ä»¶æˆ–æ¨¡å—ï¼Œå®ƒä»¬åŸºäºç§‘å¤§è®¯é£åŒéº¦é˜µåˆ—ç®—æ³•è®¾è®¡ï¼Œæä¾›é™å™ªåŠŸèƒ½ï¼Œé€‚ç”¨äºæ™ºèƒ½ç¡¬ä»¶è®¾å¤‡ã€‚æ‚¨å¯ä»¥è®¿é—®ä»¥ä¸‹é“¾æ¥äº†è§£æ›´å¤šä¿¡æ¯ï¼š
[åŒéº¦å…‹é£é˜µåˆ—å¼€å‘å¥—ä»¶ä¸æ¨¡å—ä»‹ç»](https://www.xfyun.cn/services/rtasr)


speech enhance
enhancement
speech denoise

- å®æ—¶é™å™ª
 - based on real time or stream speech denoiseï¼Œæœ‰å“ªäº›å¼€æºæŠ€æœ¯ç®—æ³•

åœ¨å®æ—¶æˆ–æµå¼è¯­éŸ³é™å™ªé¢†åŸŸï¼Œæœ‰è®¸å¤šå¼€æºæŠ€æœ¯å’Œç®—æ³•å¯ä¾›ä½¿ç”¨ã€‚è¿™äº›æŠ€æœ¯é€šå¸¸åˆ©ç”¨ä¿¡å·å¤„ç†å’Œæœºå™¨å­¦ä¹ æ–¹æ³•æ¥å‡å°‘èƒŒæ™¯å™ªéŸ³ï¼Œæé«˜è¯­éŸ³ä¿¡å·çš„æ¸…æ™°åº¦ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸è§çš„å¼€æºæŠ€æœ¯å’Œç®—æ³•ï¼š
RNNoiseï¼š
ç”±Xiph.orgåŸºé‡‘ä¼šå¼€å‘ï¼Œç»“åˆäº†ç»å…¸ä¿¡å·å¤„ç†å’Œæ·±åº¦å­¦ä¹ æŠ€æœ¯ã€‚RNNoiseæ˜¯ä¸€ä¸ªè½»é‡çº§çš„å®æ—¶è¯­éŸ³é™å™ªåº“ï¼Œé€‚ç”¨äºä½å»¶è¿Ÿåº”ç”¨ã€‚
Speex DSPï¼š
Speexé¡¹ç›®çš„ä¸€éƒ¨åˆ†ï¼Œæä¾›äº†å¤šç§éŸ³é¢‘å¤„ç†åŠŸèƒ½ï¼ŒåŒ…æ‹¬å›å£°æ¶ˆé™¤ã€å™ªå£°æŠ‘åˆ¶å’Œè‡ªåŠ¨å¢ç›Šæ§åˆ¶ã€‚é€‚ç”¨äºå®æ—¶éŸ³é¢‘å¤„ç†ã€‚
DeepFilterNetï¼š
åŸºäºæ·±åº¦å­¦ä¹ çš„è¯­éŸ³é™å™ªæ¨¡å‹ï¼Œä¸“æ³¨äºå®æ—¶åº”ç”¨ã€‚å®ƒåˆ©ç”¨ç¥ç»ç½‘ç»œæ¥é¢„æµ‹å’ŒæŠ‘åˆ¶å™ªéŸ³ã€‚
Noisereduceï¼š
ä¸€ä¸ªåŸºäºPythonçš„åº“ï¼Œä½¿ç”¨é¢‘è°±å‡æ³•å’Œå…¶ä»–ä¿¡å·å¤„ç†æŠ€æœ¯æ¥å®ç°é™å™ªã€‚è™½ç„¶ä¸»è¦ç”¨äºç¦»çº¿å¤„ç†ï¼Œä½†å¯ä»¥è°ƒæ•´ç”¨äºå®æ—¶åº”ç”¨ã€‚
Wavesplitï¼š
ä½¿ç”¨æ·±åº¦å­¦ä¹ æŠ€æœ¯è¿›è¡Œè¯­éŸ³åˆ†ç¦»å’Œé™å™ªï¼Œé€‚ç”¨äºå®æ—¶å’Œç¦»çº¿åº”ç”¨ã€‚
OpenSMILEï¼š
è™½ç„¶ä¸»è¦ç”¨äºéŸ³é¢‘ç‰¹å¾æå–ï¼Œä½†ä¹ŸåŒ…å«ä¸€äº›åŸºæœ¬çš„ä¿¡å·å¤„ç†åŠŸèƒ½ï¼Œå¯ä»¥ç”¨äºé™å™ªã€‚
Pyroomacousticsï¼š
æä¾›äº†ä¸€äº›ç”¨äºæˆ¿é—´å£°å­¦ä»¿çœŸå’Œä¿¡å·å¤„ç†çš„å·¥å…·ï¼ŒåŒ…æ‹¬å™ªå£°æŠ‘åˆ¶ç®—æ³•ã€‚
è¿™äº›å¼€æºæŠ€æœ¯å’Œç®—æ³•å„æœ‰ä¼˜ç¼ºç‚¹ï¼Œé€‰æ‹©æ—¶å¯ä»¥æ ¹æ®å…·ä½“çš„åº”ç”¨åœºæ™¯ã€å®æ—¶æ€§è¦æ±‚å’Œè®¡ç®—èµ„æºæ¥å†³å®šã€‚é€šå¸¸ï¼Œç»“åˆå¤šç§æŠ€æœ¯å¯ä»¥è·å¾—æ›´å¥½çš„é™å™ªæ•ˆæœã€‚

 - based on real time or stream speech enhanceï¼Œæœ‰å“ªäº›å¼€æºæŠ€æœ¯ç®—æ³•

åœ¨å®æ—¶æˆ–æµå¼è¯­éŸ³å¢å¼ºé¢†åŸŸï¼Œæœ‰è®¸å¤šå¼€æºæŠ€æœ¯å’Œç®—æ³•å¯ä¾›ä½¿ç”¨ã€‚è¿™äº›æŠ€æœ¯é€šå¸¸ç»“åˆä¿¡å·å¤„ç†å’Œæ·±åº¦å­¦ä¹ æ–¹æ³•ï¼Œä»¥æé«˜è¯­éŸ³ä¿¡å·çš„è´¨é‡å’Œå¯æ‡‚åº¦ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸è§çš„å¼€æºæŠ€æœ¯å’Œç®—æ³•ï¼š
RNNoiseï¼š
ç”±Xiph.orgåŸºé‡‘ä¼šå¼€å‘ï¼Œç»“åˆç»å…¸ä¿¡å·å¤„ç†å’Œæ·±åº¦å­¦ä¹ æŠ€æœ¯ã€‚RNNoiseä¸ä»…ç”¨äºé™å™ªï¼Œä¹Ÿèƒ½åœ¨ä¸€å®šç¨‹åº¦ä¸Šå¢å¼ºè¯­éŸ³ä¿¡å·ã€‚
DeepFilterNetï¼š
åŸºäºæ·±åº¦å­¦ä¹ çš„è¯­éŸ³å¢å¼ºæ¨¡å‹ï¼Œä¸“æ³¨äºå®æ—¶åº”ç”¨ã€‚å®ƒåˆ©ç”¨ç¥ç»ç½‘ç»œæ¥å¢å¼ºè¯­éŸ³ä¿¡å·çš„è´¨é‡ã€‚
Speex DSPï¼š
Speexé¡¹ç›®çš„ä¸€éƒ¨åˆ†ï¼Œæä¾›äº†å¤šç§éŸ³é¢‘å¤„ç†åŠŸèƒ½ï¼ŒåŒ…æ‹¬å›å£°æ¶ˆé™¤ã€å™ªå£°æŠ‘åˆ¶å’Œè‡ªåŠ¨å¢ç›Šæ§åˆ¶ï¼Œé€‚ç”¨äºå®æ—¶éŸ³é¢‘å¢å¼ºã€‚
VoiceFixerï¼š
ä¸€ä¸ªåŸºäºæ·±åº¦å­¦ä¹ çš„å·¥å…·ï¼Œç”¨äºä¿®å¤å’Œå¢å¼ºè¯­éŸ³ä¿¡å·ï¼Œé€‚ç”¨äºå®æ—¶å’Œç¦»çº¿åº”ç”¨ã€‚
AUDIO-DKï¼š
æä¾›äº†ä¸€äº›ç”¨äºéŸ³é¢‘ä¿¡å·å¤„ç†çš„å·¥å…·å’Œç®—æ³•ï¼ŒåŒ…æ‹¬è¯­éŸ³å¢å¼ºåŠŸèƒ½ã€‚
Pyroomacousticsï¼š
æä¾›äº†ä¸€äº›ç”¨äºæˆ¿é—´å£°å­¦ä»¿çœŸå’Œä¿¡å·å¤„ç†çš„å·¥å…·ï¼Œå¯ä»¥ç”¨äºè¯­éŸ³å¢å¼ºã€‚
SEGAN (Speech Enhancement Generative Adversarial Network)ï¼š
ä½¿ç”¨ç”Ÿæˆå¯¹æŠ—ç½‘ç»œï¼ˆGANï¼‰è¿›è¡Œè¯­éŸ³å¢å¼ºï¼Œé€‚ç”¨äºå®æ—¶å’Œç¦»çº¿åº”ç”¨ã€‚
Wave-U-Netï¼š
åŸºäºU-Netæ¶æ„çš„è¯­éŸ³å¢å¼ºæ¨¡å‹ï¼Œé€‚ç”¨äºå®æ—¶åº”ç”¨ã€‚
è¿™äº›å¼€æºæŠ€æœ¯å’Œç®—æ³•å„æœ‰ä¼˜ç¼ºç‚¹ï¼Œé€‰æ‹©æ—¶å¯ä»¥æ ¹æ®å…·ä½“çš„åº”ç”¨åœºæ™¯ã€å®æ—¶æ€§è¦æ±‚å’Œè®¡ç®—èµ„æºæ¥å†³å®šã€‚é€šå¸¸ï¼Œç»“åˆå¤šç§æŠ€æœ¯å¯ä»¥è·å¾—æ›´å¥½çš„è¯­éŸ³å¢å¼ºæ•ˆæœã€‚



- do vad_lenovo with enable_noise
- do de with stream/real time
--- -->

1ã€è®¯é£APIä¸æ”¯æŒå®æ—¶é™å™ªåŠŸèƒ½
2ã€å£°å­¦æ‰€å®æ—¶é™å™ªï¼Œéœ€æä¾›å…¸å‹åº”ç”¨åœºæ™¯æ ·æœ¬è¯­éŸ³ï¼Œç”¨äºåˆ†æè¯„ä¼°æ•ˆæœ


- 20250314
ç¼–å†™DE&VADæŠ€æœ¯æ–¹æ¡ˆè°ƒç ”åŠè¯„ä¼°ç»“æœ
è°ƒç ”å¼€æºå®æ—¶é™å™ªç®—æ³•
æ²Ÿé€šå£°å­¦æ‰€å®æ—¶é™å™ªæŠ€æœ¯æ–¹æ¡ˆ
è°ƒç ”è®¯é£æµå¼å®æ—¶TTS API



<!--
ERROR: pip's dependency resolver does not currently take into account all the packages that are installed. This behaviour is the source of the following dependency conflicts.
taming-transformers-rom1504 0.0.6 requires pytorch-lightning>=1.0.8, which is not installed.
xtuner 0.1.23 requires bitsandbytes>=0.40.0.post4, which is not installed.
xtuner 0.1.23 requires lagent>=0.1.2, which is not installed.
xtuner 0.1.23 requires mmengine>=0.10.3, which is not installed.
easyrobust 0.2.4 requires timm==0.5.4, but you have timm 1.0.12 which is incompatible.
fairseq 0.12.2 requires hydra-core<1.1,>=1.0.7, but you have hydra-core 1.3.2 which is incompatible.
fairseq 0.12.2 requires omegaconf<2.1, but you have omegaconf 2.3.0 which is incompatible.
funcodec 0.2.0 requires typeguard==2.13.3, but you have typeguard 4.3.0 which is incompatible.
pai-easycv 0.11.6 requires timm==0.5.4, but you have timm 1.0.12 which is incompatible. -->





## DE&VADæŠ€æœ¯æ–¹æ¡ˆè°ƒç ”åŠè¯„ä¼°

|  æŠ€æœ¯åˆ†ç±»  |  æŠ€æœ¯æ–¹æ¡ˆ  |  è¯„ä¼°æ•ˆæœ  |  æµ‹è¯•è¯¦æƒ…  |  è¯­éŸ³caseè¯¦æƒ…  |  éå®æ—¶DEå¤„ç†  |
|:-----:|:-----:|:-----:|:-----:|:-----:|:-----:|
|  vad  |  vad_rtc  |  2/6  |  2å¥äººå£°(ä¸¢é¦–å­—) + 4å¥å™ªéŸ³  |  2å¥æœ‰æ•ˆäººå£°  |  å¦  |
|  vad  |  vad_lenovo  |  2/22  |  3å¥äººå£° + 19å¥å™ªéŸ³  |  2å¥æœ‰æ•ˆäººå£°  |  å¦  |
|  vad  |  vad_ali  |  2/30  |  3å¥äººå£°(å¼±é™å™ª) + 27å¥å™ªéŸ³  |  2å¥æœ‰æ•ˆäººå£°  |  å¦  |
|  de&vad  |  de_vad_rtc  |  2/3  |  3å¥äººå£°(ä¸¢é¦–å­—)  |  2å¥æœ‰æ•ˆäººå£°  |  æ˜¯  |
|  de&vad  |  de_vad_lenovo  |  2/4  |  3å¥äººå£° + 1å¥å™ªéŸ³  |  2å¥æœ‰æ•ˆäººå£°  |  æ˜¯  |
|  de&vad  |  de_vad_ali  |  2/3  |  3å¥äººå£°  |  2å¥æœ‰æ•ˆäººå£°  |  æ˜¯  |




- 20250313
è°ƒç ”è®¯é£APIé™å™ªå’Œå¼€æºè¯­éŸ³é™å™ªç®—æ³•
æµ‹è¯•å¹¶è¯„ä¼°é™å™ª+vad_rtcæ–¹æ¡ˆæ•ˆæœ
æµ‹è¯•å¹¶è¯„ä¼°é™å™ª+vad_lenovoæ–¹æ¡ˆæ•ˆæœ
æµ‹è¯•å¹¶è¯„ä¼°é™å™ª+vad_fsmnæ–¹æ¡ˆæ•ˆæœ


<!--
è®¡ç®—æœºå››çº§ç½‘ç»œå·¥ç¨‹å¸ˆ
åä¸ºHCIA-AI V3.0
-->

- 20250312
è°ƒè¯•asr-proxyæµ‹è¯•ç¨‹åºï¼Œæ’æŸ¥è§£å†³vadåˆ†æ®µç»“æœä¿¡æ¯å¼‚å¸¸ä¸¢å¤±é—®é¢˜
ä¿®æ”¹asr-proxyæµ‹è¯•ç¨‹åºï¼Œè½åœ°vadåˆ†æ®µç»“æœè¯­éŸ³
ä¿®æ”¹fsmn-vadæµ‹è¯•ç¨‹åºï¼Œè½åœ°vadåˆ†æ®µç»“æœè¯­éŸ³
å‚åŠ è¯­éŸ³æœºå™¨äººé—®é¢˜åˆ†ç±»ä¼šè®®


- 20250311
åˆ†æasr-proxyæ¨¡å—vadæ¥å£libmfe_JNI
åˆ†æasr-proxyæ¨¡å—lenovoVadInst
åˆ†æasr-proxyæ¨¡å—recoProxy_vadã€recoProxy
ä¿®æ”¹æµ‹è¯•ç¨‹åºï¼Œæ·»åŠ vadåˆ†æ®µç»“æœä¿¡æ¯

void recoProxy::processVadRes(unsigned char * pData, int iLen, vadVars* pVars)


LOG (mfeInit():vad_04/libmfe_JNI.cc:136) MFE_Init with SampleRate=16000
VLOG[1] (MFE_Init():feat/front-end.cc:71) dither=0, subband_type=0, debug=0
VLOG[1] (MFE_Init():feat/front-end.cc:100) Using linear PCM, encode frame size = 160, decoder frame size = 160


ret is
3050

ret is 0
248

ret is 1
2657

ret is 2
143

ret is 3
2



- slicence
Get Data 0xa2b830, Len:640
Create Data 0xa2b560 iLen=640
ret is 0
T: 2 -> mfeDetect return: 0
var->_iIsEnd = 0
Free data 0xa2b830
Feed Data 0xa28920, Len:640


- speech but without begin and end
Get Data 0xa2a270, Len:640
Create Data 0xa29fa0 iLen=640
ret is 1
T: 1 -> mfeDetect return: 1
var->_iIsEnd = 0
start to output data
start to output data
Free data 0xa2a270
Feed Data 0xa28650, Len:640



- noise audio
Get Data 0xa28bb0, Len:640
Create Data 0xa28610 iLen=640
ret is 2
T: 2 -> mfeDetect return: 2
var->_iIsEnd = 0
Free data 0xa28bb0
Feed Data 0xa28e80, Len:640







- begin of speech:6(mfeDetect:0->1, 2->1)
Get Data 0xa2adb0, Len:640
Create Data 0xa2aae0 iLen=640
ret is 0
T: 1 -> mfeDetect return: 0
var->_iIsEnd = 0
Free data 0xa2adb0
Feed Data 0xa29730, Len:640
Get Data 0xa29730, Len:640
Create Data 0xa2adb0 iLen=640
ret is 1
T: 1 -> mfeDetect return: 1
T: 1 -> detected begin of speech. ret: 1
var->_iIsEnd = 0
start to output data
start to output data
start to output data
Free data 0xa29730
Feed Data 0xa2b080, Len:640
Get Data 0xa2b080, Len:640
Create Data 0xa29730 iLen=640
ret is 1
T: 1 -> mfeDetect return: 1
var->_iIsEnd = 0
start to output data
start to output data
Free data 0xa2b080
Feed Data 0xa2b350, Len:640

Get Data 0xa28920, Len:640
Create Data 0xa2b830 iLen=640
ret is 2
T: 2 -> mfeDetect return: 2
var->_iIsEnd = 0
Free data 0xa28920
Feed Data 0xa29730, Len:640
Get Data 0xa29730, Len:640
Create Data 0xa28920 iLen=640
ret is 1
T: 2 -> mfeDetect return: 1
T: 2 -> detected begin of speech. ret: 1
var->_iIsEnd = 0
start to output data
start to output data
start to output data
Free data 0xa29730
Feed Data 0xa29190, Len:640
Get Data 0xa29190, Len:640
Create Data 0xa29730 iLen=640
ret is 1
T: 2 -> mfeDetect return: 1
var->_iIsEnd = 0
start to output data
start to output data
Free data 0xa29190
Feed Data 0xa29460, Len:640



- end of speech:6(mfeDetect:1->2, 1->3)
Get Data 0x19e7f10, Len:640
ret is 1
T: 0 -> mfeDetect return: 1
var->_iIsEnd = 0
start to output data,len = 640
start to output data,len = 0
Free data 0x19e7f10
Feed Data 0x19e81e0, Len:640
Get Data 0x19e81e0, Len:640
ret is 3
T: 0 -> mfeDetect return: 3
T: 1 -> detected end of speech. ret: 3
var->_iIsEnd = 1
Free data 0x19e81e0
Feed Data 0x19e84b0, Len:640
Get Data 0x19e84b0, Len:640
ret is 0
T: 1 -> mfeDetect return: 0
var->_iIsEnd = 0
Free data 0x19e84b0
Feed Data 0x19e8780, Len:640

Get Data 0xa2acf0, Len:640
Create Data 0xa2aa40 iLen=640
ret is 1
T: 2 -> mfeDetect return: 1
var->_iIsEnd = 0
start to output data
start to output data
Free data 0xa2acf0
Feed Data 0xa2afc0, Len:640
Get Data 0xa2afc0, Len:640
Create Data 0xa2acf0 iLen=640
ret is 2
T: 2 -> mfeDetect return: 2
T: 2 -> detected end of speech. ret: 2
var->_iIsEnd = 1
Free data 0xa2afc0
Feed Data 0xa2b290, Len:640
Get Data 0xa2b290, Len:640
Create Data 0xa2afc0 iLen=640
ret is 2
T: 2 -> mfeDetect return: 2
var->_iIsEnd = 0
Free data 0xa2b290
Feed Data 0xa2b560, Len:640





Get Data 0xa2b350, Len:640
Create Data 0xa2b080 iLen=640
ret is 0
T: 0 -> mfeDetect return: 0
var->_iIsEnd = 0
Free data 0xa2b350
Feed Data 0xa2b620, Len:640
Get Data 0xa2b620, Len:640
Create Data 0xa2b350 iLen=640
ret is 3
T: 0 -> mfeDetect return: 3
var->_iIsEnd = 0
Free data 0xa2b620
Feed Data 0xa27b10, Len:640
Get Data 0xa27b10, Len:640
ret is 0
T: 1 -> mfeDetect return: 0
var->_iIsEnd = 0
Free data 0xa27b10
Feed Data 0xa27de0, Len:640





LOG (mfeInit():vad_04/libmfe_JNI.cc:136) MFE_Init with SampleRate=8000
VLOG[1] (MFE_Init():feat/front-end.cc:71) dither=0, subband_type=0, debug=0
VLOG[1] (MFE_Init():feat/front-end.cc:100) Using linear PCM, encode frame size = 80, decoder frame size = 80
Buffer initialized 0x19e2320
vadInst buffer is 0x19e2050
wav file length = 81218 Byte
buf is , iLen=1
Create Data 0x19e7f10 iLen=640
Create Data 0x19e81e0 iLen=640






[root@centos7 bin]# sh run.sh
==========1
Main Pointer 0x7ffff97a250c
[kd-mrcp-asr] recoProxy::recoProxy >>>>>> in
[kd-mrcp-asr] rreporter create pUuid = noise_87f37c.pcm
[kd-mrcp-asr] createVadCbUtil
[kd-mrcp-asr] recoProxyCreateVad >>>>>> RECO_VAD_LENOVO
[kd-mrcp-asr] recoProxy::recoProxy >>>>>> RECO_ASR_LENOVO
[kd-mrcp-asr] recoProxyInitVad
[kd-mrcp-asr] lenovoVadInst::init vad iVadEnergyStart = 70
[kd-mrcp-asr] lenovoVadInst::init iVadEnergeStop = 40
[kd-mrcp-asr] lenovoVadInst::init iVoicePoint = 100
[kd-mrcp-asr] lenovoVadInst::init iLRelax = 25
[kd-mrcp-asr] lenovoVadInst::init iRRelax = 30
[kd-mrcp-asr] lenovoVadInst::init iMinSpDuration = 15
[kd-mrcp-asr] lenovoVadInst::init iMaxSpDuration = 100000
[kd-mrcp-asr] lenovoVadInst::init iSleepTimeout = 6000
[kd-mrcp-asr] lenovoVadInst::init iMaxSpPause = 500 ms, iLRelax = 250 ms
LOG (mfeInit():vad/libmfe_JNI.cc:225) MFE_Init with SampleRate=8000
VLOG[1] (MFE_Init():feat/front-end.cc:71) dither=0, subband_type=0, debug=0
VLOG[1] (MFE_Init():feat/front-end.cc:100) Using linear PCM, encode frame size = 80, decoder frame size = 80
[kd-spdlog][reco] init success m_logger_ = 0x7f567620a980
[kd-mrcp-asr] recoProxy::recoProxy >>>>>> out
==========2
[kd-mrcp-asr] recoProxySetVadIntParam type = 0, value = 1
[kd-mrcp-asr] recoProxySetVadIntParam type = 1, value = 300
wav file length = 1483200 Byte
Catch noinput at 5120 ms, elapsed 320 ms
[kd-mrcp-asr] lenovoAsrInst::sendFirstMsg
CreateMsg Index = 0, point = 0x7f5668000b30
[kd-mrcp-asr] rreporter::createSocketCon socketConnection url = 10.110.147.191:7070
[kd-mrcp-asr] recoProxyCloseVad
asr connect error:Connection timed out
asr connect error:Connection timed out
[kd-mrcp-asr] recoProxy::openDbgFile filename: /tmp/vad//noise_87f37c.pcm_0000.wav
[kd-mrcp-asr] recoProxy::processVadRes VAD END
[kd-mrcp-asr] rreporter::sendMsg 3 FRAME_LAST
[kd-mrcp-asr] socketConnection::sendMsg 2 VAD END, sessionId = noise_87f37c.pcm, traceId = 1d3fb216-cd84-4609-8cf7-809e0e25cda2, time = 2025-03-12 03:13:00:950875
[kd-mrcp-asr] lenovoAsrInst::sendFirstMsg
CreateMsg Index = 1, point = 0x7f56680010a0
[kd-mrcp-asr] rreporter::createSocketCon socketConnection url = 10.110.147.191:7070

[root@centos7 bin]# sh run.sh
==========1
Main Pointer 0x7fff0fda1b7c
[kd-mrcp-asr] recoProxy::recoProxy >>>>>> in
[kd-mrcp-asr] rreporter create pUuid = test222
[kd-mrcp-asr] createVadCbUtil
[kd-mrcp-asr] recoProxyCreateVad >>>>>> RECO_VAD_LENOVO
[kd-mrcp-asr] recoProxy::recoProxy >>>>>> RECO_ASR_LENOVO
[kd-mrcp-asr] recoProxyInitVad
[kd-mrcp-asr] lenovoVadInst::init vad iVadEnergyStart = 70
[kd-mrcp-asr] lenovoVadInst::init iVadEnergeStop = 40
[kd-mrcp-asr] lenovoVadInst::init iVoicePoint = 100
[kd-mrcp-asr] lenovoVadInst::init iLRelax = 25
[kd-mrcp-asr] lenovoVadInst::init iRRelax = 30
[kd-mrcp-asr] lenovoVadInst::init iMinSpDuration = 15
[kd-mrcp-asr] lenovoVadInst::init iMaxSpDuration = 100000
[kd-mrcp-asr] lenovoVadInst::init iSleepTimeout = 6000
[kd-mrcp-asr] lenovoVadInst::init iMaxSpPause = 500 ms, iLRelax = 250 ms
LOG (mfeInit():vad/libmfe_JNI.cc:225) MFE_Init with SampleRate=8000
VLOG[1] (MFE_Init():feat/front-end.cc:71) dither=0, subband_type=0, debug=0
VLOG[1] (MFE_Init():feat/front-end.cc:100) Using linear PCM, encode frame size = 80, decoder frame size = 80
[kd-spdlog][reco] init success m_logger_ = 0x7f0d1e5d1960
[kd-mrcp-asr] recoProxy::recoProxy >>>>>> out
==========2
[kd-mrcp-asr] recoProxySetVadIntParam type = 0, value = 1
[kd-mrcp-asr] recoProxySetVadIntParam type = 1, value = 300
wav file length = 156672 Byte
Catch noinput at 5120 ms, elapsed 320 ms
[kd-mrcp-asr] lenovoAsrInst::sendFirstMsg
CreateMsg Index = 0, point = 0x7f0d10000b30
[kd-mrcp-asr] rreporter::createSocketCon socketConnection url = 10.110.147.191:7070
[kd-mrcp-asr] recoProxyCloseVad
asr connect error:Connection timed out
asr connect error:Connection timed out
[kd-mrcp-asr] recoProxy::openDbgFile filename: /tmp/vad//test222_0000.wav
[kd-mrcp-asr] rreporter::sendMsg 3 FRAME_LAST
[kd-mrcp-asr] socketConnection::sendMsg 2 VAD END, sessionId = test222, traceId = 6959dd58-48bc-4bf4-98da-b86d6589c262, time = 2025-03-11 11:09:50:540683


run.sh: line 1: 27077 Segmentation fault      (core dumped) ./test_kdm_asr_proxy 1 testoutput_polly0.pcm zh



- 20250310
æœåŠ¡å™¨æ­å»ºfsmn-vadæµ‹è¯•ç¯å¢ƒ
å®‰è£…è¯­éŸ³å¤„ç†å·¥å…·ï¼Œè½¬æ¢æµ‹è¯•è¯­éŸ³æ ¼å¼
ä¿®æ”¹æµ‹è¯•ç¨‹åºï¼Œè°ƒæµ‹fsmn-vadåŠŸèƒ½
åˆ†ævadåˆ†æ®µç»“æœï¼Œä¾æ—§å­˜åœ¨æ— æ³•è¿‡æ»¤å™ªéŸ³é—®é¢˜


- 20250307
è°ƒç ”fsmn-vadç®—æ³•
å¯¹æ¯”åˆ†æfsmn-vadå’Œsilero-vadç®—æ³•å®ç°åŸç†åŠä¼˜åŠ£
ç¼–å†™fsmn-vadç®—æ³•æ¨¡å‹æµ‹è¯•ç¨‹åº
æ­å»ºfsmn-vadæµ‹è¯•ç¯å¢ƒ



/mnt/workspace/.cache/modelscope/hub



root@centos7:/test_asr_proxy/modelscope/speech_fsmn_vad_zh-cn-8k-common# sh run.sh
2025-03-10 18:05:49,350 - modelscope - WARNING - Model revision not specified, use revision: v2.0.4
Downloading [configuration.json]: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 356/356 [00:00<00:00, 1.91kB/s]
Downloading Model to directory: /mnt/workspace/.cache/modelscope/damo/speech_fsmn_vad_zh-cn-8k-common
2025-03-10 18:05:50,275 - modelscope - WARNING - Model revision not specified, use revision: v2.0.4
2025-03-10 18:05:50,651 - modelscope - INFO - Got 6 files, start to download ...
Downloading [README.md]: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 10.5k/10.5k [00:00<00:00, 46.7kB/s]
Downloading [am.mvn]: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 7.88k/7.88k [00:00<00:00, 31.6kB/s]
Downloading [config.yaml]: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 1.18k/1.18k [00:00<00:00, 4.30kB/s]
Downloading [fig/struct.png]: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 27.3k/27.3k [00:00<00:00, 88.3kB/s]
Downloading [example/vad_example.wav]: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 1.76M/1.76M [00:00<00:00, 3.03MB/s]
Downloading [model.pt]: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 1.64M/1.64M [00:00<00:00, 1.81MB/s]
Processing 6 items: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 6.00/6.00 [00:00<00:00, 6.26it/s]
2025-03-10 18:05:51,613 - modelscope - INFO - Download model 'damo/speech_fsmn_vad_zh-cn-8k-common' successfully.â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 27.3k/27.3k [00:00<00:00, 88.7kB/s]
2025-03-10 18:05:51,618 - modelscope - INFO - initiate model from /mnt/workspace/.cache/modelscope/hub/damo/speech_fsmn_vad_zh-cn-8k-common
2025-03-10 18:05:51,618 - modelscope - INFO - initiate model from location /mnt/workspace/.cache/modelscope/hub/damo/speech_fsmn_vad_zh-cn-8k-common.
2025-03-10 18:05:51,621 - modelscope - INFO - initialize model from /mnt/workspace/.cache/modelscope/hub/damo/speech_fsmn_vad_zh-cn-8k-common0:00, 3.32MB/s]
funasr version: 1.2.2.
Check update of funasr, and it would cost few times. You may disable it by set `disable_update=True` in AutoModel
New version is available: 1.2.5.
Please use the command "pip install -U funasr" to upgrade.
Warning, miss key in ckpt: encoder.in_linear1.linear.weight, /mnt/workspace/.cache/modelscope/hub/damo/speech_fsmn_vad_zh-cn-8k-common/model.pt
Warning, miss key in ckpt: encoder.in_linear1.linear.bias, /mnt/workspace/.cache/modelscope/hub/damo/speech_fsmn_vad_zh-cn-8k-common/model.pt
Warning, miss key in ckpt: encoder.in_linear2.linear.weight, /mnt/workspace/.cache/modelscope/hub/damo/speech_fsmn_vad_zh-cn-8k-common/model.pt
Warning, miss key in ckpt: encoder.in_linear2.linear.bias, /mnt/workspace/.cache/modelscope/hub/damo/speech_fsmn_vad_zh-cn-8k-common/model.pt
Warning, miss key in ckpt: encoder.fsmn.0.linear.linear.weight, /mnt/workspace/.cache/modelscope/hub/damo/speech_fsmn_vad_zh-cn-8k-common/model.pt
Warning, miss key in ckpt: encoder.fsmn.0.fsmn_block.conv_left.weight, /mnt/workspace/.cache/modelscope/hub/damo/speech_fsmn_vad_zh-cn-8k-common/model.pt
Warning, miss key in ckpt: encoder.fsmn.0.affine.linear.weight, /mnt/workspace/.cache/modelscope/hub/damo/speech_fsmn_vad_zh-cn-8k-common/model.pt
Warning, miss key in ckpt: encoder.fsmn.0.affine.linear.bias, /mnt/workspace/.cache/modelscope/hub/damo/speech_fsmn_vad_zh-cn-8k-common/model.pt
Warning, miss key in ckpt: encoder.fsmn.1.linear.linear.weight, /mnt/workspace/.cache/modelscope/hub/damo/speech_fsmn_vad_zh-cn-8k-common/model.pt
Warning, miss key in ckpt: encoder.fsmn.1.fsmn_block.conv_left.weight, /mnt/workspace/.cache/modelscope/hub/damo/speech_fsmn_vad_zh-cn-8k-common/model.pt
Warning, miss key in ckpt: encoder.fsmn.1.affine.linear.weight, /mnt/workspace/.cache/modelscope/hub/damo/speech_fsmn_vad_zh-cn-8k-common/model.pt
Warning, miss key in ckpt: encoder.fsmn.1.affine.linear.bias, /mnt/workspace/.cache/modelscope/hub/damo/speech_fsmn_vad_zh-cn-8k-common/model.pt
Warning, miss key in ckpt: encoder.fsmn.2.linear.linear.weight, /mnt/workspace/.cache/modelscope/hub/damo/speech_fsmn_vad_zh-cn-8k-common/model.pt
Warning, miss key in ckpt: encoder.fsmn.2.fsmn_block.conv_left.weight, /mnt/workspace/.cache/modelscope/hub/damo/speech_fsmn_vad_zh-cn-8k-common/model.pt
Warning, miss key in ckpt: encoder.fsmn.2.affine.linear.weight, /mnt/workspace/.cache/modelscope/hub/damo/speech_fsmn_vad_zh-cn-8k-common/model.pt
Warning, miss key in ckpt: encoder.fsmn.2.affine.linear.bias, /mnt/workspace/.cache/modelscope/hub/damo/speech_fsmn_vad_zh-cn-8k-common/model.pt
Warning, miss key in ckpt: encoder.fsmn.3.linear.linear.weight, /mnt/workspace/.cache/modelscope/hub/damo/speech_fsmn_vad_zh-cn-8k-common/model.pt
Warning, miss key in ckpt: encoder.fsmn.3.fsmn_block.conv_left.weight, /mnt/workspace/.cache/modelscope/hub/damo/speech_fsmn_vad_zh-cn-8k-common/model.pt
Warning, miss key in ckpt: encoder.fsmn.3.affine.linear.weight, /mnt/workspace/.cache/modelscope/hub/damo/speech_fsmn_vad_zh-cn-8k-common/model.pt
Warning, miss key in ckpt: encoder.fsmn.3.affine.linear.bias, /mnt/workspace/.cache/modelscope/hub/damo/speech_fsmn_vad_zh-cn-8k-common/model.pt
Warning, miss key in ckpt: encoder.out_linear1.linear.weight, /mnt/workspace/.cache/modelscope/hub/damo/speech_fsmn_vad_zh-cn-8k-common/model.pt
Warning, miss key in ckpt: encoder.out_linear1.linear.bias, /mnt/workspace/.cache/modelscope/hub/damo/speech_fsmn_vad_zh-cn-8k-common/model.pt
Warning, miss key in ckpt: encoder.out_linear2.linear.weight, /mnt/workspace/.cache/modelscope/hub/damo/speech_fsmn_vad_zh-cn-8k-common/model.pt
Warning, miss key in ckpt: encoder.out_linear2.linear.bias, /mnt/workspace/.cache/modelscope/hub/damo/speech_fsmn_vad_zh-cn-8k-common/model.pt
2025-03-10 18:05:55,756 - modelscope - WARNING - No preprocessor field found in cfg.
2025-03-10 18:05:55,756 - modelscope - WARNING - No val key and type key found in preprocessor domain of configuration.json file.
2025-03-10 18:05:55,756 - modelscope - WARNING - Cannot find available config to build preprocessor at mode inference, current config: {'model_dir': '/mnt/workspace/.cache/modelscope/hub/damo/speech_fsmn_vad_zh-cn-8k-common'}. trying to build by task and model information.
2025-03-10 18:05:55,757 - modelscope - WARNING - No preprocessor key ('funasr', 'voice-activity-detection') found in PREPROCESSOR_MAP, skip building preprocessor.
2025-03-10 18:05:55,758 - modelscope - INFO - cuda is not available, using cpu instead.
Traceback (most recent call last):
  File "/test_asr_proxy/modelscope/speech_fsmn_vad_zh-cn-8k-common/ms_vad_test.py", line 84, in <module>
    test_8k(wav_file)
  File "/test_asr_proxy/modelscope/speech_fsmn_vad_zh-cn-8k-common/ms_vad_test.py", line 43, in test_8k
    rec_result = inference_pipeline(
  File "/usr/local/lib/python3.10/site-packages/modelscope/pipelines/audio/funasr_pipeline.py", line 73, in __call__
    output = self.model(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/modelscope/models/base/base_model.py", line 35, in __call__
    return self.postprocess(self.forward(*args, **kwargs))
  File "/usr/local/lib/python3.10/site-packages/modelscope/models/audio/funasr/model.py", line 61, in forward
    output = self.model.generate(*args, **kwargs)
TypeError: AutoModel.generate() missing 1 required positional argument: 'input'



root@centos7:/test_asr_proxy/modelscope/speech_fsmn_vad_zh-cn-8k-common# sh run.sh

funasr version: 1.2.2.
Check update of funasr, and it would cost few times. You may disable it by set `disable_update=True` in AutoModel
New version is available: 1.2.5.
Please use the command "pip install -U funasr" to upgrade.
Downloading Model to directory: /mnt/workspace/.cache/modelscope/iic/speech_fsmn_vad_zh-cn-16k-common-pytorch
2025-03-10 15:34:54,901 - modelscope - INFO - Use user-specified model revision: v2.0.4
2025-03-10 15:34:55,157 - modelscope - INFO - Got 7 files, start to download ...
Downloading [README.md]: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 8.45k/8.45k [00:00<00:00, 37.8kB/s]
Downloading [am.mvn]: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 7.85k/7.85k [00:00<00:00, 20.4kB/s]
Downloading [configuration.json]: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 365/365 [00:00<00:00, 950B/s]
Downloading [fig/struct.png]: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 27.3k/27.3k [00:00<00:00, 70.2kB/s]
Downloading [config.yaml]: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 1.19k/1.19k [00:00<00:00, 2.99kB/s]
Downloading [example/vad_example.wav]: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 2.16M/2.16M [00:01<00:00, 2.24MB/s]
Downloading [model.pt]: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 1.64M/1.64M [00:01<00:00, 1.60MB/s]
Processing 7 items: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 7.00/7.00 [00:01<00:00, 6.45it/s]
2025-03-10 15:34:56,245 - modelscope - INFO - Download model 'iic/speech_fsmn_vad_zh-cn-16k-common-pytorch' successfully.27.3k/27.3k [00:00<00:00, 70.9kB/s]
rtf_avg: 0.120: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 1/1 [00:00<00:00, 49.48it/s]
rtf_avg: 0.067: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 1/1 [00:00<00:00, 70.22it/s]
rtf_avg: 0.042: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 1/1 [00:00<00:00, 108.76it/s]
[{'key': 'rand_key_WgNZq6ITZM5jt', 'value': [[70, -1]]}]
rtf_avg: 0.039: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 1/1 [00:00<00:00, 117.33it/s]
rtf_avg: 0.039: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 1/1 [00:00<00:00, 117.19it/s]
rtf_avg: 0.040: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 1/1 [00:00<00:00, 114.27it/s]
rtf_avg: 0.039: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 1/1 [00:00<00:00, 118.02it/s]
rtf_avg: 0.039: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 1/1 [00:00<00:00, 116.31it/s]
rtf_avg: 0.043: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 1/1 [00:00<00:00, 106.49it/s]
rtf_avg: 0.040: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 1/1 [00:00<00:00, 114.17it/s]
rtf_avg: 0.039: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 1/1 [00:00<00:00, 116.64it/s]
rtf_avg: 0.039: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 1/1 [00:00<00:00, 116.45it/s]
rtf_avg: 0.044: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 1/1 [00:00<00:00, 104.19it/s]
rtf_avg: 0.039: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 1/1 [00:00<00:00, 116.37it/s]
rtf_avg: 0.044: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 1/1 [00:00<00:00, 98.69it/s]
[{'key': 'rand_key_PS6YwfuNhFLOv', 'value': [[-1, 2340]]}]
rtf_avg: 0.099: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 1/1 [00:00<00:00, 47.74it/s]
[{'key': 'rand_key_2mpbUrhToxYkv', 'value': [[2620, -1]]}]





# The Research of VAD

## VAD List

## signal processing

- lenovo
- webrtc
- kaldi
- epd

## neural network(ML/DL)

- DeepSpeech
- silero-vad
- funasr/fsmn-vad

### requirements

- python>=3.8
- torch>=1.13
- torchaudio

### env install

```bash
conda create -n modelscope_py3.10 python=3.10
conda activate modelscope_py3.10
pip3 install -U funasr
pip3 install modelscope
# modelscope download --model iic/speech_fsmn_vad_zh-cn-8k-common

# pip3 install torchaudio
# pip3 install torch -i https://pypi.tuna.tsinghua.edu.cn/simple
# pip3 install -U modelscope huggingface_hub
```

- wenet
- espnet
- k2/sherpa-onnx

https://github.com/modelscope/FunASR

â­ represents the ModelScope model zoo
ğŸ¤— represents the Huggingface model zoo
ğŸ€ represents the OpenAI model zoo


alibaba(16kçš„æ˜¯Unetç»“æ„ï¼Œæ²¡æœ‰ä½¿ç”¨Transformer)

End-to-End Integration of Speech Emotion Recognition with Voice Activity Detection using Self-Supervised Learning Features

å…¨æ–‡æ‘˜è¦
è¿™ç¯‡è®ºæ–‡ä»‹ç»äº†ä¸€ç§åŸºäºè‡ªæˆ‘ç›‘ç£å­¦ä¹ ç‰¹å¾çš„è¯­éŸ³æƒ…æ„Ÿè¯†åˆ«ï¼ˆSERï¼‰å’Œè¯­éŸ³æ´»åŠ¨æ£€æµ‹ï¼ˆVADï¼‰ç«¯åˆ°ç«¯é›†æˆæ–¹æ³•ã€‚ä¼ ç»Ÿçš„SERæ–¹æ³•é€šå¸¸ä½¿ç”¨VADæ¨¡å‹æ£€æµ‹å‡ºçš„è¯­éŸ³ç‰‡æ®µè¿›è¡Œæ“ä½œï¼Œä½†VADæ¨¡å‹å¯èƒ½ä¼šåœ¨å˜ˆæ‚ç¯å¢ƒä¸­è¾“å‡ºé”™è¯¯çš„è¯­éŸ³ç‰‡æ®µï¼Œå¯¼è‡´åç»­çš„SERæ¨¡å‹æ€§èƒ½ä¸‹é™ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä½œè€…æå‡ºäº†ä¸€ä¸ªç«¯åˆ°ç«¯æ–¹æ³•ï¼Œå°†VADå’ŒSERæ¨¡å—æ•´åˆåœ¨ä¸€èµ·ï¼Œå¹¶ä½¿ç”¨è‡ªæˆ‘ç›‘ç£å­¦ä¹ ç‰¹å¾ä½œä¸ºè¾“å…¥ã€‚å®éªŒç»“æœè¡¨æ˜ï¼Œè¯¥æ–¹æ³•å¯ä»¥æé«˜SERçš„æ€§èƒ½ã€‚æ­¤å¤–ï¼Œä¸ºäº†æ¢ç©¶è¯¥æ–¹æ³•å¯¹VADå’ŒSSLæ¨¡å—çš„å½±å“ï¼Œä½œè€…è¿˜è¿›è¡Œäº†VADè¾“å‡ºå’ŒSSLç¼–ç å™¨å„å±‚æƒé‡çš„åˆ†æã€‚

- SSL-VAD
- MarbleNet VAD
- reference: https://www.modelscope.cn/papers/64188




å¯¹æ¯”åˆ†æfsmn-vadä¸silero-vad:
https://blog.csdn.net/weixin_45684442/article/details/140712513


iic/speech_fsmn_vad_zh-cn-16k-common-pytorch
iic/speech_fsmn_vad_zh-cn-8k-common-onnx
iic/speech_fsmn_vad_zh-cn-8k-common
https://www.modelscope.cn/models/iic/speech_fsmn_vad_zh-cn-8k-common/summary


onnx-community/silero-vad
dsh54054/silero-vad
manyeyes/silero-vad-onnx
https://github.com/snakers4/silero-vad.git
https://www.modelscope.cn/models/dsh54054/silero-vad/files



20250306
æ­å»ºå½•éŸ³æ•°æ®çš„æŠ€æœ¯åˆ†æç¯å¢ƒ
æŠ€æœ¯åˆ†æVADæ–­å¥é—®é¢˜çš„å½•éŸ³æ•°æ®è¯¦æƒ…ï¼Œå‡ç”±asrå¼•æ“è¯¯è¯†åˆ«å™ªéŸ³å¯¼è‡´
è°ƒç ”VADç®—æ³•å®ç°DeepSpeech
è°ƒç ”VADç®—æ³•å®ç°silero-vad




å¯è€ƒè™‘å¢åŠ 3Aæ¨¡å—ç¼“è§£ï¼›





ç”µè¯è¯­éŸ³æœºå™¨äººä¸“é¡¹çªç ´å¯åŠ¨ä¼š20250305

TODO:
æœ€æ–°vadç ”ç©¶å¼€æºç®—æ³•è°ƒç ”
rewriteæ”¹å†™orçº é”™è¯­è¨€æ¨¡å‹å·¥ç¨‹åŒ–


elkã€flink

é¡¹ç›®èƒŒæ™¯ï¼š
é¢å’Œå›­ã€å¸‚ç›‘å±€ã€æ™ºè”ã€
çƒ­åŠ›ã€å¾å·¥


ä¼˜åŒ–ä½“éªŒä¸å¥½é—®é¢˜:(3.24é‚£å‘¨ç»™å‡ºä¼˜åŒ–çš„æŠ€æœ¯å’Œè§£å†³æ–¹æ¡ˆ)

3Aé—®é¢˜:
(é™å™ªã€å›å£°æ¶ˆé™¤ã€è‡ªåŠ¨å¢ç›Š)


vadé—®é¢˜:
æ–­å¥ã€æ‰“æ–­ååº”æ…¢(è¯­ä¹‰æˆ–æ„å›¾æ‰“æ–­)

æœ€æ–°vadç ”ç©¶å¼€æºç®—æ³•è°ƒç ”

webrtc signalï¼Œæ•ˆæœä¸€èˆ¬
nnæ¨¡å‹é€Ÿåº¦æ…¢ï¼Œæ•ˆæœä¸€èˆ¬


drimo3.0æœºå™¨äºº
æ™ºèƒ½å®¢æœ


asré—®é¢˜:
è½¬è¯‘ï¼Œasrè¯†åˆ«ç»“æœä¸å‡†ç¡®

rewriteæ”¹å†™orçº é”™è¯­è¨€æ¨¡å‹å·¥ç¨‹åŒ–


NLU/NLPé—®é¢˜:
ååº”è¿Ÿé’ã€å»¶è¿Ÿæ—¶é—´é•¿


ttsé—®é¢˜:
è¯­éŸ³åˆæˆoræ’­æŠ¥ä¸å®Œæ•´(å‰åŠå¥ä¸¢å¤±)




20250305
è°ƒæµ‹kd-asr-proxyæ–°å¢SessionContextåŠŸèƒ½æ¨¡å—
åˆ†ææ¢³ç†ManagerSingletonä¼šåŒ–ç®¡ç†OnSessionCreateæµç¨‹
ä¼˜åŒ–AsrReporterã€AsrParamã€VadParamç­‰æ¨¡å—ï¼Œè§£å†³SessionContextéƒ¨åˆ†å‚æ•°å€¼ä¸¢å¤±é—®é¢˜
å‚åŠ ç”µè¯è¯­éŸ³æœºå™¨äººä¸“é¡¹çªç ´å¯åŠ¨ä¼š




20250304
å¼€å‘SessionContextä¼šè¯ç®¡ç†æ¨¡å—
ä¼˜åŒ–Callã€SessionCreateReqã€RecoProxyProcessç­‰æ¨¡å—å¯¹åº”æ¥å£
ä¼˜åŒ–utils::json_valueæ”¯æŒint64ç±»å‹æ•°å€¼
æ„å»ºå¹¶éƒ¨ç½²kd-asr-proxyæ–°ç‰ˆæœ¬dockeré•œåƒï¼Œè¿›è¡Œè”è°ƒ


æ­å»ºå¹¶è°ƒæµ‹è½¯ç”µè¯æµ‹è¯•ç¯å¢ƒ
è”è°ƒæ–°å¢é€ä¼ å­—æ®µæ— æ•ˆé—®é¢˜


æ¨é€asrç»“æœè‡³kafkaå¤±è´¥é—®é¢˜
å¢åŠ é»˜è®¤é…ç½®ï¼Œå®šä½


router.POST("/asr/session", [](const HttpContextPtr& ctx) {

	http::api::SessionCreateReq sc_req;
	ManagerSingleton::OnSessionCreate(const http::api::SessionCreateReq& req) {

		// Call::CreateRecieverSession(EndPointType ep, int port, const std::string& asrEngine, int engMin, int engMax, int bos, int eos, std::string &sid) {
		Call::CreateRecieverSession(const http::api::SessionCreateReq& req, int port) {

			RecieverPtr pRecv; SetSid, Init, Start,
			// pProcessor RecoProxyProcess; UpdateSid, Create {
			// RecoProxyProcess::RecoProxyProcess(const std::string& appID, const std::string& callID, const std::string& sid, const std::string& epTp) {
			RecoProxyProcess::RecoProxyProcess(const http::api::SessionCreateReq& req) {

				m_pObj pCreateRecoProxy;

			}

		} // Call::CreateRecieverSession

	} // ManagerSingleton::OnSessionCreate

} // router.POST


	{"timestamp":"2025-02-06T16:37:26.861","msg":"call processor destory sid 2edb7d13-6790-40be-bc0d-bb31e9d36799_30098"}
	{"timestamp":"2025-02-06T16:37:26.862","msg":"sesssion 2edb7d13-6790-40be-bc0d-bb31e9d36799_30098 processor destory"}
	{"timestamp":"2025-02-06T16:37:26.885","msg":"call processor destory sid 2edb7d13-6790-40be-bc0d-bb31e9d36799_30100"}
	{"timestamp":"2025-02-06T16:37:26.888","msg":"sesssion 2edb7d13-6790-40be-bc0d-bb31e9d36799_30100 processor destory"}
	{"timestamp":"2025-02-06T16:55:42.021","msg":"call processor destory sid 2b63b151-7b2f-49c2-91e9-68736d1049c0_30000"}
	{"timestamp":"2025-02-06T16:55:42.025","msg":"sesssion 2b63b151-7b2f-49c2-91e9-68736d1049c0_30000 processor destory"}
	{"timestamp":"2025-02-06T16:55:42.061","msg":"call processor destory sid 2b63b151-7b2f-49c2-91e9-68736d1049c0_30002"}
	{"timestamp":"2025-02-06T16:55:42.061","msg":"sesssion 2b63b151-7b2f-49c2-91e9-68736d1049c0_30002 processor destory"}





20250303
ä¼˜åŒ–kd-asr-proxyé…ç½®è§£ææ¨¡å—ï¼Œè”è°ƒè§£å†³kafka topicè§£æå¼‚å¸¸coredumpé—®é¢˜
æ’æŸ¥è§£å†³kd-asr-proxyæœåŠ¡æ— asrè¯†åˆ«ç»“æœæ¨é€é—®é¢˜
ä¿®æ”¹kd-asr-proxyæ¨é€kafkaå›ä¼ æ¯«ç§’æ—¶é—´æˆ³
è®¾è®¡kd-asr-proxyæ–°å¢ä¸¤ä¸ªé€ä¼ å­—æ®µ(agentIdã€serviceId)


{"project":"kds","module":"kd-asr-proxy","timestamp":"2025-02-28T14:20:16.275","level":"info","host":"centos7","hostIp":"172.70.10.210","event":{"appId":"servicePool_test_appId","asrResult":"å·®ä¸å¤šå°±æ˜¯","callId":"b5e009c7-9287-44c2-9d1d-5fb72e7d257f","channelId":"b5e009c7-9287-44c2-9d1d-5fb72e7d257f_30004","channelType":"agent","sessionId":"b5e009c7-9287-44c2-9d1d-5fb72e7d257f_30004"},"eventId":"4ae1026b-0280-4266-987a-a8903fc57e95","eventName":"ASR_RESULT_CB"}
{"project":"kds","module":"kd-asr-proxy","timestamp":"2024-12-17T15:41:51.843","level":"info","host":"centos7","hostIp":"172.70.10.210","event":{"appId":"servicePool_test_appId","asrResult":"å–‚ä½ å¥½å–‚ä½ å¥½å–‚ä½ å¥½èƒ½å¬åˆ°æˆ‘è¯´è¯å—","callId":"254425cb-ebde-433c-932d-9538bf48cd2a","channelId":"254425cb-ebde-433c-932d-9538bf48cd2a_30004","channelType":"agent","sessionId":"254425cb-ebde-433c-932d-9538bf48cd2a_30004"},"eventId":"edc97f19-f69d-44f2-aecd-ffb798c5dad5","eventName":"ASR_RESULT_CB"}




{"project":"kds","module":"kd-asr-proxy","timestamp":"2025-02-28T14:19:57.862","level":"info","host":"centos7","hostIp":"172.70.10.210","msg":"createSession response 200 {"code":200,"data":{"rtpPort":30004,"sessionID":"b5e009c7-9287-44c2-9d1d-5fb72e7d257f_30004"},"msg":"OK"}"}
{"project":"kds","module":"kd-asr-proxy","timestamp":"2025-02-28T14:20:16.275","level":"debug","host":"centos7","hostIp":"172.70.10.210","msg":"sid b5e009c7-9287-44c2-9d1d-5fb72e7d257f_30004 recieve command = 0"}
{"project":"kds","module":"kd-asr-proxy","timestamp":"2025-02-28T14:20:16.275","level":"debug","host":"centos7","hostIp":"172.70.10.210","msg":"recieve result sid , file /var/asr_record/6294be67-be57-41b1-b8af-abffee8ee51c_0002.wav, result å·®ä¸å¤šå°±æ˜¯, index 2, pos 0, beginTime 16400, endTime 18480"}
{"project":"kds","module":"kd-asr-proxy","timestamp":"2025-02-28T14:20:16.706","level":"info","host":"centos7","hostIp":"172.70.10.210","msg":"Starting ... "}
{"project":"kds","module":"kd-asr-proxy","timestamp":"2025-02-28T14:20:16.711","level":"info","host":"centos7","hostIp":"172.70.10.210","msg":"kd-asr-proxy bind host 172.70.10.210 port 30208"}



{"project":"kds","module":"kd-asr-proxy","timestamp":"2025-02-24T15:52:10.283","level":"info","host":"centos7","hostIp":"172.70.10.210","msg":"kafka msg sended, topic asr_result_notify partition 0 msg {"app_id":"servicePool_test_appId","begin_time":"2025-02-24 15:52:08","call_id":"30c117b0-189f-42a6-a2b3-049dd1ef31ec","index":0,"msg_type":"asr_result","result":"å–‚å–‚å–‚å–‚å–‚å–‚","side":"agent","time_stamp":"2025-02-24 15:52:08,000"}"}
{"project":"kds","module":"kd-asr-proxy","timestamp":"2025-02-24T15:52:14.865","level":"debug","host":"centos7","hostIp":"172.70.10.210","msg":"sid 30c117b0-189f-42a6-a2b3-049dd1ef31ec_30088 recieve command = 0"}

{"project":"kds","module":"kd-asr-proxy","timestamp":"2025-02-24T15:52:14.865","level":"debug","host":"centos7","hostIp":"172.70.10.210","msg":"recieve result sid , file /var/asr_record/e8984bb5-d7d3-437c-a8c3-3c033b2ffba0_0001.wav, result å¯ä»¥è¯´è¯å—èƒ½å¬åˆ°å—, index 1, pos 0, beginTime 4650, endTime 6820"}
{"project":"kds","module":"kd-asr-proxy","timestamp":"2025-02-24T15:52:14.867","level":"info","host":"centos7","hostIp":"172.70.10.210","msg":"kafka msg sended, topic asr_result_notify partition 0 msg {"app_id":"servicePool_test_appId","begin_time":"2025-02-24 15:52:09","call_id":"30c117b0-189f-42a6-a2b3-049dd1ef31ec","index":1,"msg_type":"asr_result","result":"å¯ä»¥è¯´è¯å—èƒ½å¬åˆ°å—","side":"agent","time_stamp":"2025-02-24 15:52:09,000"}"}

{"project":"kds","module":"kd-asr-proxy","timestamp":"2025-02-24T15:52:24.630","level":"info","host":"centos7","hostIp":"172.70.10.210","msg":"recieve request method DELETE, body sessionid 30c117b0-189f-42a6-a2b3-049dd1ef31ec_30086"}
{"project":"kds","module":"kd-asr-proxy","timestamp":"2025-02-24T15:52:24.829","level":"info","host":"centos7","hostIp":"172.70.10.210","msg":"pcm reciever thread exit ... fd 46"}




20250228
è”è°ƒkd-asr-proxyæ¨é€kafka asrç»“æœåŠŸèƒ½å’Œkafka topicé…ç½®åŠŸèƒ½
åŒæ­¥kt-libåˆ†æ”¯devä»£ç åˆ°åˆ†æ”¯dev_intent2ï¼Œåˆå¹¶è§£å†³ä»£ç å†²çª
è°ƒç ”sqliteæ•°æ®åº“ä¸‰æ–¹å¼€å‘æ¡†æ¶(sqlite_ormã€sqlite3ppã€sqlitecppã€easysqliteã€sqlSQLite++ã€sqlite3cc)
æ­å»ºå¹¶æµ‹è¯•æ•°æ®åº“å¼€å‘æ¡†æ¶sqlite_ormç¯å¢ƒ



vcpkg install sqlite-orm

sqlite-orm provides CMake targets:
  # this is heuristically generated, and may not be correct
  find_package(SqliteOrm CONFIG REQUIRED)
  target_link_libraries(main PRIVATE sqlite_orm::sqlite_orm)




sqlite3pp: modern design inspired by boost, MIT License
sqlitecpp: qeury with string and bind
easySQLite: manages table as structured objects, complex
sqlite_modern_cpp: modern C++11, all in one file, MIT license
sqlite_orm: modern C++14, header only all in one file, no raw string queries, BSD-3 license


sqlite3cc: uses boost, modern design, LPGPL
SQLite++: uses boost build system, Boost License 1.0
CppSQLite: famous Code Project but old design, BSD License
sqdbcpp: RAII design, simple, no dependencies, UTF-8/UTF-16, new BSD license




1ã€kafkaæ¶ˆæ¯æ ¼å¼ä¿®æ”¹
2ã€topicæ”¹æˆå˜é‡å¯é…çš„å¯åŠ¨å‚æ•°(ç¯å¢ƒå˜é‡ASRPROXY_KAFKA_TOPIC, )ï¼Œç›®å‰topicæ˜¯å†™æ­»çš„


{"project":"kds","module":"kd-asr-proxy","timestamp":"2025-03-05T14:19:33.082","level":"debug","host":"centos7","hostIp":"172.70.10.210","msg":"è·å–rtpç«¯å£ 30004"}
{"project":"kds","module":"kd-asr-proxy","timestamp":"2025-03-05T14:19:33.082","level":"debug","host":"centos7","hostIp":"172.70.10.210","msg":"ASR OPTIONS: AsrRenderId 3 1"}
{"project":"kds","module":"kd-asr-proxy","timestamp":"2025-03-05T14:19:33.083","level":"debug","host":"centos7","hostIp":"172.70.10.210","msg":"recpProxy.so pCreateRecoProxy success"}
{"project":"kds","module":"kd-asr-proxy","timestamp":"2025-03-05T14:19:33.083","level":"debug","host":"centos7","hostIp":"172.70.10.210","msg":"PCMReciever listen 172.70.10.210:30004"}
{"project":"kds","module":"kd-asr-proxy","timestamp":"2025-03-05T14:19:33.083","level":"info","host":"centos7","hostIp":"172.70.10.210","msg":"binding PCM reciever port success, fs 33 ipaddr 172.70.10.210 port 30004"}
{"project":"kds","module":"kd-asr-proxy","timestamp":"2025-03-05T14:19:33.083","level":"debug","host":"centos7","hostIp":"172.70.10.210","msg":"insert processor for sid ad592d37-74f7-4670-a5b5-e0f7b07f72ca_30004"}

{"project":"kds","module":"kd-asr-proxy","timestamp":"2025-03-05T14:19:33.083","level":"info","host":"centos7","hostIp":"172.70.10.210","msg":"call session create success, sid ad592d37-74f7-4670-a5b5-e0f7b07f72ca_30004"}
{"project":"kds","module":"kd-asr-proxy","timestamp":"2025-03-05T14:19:33.083","level":"info","host":"centos7","hostIp":"172.70.10.210","msg":"createSession response 200 {"code":200,"data":{"rtpPort":30004,"sessionID":"ad592d37-74f7-4670-a5b5-e0f7b07f72ca_30004"},"msg":"OK"}"}
{"project":"kds","module":"kd-asr-proxy","timestamp":"2025-03-05T14:19:33.083","level":"info","host":"centos7","hostIp":"172.70.10.210","msg":"pcm reciever thread start ... fd 33"}

{"project":"kds","module":"kd-asr-proxy","timestamp":"2025-03-05T14:19:37.015","level":"debug","host":"centos7","hostIp":"172.70.10.210","msg":"sid 0b8764ea-3334-4134-9299-9afca8314556_30002 receive command = 0"}
{"project":"kds","module":"kd-asr-proxy","timestamp":"2025-03-05T14:19:37.015","level":"debug","host":"centos7","hostIp":"172.70.10.210","msg":"recieve result sid , file /var/asr_record/0b8764ea-3334-4134-9299-9afca8314556_0000.wav, result å–‚å–‚å–‚å–‚å–‚å–‚, index 0, pos 0, beginTime 1550, endTime 3960"}





{
	"agentId":1896135529281617922,
	"appID":"servicePool_test_appId",
	"asrEngine":"Lenovo_HTTP",
	"callID":"0b8764ea-3334-4134-9299-9afca8314556",
	"channelID":"0b8764ea-3334-4134-9299-9afca8314556",
	"channelType":"agent",
	"serviceId":1897170063405424640,
	"vadParams":{
		"maxSpeechPause":750,
		"minSpeechDuration":120,
		"minVoicePoint":2000,
		"voicePoint":4000
	}
}


app_id servicePool_test_appId,
call_id 0b8764ea-3334-4134-9299-9afca8314556,
channel_id 0b8764ea-3334-4134-9299-9afca8314556,
service_id agent,
agent_id 2 ,
channel_type 1897170063405424640,
asr_engine 1896135529281617922 ,
voice_point 4000,
min_voice_point 2000,
spd 120,
spp 120


{

	"appID": "servicePool_test_appId",
	"asrEngine": "Lenovo_HTTP",
	"callID": "0d5c80ac-5d19-4f3b-ab67-b779348c5b60",
	"channelID": "0d5c80ac-5d19-4f3b-ab67-b779348c5b60",
	"channelType": "user",
	"serviceId": 1896485082995732480,
	"agentId": 1895020113934639106,
	"vadParams": {
		"maxSpeechPause": 750,
		"minSpeechDuration": 120,
		"minVoicePoint": 2000,
		"voicePoint": 4000
	}
}

{
"type": "asrResult",
"data": {
	"serviceId": 1896485082995732480,												//é€ä¼ ï¼Œæ¥è‡ªcreate
	"agentId": 1895020113934639106,													//é€ä¼ ï¼Œæ¥è‡ªcreate
	"sessionId": "0f0d6196-217a-4b19-a306-34f10950f279",							//åŸcallId
	"time": 1652525365123, 															//å½“å‰æ—¶é—´
	"side": "user", 																//useræˆ–agent
	"msgBody": "ä½ å¥½",
	"msgType": "text"
Â }
}




20250227
ä¿®æ”¹kd-asr-proxyæ¨é€kafka asrç»“æœæ ¼å¼
æ·»åŠ kd-asr-proxyæ¨é€kafka topicé€šè¿‡ç¯å¢ƒå˜é‡æ–¹å¼å¯é…åŠŸèƒ½
è°ƒè¯•è§£å†³kd-asr-proxyç¼–è¯‘æŠ¥é”™é—®é¢˜
æ„å»ºkd-asr-proxy dockeré•œåƒæœ€æ–°ç‰ˆæœ¬



20250226
è·Ÿè¿›è§„é¿kylinè½¯ä»¶å®‰è£…dbusæ¥å£ç®¡æ§æ–¹å¼(åç»­é€šçŸ¥kylinæŠ€æœ¯æ›´æ–°ç™½åå•å³å¯)
æ”¯æŒç»´ç« è”è°ƒsysfunc.key.shortcutsåŠŸèƒ½æ¥å£
ç¼–å†™æ„å›¾ä½“ç³»Excelè¡¨æ ¼å¿…è¦æ•°æ®è§£æçš„å·¥å…·ç¨‹åº
æ„å»ºç³»ç»Ÿè°ƒç”¨æ‰€ç”¨æ„å›¾èµ„æºsqliteæ•°æ®åº“




sysfunc.app.get è·å–æœ¬åœ°å·²å®‰è£…åº”ç”¨æ¥å£
sysfunc.app.install å®‰è£…åº”ç”¨åˆ°æœ¬åœ°æ¥å£
sysfunc.app.installable æŸ¥è¯¢å¯å®‰è£…åº”ç”¨æ¥å£

#sysfunc.app.open æ‰“å¼€å·²å®‰è£…åº”ç”¨æ¥å£

#sysfunc.os.set ç³»ç»Ÿè®¾ç½®æ¥å£
#sysfunc.os.get ç³»ç»ŸçŠ¶æ€æ¥å£


sysfunc.key.shortcuts é”®ç›˜å”¤èµ·å¿«æ·è¾“å…¥æ¡†æ¥å£




ç³»ç»Ÿè°ƒç”¨æ¥å£
intent è°ƒç”¨æ–¹å¼ï¼šæ‰“å¼€åº”ç”¨

åº”ç”¨çŠ¶æ€å˜æ›´äº‹ä»¶
INSTALL_STATUS_CHANGE: åº”ç”¨å®‰è£…çŠ¶æ€å˜æ›´äº‹ä»¶
RUNNING_STATUS_CHANGE: åº”ç”¨è¿è¡ŒçŠ¶æ€å˜æ›´äº‹ä»¶

ç”¨æˆ·è¡Œä¸ºäº‹ä»¶
USER_SELECTED_CONTENT_CHANGE: ç”¨æˆ·é€‰æ‹©çš„å†…å®¹å˜æ›´äº‹ä»¶
USER_MOUSE_EVENT: ç”¨æˆ·é¼ æ ‡äº‹ä»¶




20250225
è®¾è®¡sysfunc.execæ‰“å¼€åº”ç”¨åŠŸèƒ½æ¨¡å—
å¼€å‘sysfunc.execæ‰“å¼€åº”ç”¨åŠŸèƒ½
è°ƒæµ‹sysfunc.execæ‰“å¼€åº”ç”¨åŠŸèƒ½
æ’æŸ¥è§£å†³æ‰“å¼€åº”ç”¨shellå‘½ä»¤è°ƒç”¨å¤±è´¥é—®é¢˜


the design of sysfunc exec:

æ‰“å¼€åº”ç”¨:
	get_app_by_key: 			funcï¼Œ9ä¸ªï¼Œ		å‰ç«¯è°ƒgrpc api(app_info) --> shell
	get_login_user: 	    	funcï¼Œ6ä¸ªï¼Œ		åå°è°ƒsystem api(username) --> shell
	desktop: 	    			gioï¼Œ 18ä¸ªï¼Œ		åå°è°ƒukuisearch(app_info) --> shell

ç³»ç»Ÿè®¾ç½®:
	gsettings:					shellï¼Œ59ä¸ªï¼Œ	åå°è°ƒshell
	ukui-control-center:		shellï¼Œ108ä¸ªï¼Œ	åå°è°ƒshell
	gdbus call --session:		shellï¼Œ10ä¸ªï¼Œ	åå°è°ƒshell
	ukui-screensaver-command:	shellï¼Œ1ä¸ªï¼Œ		åå°è°ƒshell


	"type": "dbus",				dbusï¼Œ2ä¸ªï¼Œ		åå°è°ƒshell
		"data": {
			"destination": "org.ukui.media",
			"path": "/org/ukui/media",
			"interface": "org.ukui.media",
			"method": "getDefaultOutputVolume",
			"paramfmt": ""
		}


	"type": "int",				intï¼Œ3ä¸ª			åå°è°ƒshell
		"delta": 10,
		"max": 100,
		"min": 0
	"type": "float",			floatï¼Œ3ä¸ª		åå°è°ƒshell
		"delta": 0.2,
		"max": 1.0,
		"min": 0.0
	"type": "enum",				enumï¼Œ2ä¸ªï¼Œ		åå°è°ƒshell
		"enums": ["10", "12", "13.5", "15"]
	"type": "map",				mapï¼Œ10ä¸ªï¼Œ		åå°è°ƒshell
		"maps": {
			"1åˆ†é’Ÿ": "1",
			"5åˆ†é’Ÿ": "5",
			"10åˆ†é’Ÿ": "10",
			"15åˆ†é’Ÿ": "15",
			"30åˆ†é’Ÿ": "30",
			"1å°æ—¶": "60",
			"ä»ä¸": "-1"
		}


20250224
æ›´æ–°51.215æœºå™¨æµ‹è¯•ç¯å¢ƒæœ€æ–°ç‰ˆæœ¬(kt-lib/dev,kt-app/phase2)
è°ƒæµ‹åº”ç”¨ä¸­å¿ƒå®‰è£…æ¥å£åº•å±‚dbusæœåŠ¡è°ƒç”¨æŠ¥é”™é—®é¢˜(upgrade-2403.tar.gzè¡¥ä¸åŒ…å®‰è£…ã€ç®¡æ§å–æ¶ˆ)
æ’æŸ¥è§£å†³å¹¶å‘è°ƒç”¨sysfunc.app.getæ¥å£æœåŠ¡å´©æºƒé—®é¢˜
æ·»åŠ sysfunc.execåŠŸèƒ½æ¥å£ï¼Œå°è¯•è§£å†³æ¨¡å—é€‰æ‹©é”™è¯¯(sysfuncä¸­æ„å›¾æ§½ä½åŒ¹é…å¤±è´¥)



I20250224 17:07:59.542178 21573 sysfunc.cc:749] handleGrpcMsgAsync request: {"cmd":"sysfunc.app.get","data":{"package":"","name":"å¾®ä¿¡"},"private":"è°ƒç”¨è€…è‡ªå®šä¹‰å­—ç¬¦ä¸²"}
I20250224 17:07:59.542275 21573 app_manager.cc:143] app manager searching å¾®ä¿¡
I20250224 17:07:59.544663 21573 app_manager.cc:188] app manager search [{"exec":"/usr/bin/wechat ","icon":"/usr/share/icons/hicolor/256x256/apps/wechat.png","identity":"/usr/share/applications/wechat.desktop","name":"å¾®ä¿¡","package":"wechat","status":4,"version":""}]
I20250224 17:07:59.545109 21573 sysfunc.cc:821] handleGrpcMsgAsync rep: {"cmd":"sysfunc.app.get","data":[{"exec":"/usr/bin/wechat ","icon":"/usr/share/icons/hicolor/256x256/apps/wechat.png","identity":"/usr/share/applications/wechat.desktop","name":"å¾®ä¿¡","package":"wechat","status":4,"version":""}],"eot":true,"private":"è°ƒç”¨è€…è‡ªå®šä¹‰å­—ç¬¦ä¸²","sessionId":null,"state":{"code":0,"extend":"","info":"success"}}
I20250224 17:07:59.553581 21573 sysfunc.cc:749] handleGrpcMsgAsync request: {"cmd":"sysfunc.exec","data":{"type":"intent","data":{"intent":"æ‰“å¼€åº”ç”¨","slots":["å¾®ä¿¡"]}},"private":"è‡ªå®šä¹‰æ ‡è¯†"}
I20250224 17:07:59.553642 21573 sysfunc.cc:679] syscall_cmd() cmdMsg: {"data":{"intent":"æ‰“å¼€åº”ç”¨","slots":["å¾®ä¿¡"]},"type":"intent"}
I20250224 17:07:59.553663 21573 sysfunc.cc:339] KModuleSysfunc::syscall_intent in
I20250224 17:07:59.553680 21573 sysfunc.cc:345] KModuleSysfunc::syscall_intent intent = æ‰“å¼€åº”ç”¨
I20250224 17:07:59.553700 21573 sysfunc.cc:363] KModuleSysfunc::syscall_intent mainSlot: å¾®ä¿¡, subSlot:
I20250224 17:07:59.553732 21573 sysfunc.cc:371] >>>>>> cmdCfg is null.
I20250224 17:07:59.553750 21573 sysfunc.cc:574] KModuleSysfunc::syscall_intent ot
I20250224 17:07:59.553774 21573 sysfunc.cc:821] handleGrpcMsgAsync rep: {"cmd":"sysfunc.exec","data":{"result":"æ§½å€¼ä¸å­˜åœ¨"},"eot":true,"private":"è‡ªå®šä¹‰æ ‡è¯†","sessionId":null,"state":{"code":400,"extend":"","info":"success"}}




20250221
è°ƒè¯•sysfuncä¸­æ¨¡æ‹Ÿé”®ç›˜è¾“å…¥åŠŸèƒ½æ¥å£
ç¼–å†™sysfuncä¸­æ¨¡æ‹Ÿé”®ç›˜è¾“å…¥æ¥å£æ–‡æ¡£
è°ƒæµ‹sysfuncåº”ç”¨å•†åº—æœç´¢åŠŸèƒ½æ¥å£
æ’æŸ¥è§£å†³dbusåº”ç”¨æœç´¢æ–¹æ³•è°ƒç”¨å‚æ•°è§£æé”™è¯¯é—®é¢˜


20250220
è°ƒç ”C++å®ç°æ¨¡æ‹Ÿé”®ç›˜è¾“å…¥åŠŸèƒ½(X11ã€QTã€Waylandã€uinputã€evdev)
ç¼–å†™C++æµ‹è¯•ç”¨ä¾‹éªŒè¯æ¨¡æ‹Ÿé”®ç›˜è¾“å…¥åŠŸèƒ½(åŸºäºX11å®ç°è¯¥åŠŸèƒ½å¯ç”¨)
è®¾è®¡æ¨¡æ‹Ÿé”®ç›˜æ‰§è¡Œå™¨key_actuatoræ¨¡å—
å¼€å‘sysfuncä¸­æ¨¡æ‹Ÿé”®ç›˜è¾“å…¥æ¥å£ï¼Œå®ç°å”¤èµ·å°å¤©å¿«æ·è¾“å…¥æ¡†åŠŸèƒ½



/home/lit/project/kaitian/kt-lib/bin/resource/intent/intent_resource.zip

unzOpen


intent_controllerã€intent_recognizerã€slot_filler


./modelutil bin

(data_vector.json --> hnsw.bin)



20250219
æ„å»ºå¹¶æ›´æ–°æ„å›¾hnswå‘é‡åº“ï¼Œæ›´æ–°æ„å›¾sortæ¨¡å‹ï¼Œæµ‹è¯•ä¿®å¤bad case:"æ³°å±±å¤šé«˜"
åˆå¹¶å›ºå®šæ§½ä½å’Œå¯å˜æ§½ä½åˆ°åŒä¸€ä¸ªæ„å›¾æ§½ä½å…³è”é…ç½®æ–‡ä»¶
æ±‡æ€»æ„å›¾èµ„æºæ–‡ä»¶çš„æ„é€ å·¥å…·åŠå…¶åŸå§‹ç´ æï¼Œç¼–å†™å…¶ä½¿ç”¨è¯´æ˜æ–‡æ¡£
ä¿®æ”¹sysfuncä¸­intentè°ƒç”¨æµç¨‹ä¸é€»è¾‘ï¼Œå› æŠ½æ§½æ¨¡å—æ›´æ–°ï¼Œsysfuncè§£ææ§½ä½ä¿¡æ¯æš‚æ— æ³•å…¼å®¹ï¼Œéœ€å¯¹åº”æ›´æ–°sysfuncä¸­é…ç½®æ–‡ä»¶kd_sysf_cfg.enc



20250218
ä¿®æ”¹codeå…³è”ä¿¡æ¯é¢„ç½®è¡¨æ„é€ é€»è¾‘ï¼Œè°ƒè¯•è§£å†³codeå…³è”ä¿¡æ¯é¢„ç½®è¡¨è§£æå¤±è´¥é—®é¢˜
è°ƒæµ‹è§£å†³æ„å›¾codeåŒ¹é…å¤±è´¥é—®é¢˜
è°ƒæµ‹æ§½åå’Œæ§½å€¼çš„codeåŒ¹é…å‡ºé”™é—®é¢˜
æ¢³ç†sysfuncä¸­intentè°ƒç”¨æµç¨‹ä¸é€»è¾‘


1ã€intent_name(intent api json)

2ã€intent_value(all slots value) = kd_sysf_cfg.enc[intent_name](kd_sysf_cfg.enc file)

3ã€main_slot, sub_slot = intent_name(intent api json)

4ã€shell cmd = kd_sysf_cfg.enc[intent_name][main_slot](kd_sysf_cfg.enc file)
  / shell cmd = kd_sysf_cfg.enc[intent_name][sub_slot](kd_sysf_cfg.enc file)





20250217
è°ƒæµ‹æ„å›¾è¯†åˆ«bad case: "è¾“å…¥æ³°å±±æœ‰å¤šé«˜"
æ¢è®¨å¹¶ä¿®æ”¹æ„å›¾æ¥å£api(codeå…³è”ä¿¡æ¯)
å¼€å‘codeå…³è”ä¿¡æ¯é¢„ç½®è¡¨æ„é€ å’Œè§£æé€»è¾‘
å¼€å‘æ„å›¾è¯†åˆ«å’ŒæŠ½æ§½æ¨¡å—æ¥å£codeå…³è”ä¿¡æ¯


intent_code
slot_code
slot_value_name





å¼€å¤©æ„å›¾ä½“ç³» äºŒæœŸ:
https://docs.qq.com/sheet/DQlJ6QWhCb0xVaFpD?tab=000001&no_promotion=1&nlc=1&_t=1739763548876


I20250217 09:54:31.154943 112461 hnsw_searcher.cc:71] kdm hnsw searcher search result idx: 35008, relation = 0.240524, label = è®¾ç½®å­—ä½“å¤§å°çš„çŠ¶æ€, text = æŸ¥
è¯¢ä¸€ä¸‹å­—ä½“å¤§å°çŠ¶æ€, score = 0.759476
I20250217 09:54:31.154956 112461 hnsw_searcher.cc:71] kdm hnsw searcher search result idx: 31540, relation = 0.242184, label = è®¾ç½®å­—ä½“å¤§å°, text = å¸®æˆ‘æŠŠå­—
ä½“æ”¾åˆ°æœ€å¤§, score = 0.757816
I20250217 09:54:31.154966 112461 intent_model_bert.cc:86] intent model bert recognize è¾“å…¥æ³°å±±æœ‰å¤šé«˜ intent OTHER, score 0.804328, match text ä½ æœ‰å¤šé«˜
I20250217 09:54:31.162602 112461 intent_model_bert.cc:94] intent model bert recognize è¾“å…¥æ³°å±±æœ‰å¤šé«˜ intent OTHER, rescore 0.402271, match text ä½ æœ‰å¤šé«˜
I20250217 09:54:31.162700 112461 intent_model_bert.cc:86] intent model bert recognize è¾“å…¥æ³°å±±æœ‰å¤šé«˜ intent æ–‡æœ¬åˆ›ä½œ, score 0.799022, match text å±±æœ‰å¤šé«˜æ­Œ>è¯ç”Ÿæˆï¼š
I20250217 09:54:31.179783 112461 intent_model_bert.cc:94] intent model bert recognize è¾“å…¥æ³°å±±æœ‰å¤šé«˜ intent æ–‡æœ¬åˆ›ä½œ, rescore 0.399583, match text å±±æœ‰å¤šé«˜>æ­Œè¯ç”Ÿæˆï¼š
I20250217 09:54:31.179852 112461 intent_model_bert.cc:86] intent model bert recognize è¾“å…¥æ³°å±±æœ‰å¤šé«˜ intent OTHER, score 0.797757, match text èº«é«˜ï¼Ÿ
I20250217 09:54:31.186669 112461 intent_model_bert.cc:94] intent model bert recognize è¾“å…¥æ³°å±±æœ‰å¤šé«˜ intent OTHER, rescore 0.404728, match text èº«é«˜ï¼Ÿ
I20250217 09:54:31.186736 112461 intent_model_bert.cc:86] intent model bert recognize è¾“å…¥æ³°å±±æœ‰å¤šé«˜ intent OTHER, score 0.794401, match text ä½ å¤šé«˜
I20250217 09:54:31.193466 112461 intent_model_bert.cc:94] intent model bert recognize è¾“å…¥æ³°å±±æœ‰å¤šé«˜ intent OTHER, rescore 0.397221, match text ä½ å¤šé«˜
I20250217 09:54:31.193537 112461 intent_model_bert.cc:86] intent model bert recognize è¾“å…¥æ³°å±±æœ‰å¤šé«˜ intent æ‰“å¼€å¤©æ°”, score 0.772818, match text ä¸‹å‘¨ä¸€æ³°å±±>çš„å¤©æ°”é€‚åˆçˆ¬å±±å—
I20250217 09:54:31.202370 112461 intent_model_bert.cc:94] intent model bert recognize è¾“å…¥æ³°å±±æœ‰å¤šé«˜ intent æ‰“å¼€å¤©æ°”, rescore 0.886391, match text ä¸‹å‘¨ä¸€æ³°>å±±çš„å¤©æ°”é€‚åˆçˆ¬å±±å—
I20250217 09:54:31.202436 112461 intent_model_bert.cc:86] intent model bert recognize è¾“å…¥æ³°å±±æœ‰å¤šé«˜ intent è®¾ç½®å­—ä½“å¤§å°çš„çŠ¶æ€, score 0.771357, match text >ç›®å‰çš„å­—ä½“å¤§å°æ˜¯ä»€ä¹ˆ
I20250217 09:54:31.210414 112461 intent_model_bert.cc:94] intent model bert recognize è¾“å…¥æ³°å±±æœ‰å¤šé«˜ intent è®¾ç½®å­—ä½“å¤§å°çš„çŠ¶æ€, rescore 0.385684, match text ç›®å‰çš„å­—ä½“å¤§å°æ˜¯ä»€ä¹ˆ
I20250217 09:54:31.210485 112461 intent_model_bert.cc:86] intent model bert recognize è¾“å…¥æ³°å±±æœ‰å¤šé«˜ intent è®¾ç½®å­—ä½“å¤§å°çš„çŠ¶æ€, score 0.764991, match text >ç°åœ¨æ˜¯ä»€ä¹ˆå­—ä½“å¤§å°
I20250217 09:54:31.218429 112461 intent_model_bert.cc:94] intent model bert recognize è¾“å…¥æ³°å±±æœ‰å¤šé«˜ intent è®¾ç½®å­—ä½“å¤§å°çš„çŠ¶æ€, rescore 0.3825, match text >ç°åœ¨æ˜¯ä»€ä¹ˆå­—ä½“å¤§å°
I20250217 09:54:31.218495 112461 intent_model_bert.cc:86] intent model bert recognize è¾“å…¥æ³°å±±æœ‰å¤šé«˜ intent è®¾ç½®å­—ä½“å¤§å°çš„çŠ¶æ€, score 0.763636, match text >ç°åœ¨å­—ä½“æ˜¯å¤šå¤§
I20250217 09:54:31.226540 112461 intent_model_bert.cc:94] intent model bert recognize è¾“å…¥æ³°å±±æœ‰å¤šé«˜ intent è®¾ç½®å­—ä½“å¤§å°çš„çŠ¶æ€, rescore 0.381823, match text ç°åœ¨å­—ä½“æ˜¯å¤šå¤§
I20250217 09:54:31.226608 112461 intent_model_bert.cc:86] intent model bert recognize è¾“å…¥æ³°å±±æœ‰å¤šé«˜ intent æ‰“å¼€å¤©æ°”, score 0.763447, match text æŸ¥è¯¢è¿‘æœŸåŒ>é¸­å±±æ¹¿åº¦æ˜¯å¦å±äºæŒºé«˜
I20250217 09:54:31.235882 112461 intent_model_bert.cc:94] intent model bert recognize è¾“å…¥æ³°å±±æœ‰å¤šé«˜ intent æ‰“å¼€å¤©æ°”, rescore 0.881704, match text æŸ¥è¯¢è¿‘æœŸ>åŒé¸­å±±æ¹¿åº¦æ˜¯å¦å±äºæŒºé«˜
I20250217 09:54:31.235947 112461 intent_model_bert.cc:86] intent model bert recognize è¾“å…¥æ³°å±±æœ‰å¤šé«˜ intent è®¾ç½®å­—ä½“å¤§å°, score 0.757816, match text å¸®æˆ‘æŠŠ>å­—ä½“æ”¾åˆ°æœ€å¤§
I20250217 09:54:31.244045 112461 intent_model_bert.cc:94] intent model bert recognize è¾“å…¥æ³°å±±æœ‰å¤šé«˜ intent è®¾ç½®å­—ä½“å¤§å°, rescore 0.378913, match text å¸®æˆ‘>æŠŠå­—ä½“æ”¾åˆ°æœ€å¤§
I20250217 09:54:31.244112 112461 intent_model_bert.cc:111] intent model bert recognize intent æ‰“å¼€å¤©æ°” score 0.886391, match text ä¸‹å‘¨ä¸€æ³°å±±çš„å¤©æ°”é€‚åˆçˆ¬å±±å—


20250214
è°ƒæµ‹kt-lib arm64å¹³å°ç¼–è¯‘é—®é¢˜ï¼Œå®šä½è§£å†³sqlite3ä¾èµ–ç¼ºå¤±é—®é¢˜
ç†Ÿæ‚‰ktserviceæµ‹è¯•ç¯å¢ƒä½¿ç”¨å’Œæ‰“åŒ…
æµ‹è¯•arm64å¹³å°ä¸‹æ„å›¾æ¨¡å—åŠ è½½ã€è¯†åˆ«ã€å¸è½½ã€å‡çº§åŠŸèƒ½
æ”¯æŒç»´ç’‹è°ƒæµ‹åº”ç”¨æŸ¥è¯¢ã€å®‰è£…ç­‰æ¥å£ï¼Œè§£å†³kylinç³»ç»Ÿæç¤ºå…¶ä»–ä»»åŠ¡è¿›è¡Œä¸­



20250213
è°ƒæµ‹intent2.0è¯†åˆ«åŠŸèƒ½æ¥å£ï¼Œæ’æŸ¥è§£å†³pipelineæµç¨‹ä¸­æ–­é—®é¢˜
è°ƒæµ‹å¹¶ä¿®æ”¹intent2.0æ›´æ–°å‡çº§åŠŸèƒ½æ¥å£
æ’æŸ¥è§£å†³æµ‹è¯•æ„å›¾æ¨¡å‹æ›´æ–°æ—¶å´©æºƒé—®é¢˜
ä¿®æ”¹æ„å›¾å„ä¸ªæ¨¡å—å‘½åè§„èŒƒ(intent_controllerã€intent_recognizerã€slot_filler)


20250212
ç¼–å†™intent2.0æ¥å£æµ‹è¯•ç”¨ä¾‹
è°ƒæµ‹intent2.0æ¨¡å‹åŠ è½½ï¼Œå¸è½½æ¥å£ï¼Œå®šä½è§£å†³æ¥å£åè®®è§£æå¤±è´¥é—®é¢˜
éªŒè¯éº’éºŸåº”ç”¨å•†åº—æœç´¢session dbusæ¥å£è°ƒç”¨
å‚åŠ è½¬æ­£è¿°èŒæŠ¥å‘Šä¼šè®®


20250211
æ’æŸ¥é¢å’Œå›­é¡¹ç›®çº¿ä¸Šfreeswitchè°ƒç”¨mrcpå»ºç«‹ttsé€šé“å¤±è´¥é—®é¢˜
è·Ÿè¿›è°ƒæµ‹éº’éºŸåº”ç”¨å•†åº—æœç´¢æ¥å£è°ƒç”¨ä¸é€šé—®é¢˜
å¼€å‘intent2.0å¤–éƒ¨äº¤äº’api intent.recogåŠŸèƒ½æ¥å£
è°ƒè¯•è§£å†³intent2.0é›†æˆå±‚ç¼–è¯‘æŠ¥é”™é—®é¢˜


20250210
ä¼˜åŒ–intent2.0èµ„æºé‡è½½ä¸å‡çº§æ¨¡å—
å¼€å‘intent2.0å¤–éƒ¨äº¤äº’api model.loadåŠŸèƒ½æ¥å£
å¼€å‘intent2.0å¤–éƒ¨äº¤äº’api model.unloadåŠŸèƒ½æ¥å£
å¼€å‘intent2.0å¤–éƒ¨äº¤äº’api model.updateåŠŸèƒ½æ¥å£


20250208
å¼€å‘KModuleIntentæ¥å£æ¨¡å—
å¼€å‘nerå’Œintentæµç¨‹pipeline
æ¢³ç†åŸintentèµ„æºé‡è½½ä¸å‡çº§æ¨¡å—
è®¾è®¡æ–°ç‰ˆintentèµ„æºé‡è½½ä¸å‡çº§æ¨¡å—


E20250208 11:56:40.229475 258173 app_manager.cc:92] app manager center proxy_new_for_bus_sync error: Error calling StartServiceByName for com.kylin.softwarecenter.getsearchresults: Cannot do system-bus activation with no user
(process:258173): GLib-GIO-CRITICAL **: 11:56:40.229: g_dbus_proxy_call_sync_internal: assertion 'G_IS_DBUS_PROXY (proxy)' failed


20250207
ä¿®æ”¹text_embeddingä¸ºç‹¬ç«‹kdmå·¥ç¨‹
ä¿®æ”¹kdm_intentä¸ºç‹¬ç«‹kdmå·¥ç¨‹
ä¿®æ”¹kdm_nerä¸ºç‹¬ç«‹kdmå·¥ç¨‹
æ¢³ç†kt-libä¸­ä¾èµ–äºåŸintentçš„å…¶ä»–æ¨¡å—(modelutil)


20250206
å¼€å‘text_embeddingæ–‡æœ¬å‘é‡åŒ–æ¨¡å—
è°ƒæµ‹text_embeddingä¾èµ–ç¼ºå¤±é—®é¢˜
é›†æˆtext_embeddingåˆ°kt-lib
è°ƒæµ‹è§£å†³kt-lib/text_embeddingç¼–è¯‘é—®é¢˜


20250205
ç¼–å†™intentæ„å›¾è¯†åˆ«åŠŸèƒ½æµ‹è¯•ç”¨ä¾‹
è°ƒè¯•è§„åˆ™åŒ¹é…æ„å›¾æ— ç»“æœé—®é¢˜
è°ƒè¯•è§£å†³æ¨¡å‹è¯†åˆ«æ„å›¾coredumpé—®é¢˜
ä¼˜åŒ–è§„åˆ™åŒ¹é…ã€æ¨¡å‹è¯†åˆ«ä¸¤è€…çš„æ„å›¾ç»“æœèåˆé€»è¾‘


Hyper-Vè™šæ‹Ÿæœºé…ç½®æ–‡ä»¶å¤¹å’Œå­˜å‚¨åœ°å€:
C:\ProgramData\Microsoft\Windows\Hyper-V
D:\hyper-v\kylin2403




20250123
intenté›†æˆhnsw searchæ¨¡å—
intenté›†æˆsortæ¨¡å‹æ¨¡å—
è°ƒè¯•intentæ¨¡å‹è¯†åˆ«ã€è§„åˆ™åŒ¹é…ç­‰æ¨¡å—ç¼–è¯‘é—®é¢˜
ä¿®æ”¹è½¬æ­£è¿°èŒæŠ¥å‘Š



20250122
å¼€å‘intent/sortæ¨¡å‹é¢„å¤„ç†é€»è¾‘
å¼€å‘intent/sortæ¨¡å‹æ¨ç†é€»è¾‘
å¼€å‘intent/sortæ¨¡å‹åå¤„ç†åŠŸèƒ½
æ’°å†™è½¬æ­£è¿°èŒæŠ¥å‘Š




20250121
ä¼˜åŒ–image_embeddingå¤–å±‚é”™è¯¯ç é€»è¾‘
å¼€å‘intent/HnswSearcheræ¨¡å—è§„åˆ™è§£æç­‰åˆå§‹åŒ–åŠŸèƒ½æ¥å£
å¼€å‘intent/HnswSearcheræ¨¡å—æœç´¢åŠŸèƒ½æ¥å£
ç¼–å†™è½¬æ­£è¿°èŒæŠ¥å‘Š


image_embeddingå›¾åƒresizeåæ•°æ®ä¸ä¸€è‡´



20250120
ç ”ç©¶graphicmagické…ç½®é€‰é¡¹ï¼Œä¿®æ”¹å…¶å›¾åƒé‡åŒ–æ·±åº¦
ç¼–è¯‘æ›´æ–°graphicmagickåº“
ä¿®æ”¹image_embeddingçš„å›¾åƒå¤„ç†æµç¨‹
è°ƒæµ‹å›¾åƒåŸå§‹RGBåƒç´ é‡åŒ–èŒƒå›´ã€å°ºå¯¸ç¼©æ”¾ååƒç´ é‡åŒ–èŒƒå›´ã€çŸ©é˜µè½¬æ¢åå½’ä¸€åŒ–å€¼ç­‰



éœ€æ±‚ã€äº§å“ã€å¼€å‘ã€æµ‹è¯•æµç¨‹ç¯èŠ‚ä¸è§„èŒƒæ ‡å‡†ï¼Œä¸å¯é¢„æµ‹æ€§è¾ƒå¤§


å¼€å¤©é¡¹ç›®å¤–éƒ¨å…³è”æ€§è¾ƒå¤§ï¼Œå› å¤–éƒ¨å¯æ§å› ç´ å¯¼è‡´ä¸å¯é¢„æµ‹æ€§è¾ƒå¤§
å¼€å¤©é¡¹ç›®äº§å“é¢å‘To Cå®¢æˆ·ç¾¤ï¼Œä¸To Bäº§å“åœºæ™¯ä¸åŒï¼Œç”¨æˆ·ä½“éªŒè¦æ±‚è¾ƒé«˜
AIPCç«¯äº§å“åœ¨æŠ€æœ¯å¼€å‘å±‚é¢ç›´æ¥é¢å‘ç¡¬ä»¶æˆ–ç³»ç»Ÿå±‚å¼€å‘ï¼Œéš¾ç‚¹è¾ƒå¤šï¼Œæœ‰æ•ˆè¯„ä¼°ä¸æ˜“ï¼›


åº”ç”¨æœ¬èº«è‡ªæˆä½“ç³»
éœ€è¦ç†Ÿæ‚‰ã€å­¦ä¹ ç­‰é¢„ç ”æ–¹å‘
ä¸å¯é¢„æµ‹æ€§å¤ªé«˜
ä¿®æ”¹çŸ©é˜µç©ºé—´è½¬æ¢è¿‡ç¨‹


(base) root@docker-desktop:~/vcpkg/packages/graphicsmagick_x64-linux# egrep -Rn "QuantumDepth" .
./include/wand/magick_wand.h:81:  *MagickGetQuantumDepth(unsigned long *),
./include/wand/wand_symbols.h:239:#define MagickGetQuantumDepth GmMagickGetQuantumDepth


./include/magick/colorspace.h:19:#if (QuantumDepth == 8) || (QuantumDepth == 16)
./include/magick/colorspace.h:31:#elif (QuantumDepth == 32)
./include/magick/magick_config_api.h:7:#define QuantumDepth 16
./include/magick/alpha_composite.h:45:#if QuantumDepth > 16
./include/magick/magick_config.h:599:#define QuantumDepth 16
./include/magick/version.h:60:#if (QuantumDepth == 8)
./include/magick/version.h:61:#define MagickQuantumDepth  "Q8"
./include/magick/version.h:62:#elif (QuantumDepth == 16)
./include/magick/version.h:63:#define MagickQuantumDepth  "Q16"
./include/magick/version.h:64:#elif (QuantumDepth == 32)
./include/magick/version.h:65:#define MagickQuantumDepth  "Q32"
./include/magick/version.h:71:  MagickReleaseDate " " MagickQuantumDepth " " MagickWebSite
./include/magick/image.h:30:#if !defined(QuantumDepth)
./include/magick/image.h:31:#  define QuantumDepth  16
./include/magick/image.h:34:#if (QuantumDepth == 8)
./include/magick/image.h:57:#elif (QuantumDepth == 16)
./include/magick/image.h:80:#elif (QuantumDepth == 32)
./include/magick/image.h:122:#  error "Specified value of QuantumDepth is not supported"
./include/Magick++/Image.h:886:    // 65536 entries depending on the value of QuantumDepth when


Binary file ./debug/lib/libgraphicsmagick.a matches
Binary file ./lib/libgraphicsmagick.a matches


QuantumDepth

I20250117 17:44:09.010612 48272 log_stream.cc:21] color Pixel at (0, 0) - R: 102, G: 101, B: 101
I20250117 17:44:09.010617 48272 log_stream.cc:21] color Pixel at (1, 0) - R: 98, G: 97, B: 97
I20250117 17:44:09.010619 48272 log_stream.cc:21] color Pixel at (2, 0) - R: 95, G: 94, B: 94
I20250117 17:44:09.010622 48272 log_stream.cc:21] color Pixel at (0, 1) - R: 105, G: 104, B: 104
I20250117 17:44:09.010624 48272 log_stream.cc:21] color Pixel at (1, 1) - R: 101, G: 100, B: 100
I20250117 17:44:09.010627 48272 log_stream.cc:21] color Pixel at (2, 1) - R: 98, G: 97, B: 97
I20250117 17:44:09.010629 48272 log_stream.cc:21] color Pixel at (0, 2) - R: 110, G: 109, B: 109
I20250117 17:44:09.010632 48272 log_stream.cc:21] color Pixel at (1, 2) - R: 105, G: 104, B: 104
I20250117 17:44:09.010635 48272 log_stream.cc:21] color Pixel at (2, 2) - R: 101, G: 100, B: 100
I20250117 17:44:09.010685 48272 log_stream.cc:21] rgb Pixel at (0, 0) - R: 99, G: 101, B: 100
I20250117 17:44:09.010689 48272 log_stream.cc:21] rgb Pixel at (1, 0) - R: 0, G: 0, B: 0
I20250117 17:44:09.010691 48272 log_stream.cc:21] rgb Pixel at (2, 0) - R: 0, G: 0, B: 0


quality()
quantizeColors()
quantizeTreeDepth()
scene()
depth()

pixelColor(x, y)
pixelColor



  // Magick::PixelPacket *pixels = image.getPixels(0, 0, image_size_, image_size_);
  // Magick::Color color = pixels[y * width + x];
  std::vector<unsigned char> rgbBuffer(image_size_ * image_size_ * image_channels_);
  // image.writePixels(Magick::RGBQuantum, rgbBuffer.data());




IPC: ws, grpc, dbus
senseï¼šsendword, intent, ner,
decision:
action:search(text content, image content, file name, app name), app manage, system manage, IO device manage(screen, mouse, keyboard), file format convertion,



20250117
ç ”ç©¶graphicmagickå°è£…å±‚Imageå®ç°
åˆ†ægraphicmagickå°è£…å±‚Coloræ¨¡å—
åˆ†ægraphicmagickå°è£…å±‚Pixelsæ¨¡å—
ä¿®æ”¹magick_configï¼Œè°ƒæµ‹Imageåƒç´ ç‚¹é‡åŒ–èŒƒå›´


ç¼–è¯‘æ—¶é…ç½®
ç ”ç©¶graphicmagickåº•å±‚é‡åŒ–è¿‡ç¨‹
è°ƒæµ‹å›¾åƒå¤„ç†åƒç´ ç‚¹åˆ†å¸ƒèŒƒå›´
è°ƒæµ‹pythonè„šæœ¬å›¾åƒåƒç´ ç‚¹åˆ†å¸ƒèŒƒå›´
è°ƒè¯•image_embeddingé¢„å¤„ç†æ—¶åƒç´ ç‚¹é‡åŒ–ä¸ä¸€è‡´é—®é¢˜


20250116
æ¢è®¨Freeswitché›†ç¾¤éƒ¨ç½²æ–¹æ¡ˆ
è°ƒè¯•image_embeddingé¢„å¤„ç†æ—¶åƒç´ ç‚¹é‡åŒ–ä¸ä¸€è‡´é—®é¢˜
ä¿®æ”¹sysfunc.get_app_by_keyå…¼å®¹æ€§
æ·»åŠ sysfuncåº”ç”¨ç®¡ç†çš„æœç´¢å·²å®‰è£…æ¥å£




20250115
è°ƒæµ‹sysfunc.app.installæ¥å£ï¼Œå®šä½GDBus.Error:org.freedesktop.DBus.Error.NotSupported: dbus limit control,not supported
ä¿®æ”¹app_managerä¸­å®‰è£…æ¥å£ä¸ºåŒæ­¥è°ƒç”¨ï¼Œè§£å†³å¼‚æ­¥å¹¶å‘è°ƒç”¨dbusæ¥å£æ—¶äºŒæ¬¡è°ƒç”¨é˜»å¡é—®é¢˜ï¼›
å¼€å‘sysfunc.app.installableæ¥å£
è°ƒè¯•éº’éºŸåº”ç”¨å•†åº—æœç´¢dbusæ¥å£

æµ‹sysfunc.app.installableæ¥å£æµç¨‹ï¼Œ



[

  {'appname': 'wechat-devtools',
  'discription': 'ä¸ºäº†å¸®åŠ©å¼€å‘è€…ç®€å•å’Œé«˜æ•ˆåœ°å¼€å‘å’Œè°ƒè¯•å¾®ä¿¡å°ç¨‹åºï¼Œæˆ‘ä»¬åœ¨åŸæœ‰çš„å…¬ä¼—å·ç½‘é¡µè°ƒè¯•å·¥å…·çš„åŸºç¡€ä¸Šï¼Œæ¨å‡ºäº†å…¨æ–°çš„å¾®ä¿¡å¼€å‘è€…å·¥å…·ï¼Œé›†æˆäº†å…¬ä¼—å·ç½‘é¡µè°ƒè¯•å’Œå°ç¨‹åºè°ƒè¯•ä¸¤ç§å¼€å‘æ¨¡å¼ã€‚',
  'displayname_cn': 'å¾®ä¿¡å¼€å‘è€…å·¥å…·',
  'icon': '/usr/share/kylin-software-center/data/icons/wechat-devtools.png',
  'version': ''},

  {'appname': 'kylin-wine-wechat',
  'discription': 'å¾®ä¿¡ï¼Œè¶…è¿‡10äº¿äººä½¿ç”¨ï¼Œèƒ½å¤Ÿé€šè¿‡ç½‘ç»œç»™å¥½å‹å‘é€æ–‡å­—æ¶ˆæ¯ã€è¡¨æƒ…å’Œå›¾ç‰‡ï¼Œè¿˜å¯ä»¥ä¼ é€æ–‡ä»¶ï¼Œä¸æœ‹å‹è§†é¢‘èŠå¤©ï¼Œè®©ä½ çš„æ²Ÿé€šæ›´æ–¹ä¾¿ã€‚å¹¶æä¾›æœ‰å¤šç§è¯­è¨€ç•Œé¢ã€‚',
  'displayname_cn': 'å¾®ä¿¡ï¼ˆKylin-wineç‰ˆï¼‰',
  'icon': '/home/lit/.cache/uksc/icons/kylin-wine-wechat.png',
  'version': ''},

  {'appname': 'kylin-kwre-wechat',
  'discription': 'å¾®ä¿¡ï¼Œè¶…è¿‡10äº¿äººä½¿ç”¨ï¼Œèƒ½å¤Ÿé€šè¿‡ç½‘ç»œç»™å¥½å‹å‘é€æ–‡å­—æ¶ˆæ¯ã€è¡¨æƒ…å’Œå›¾ç‰‡ï¼Œè¿˜å¯ä»¥ä¼ é€æ–‡ä»¶ï¼Œä¸æœ‹å‹è§†é¢‘èŠå¤©ï¼Œè®©ä½ çš„æ²Ÿé€šæ›´æ–¹ä¾¿ã€‚å¹¶æä¾›æœ‰å¤šç§è¯­è¨€ç•Œé¢ã€‚',
  'displayname_cn': 'å¾®ä¿¡ï¼ˆWin32ç‰ˆï¼‰',
  'icon': '/usr/share/kylin-software-center/data/icons/kylin-kwre-wechat.png',
  'version': ''}

]


lit@lit-pc:~$ dbus-send --session --print-reply --dest="com.kylin.softwarecenter.getsearchresults" /com/kylin/softwarecenter/getsearchresults com.kylin.getsearchresults.get_search_result string:"wechat"
method return time=1739241609.713889 sender=:1.185 -> destination=:1.828 serial=256 reply_serial=2
array [
	array [
	 dict entry(
		string "appname"
		string "wechat-devtools"
	 )
	 dict entry(
		string "discription"
		string "ä¸ºäº†å¸®åŠ©å¼€å‘è€…ç®€å•å’Œé«˜æ•ˆåœ°å¼€å‘å’Œè°ƒè¯•å¾®ä¿¡å°ç¨‹åºï¼Œæˆ‘ä»¬åœ¨åŸæœ‰çš„å…¬ä¼—å·ç½‘é¡µè°ƒè¯•å·¥å…·çš„åŸºç¡€ä¸Šï¼Œæ¨å‡ºäº†å…¨æ–°çš„å¾®ä¿¡å¼€å‘è€…å·¥å…·ï¼Œé›†æˆäº†å…¬ä¼—å·ç½‘é¡µè°ƒè¯•å’Œå°ç¨‹åºè°ƒè¯•ä¸¤ç§å¼€å‘æ¨¡å¼ã€‚"
	 )
	 dict entry(
		string "displayname_cn"
		string "å¾®ä¿¡å¼€å‘è€…å·¥å…·"
	 )
	 dict entry(
		string "icon"
		string "/usr/share/kylin-software-center/data/icons/wechat-devtools.png"
	 )
	 dict entry(
		string "version"
		string ""
	 )
	]
	array [
	 dict entry(
		string "appname"
		string "kylin-wine-wechat"
	 )
	 dict entry(
		string "discription"
		string "å¾®ä¿¡ï¼Œè¶…è¿‡10äº¿äººä½¿ç”¨ï¼Œèƒ½å¤Ÿé€šè¿‡ç½‘ç»œç»™å¥½å‹å‘é€æ–‡å­—æ¶ˆæ¯ã€è¡¨æƒ…å’Œå›¾ç‰‡ï¼Œè¿˜å¯ä»¥ä¼ é€æ–‡ä»¶ï¼Œä¸æœ‹å‹è§†é¢‘èŠå¤©ï¼Œè®©ä½ çš„æ²Ÿé€šæ›´æ–¹ä¾¿ã€‚å¹¶æä¾›æœ‰å¤šç§è¯­è¨€ç•Œé¢ã€‚"
	 )
	 dict entry(
		string "displayname_cn"
		string "å¾®ä¿¡ï¼ˆKylin-wineç‰ˆï¼‰"
	 )
	 dict entry(
		string "icon"
		string "/home/lit/.cache/uksc/icons/kylin-wine-wechat.png"
	 )
	 dict entry(
		string "version"
		string ""
	 )
	]
	array [
	 dict entry(
		string "appname"
		string "kylin-kwre-wechat"
	 )
	 dict entry(
		string "discription"
		string "å¾®ä¿¡ï¼Œè¶…è¿‡10äº¿äººä½¿ç”¨ï¼Œèƒ½å¤Ÿé€šè¿‡ç½‘ç»œç»™å¥½å‹å‘é€æ–‡å­—æ¶ˆæ¯ã€è¡¨æƒ…å’Œå›¾ç‰‡ï¼Œè¿˜å¯ä»¥ä¼ é€æ–‡ä»¶ï¼Œä¸æœ‹å‹è§†é¢‘èŠå¤©ï¼Œè®©ä½ çš„æ²Ÿé€šæ›´æ–¹ä¾¿ã€‚å¹¶æä¾›æœ‰å¤šç§è¯­è¨€ç•Œé¢ã€‚"
	 )
	 dict entry(
		string "displayname_cn"
		string "å¾®ä¿¡ï¼ˆWin32ç‰ˆï¼‰"
	 )
	 dict entry(
		string "icon"
		string "/usr/share/kylin-software-center/data/icons/kylin-kwre-wechat.png"
	 )
	 dict entry(
		string "version"
		string ""
	 )
	]
]

dbus-send --session --print-reply --dest="com.kylin.softwarecenter.getsearchresults" /com/kylin/softwarecenter/getsearchresults com.kylin.getsearchresults.get_search_result string:"wechat"

dbus-send --session --print-reply --dest="com.kylin.softwarecenter.getsearchresults" /com/kylin/softwarecenter/getsearchresults com.kylin.getsearchresults.get_search_result string:"gdb"

dbus-send --session --print-reply --dest="com.kylin.softwarecenter.getsearchresults" /com/kylin/softwarecenter/getsearchresults com.kylin.softwarecenter.getsearchresults.get_search_result  string:"gdb"

dbus-send --system --print-reply --dest="com.kylin.softwarecenter.getsearchresults" /com/kylin/softwarecenter/getsearchresults com.kylin.softwarecenter.getsearchresults.get_search_result  string:"gdb"

dbus-send --system --print-reply --dest="com.kylin.softwarecenter.getsearchresults" /com/kylin/softwarecenter/getsearchresults com.kylin.softwarecenter.getsearchresults.get_search_result  string:"gdb"

dbus-send --system --print-reply --dest="com.kylin.softwarecenter.getsearchresults" /com/kylin/softwarecenter/getsearchresults com.kylin.softwarecenter.getsearchresults.getsearchresults  string:"gdb"


dbus-send --system --print-reply --dest="com.kylin.systemupgrade" /com/kylin/systemupgrade com.kylin.systemupgrade.interface.InstallPackages  array:string:"gdb"



20250114
ä¿®æ”¹è”è°ƒsysfunc.app.getæ¥å£åŠŸèƒ½é€»è¾‘(æ·»åŠ æœªå®‰è£…åº”ç”¨çŠ¶æ€)
è”è°ƒsysfunc.app.installæ¥å£åŠŸèƒ½
å‚åŠ å¹´åº¦KOä¼šè®®




20250113
æ¢³ç†ç ”ç©¶å¯å®‰è£…åº”ç”¨æœç´¢dbusæ¥å£
è°ƒè¯•CMakeå¯å®‰è£…åº”ç”¨æœç´¢gdbusæ¥å£ä»£ç ç”Ÿæˆ
è®¾è®¡å¯å®‰è£…åº”ç”¨æœç´¢åŠŸèƒ½æ¨¡å—
å¼€å‘å¯å®‰è£…åº”ç”¨æœç´¢åŠŸèƒ½æ¨¡å—




E20250113 17:32:34.183627 23353 log_stream.cc:29] app manager center proxy_new_for_bus_sync error:
Error calling StartServiceByName for com.kylin.softwarecenter.getsearchresults: Cannot do system-bus activation with no user

(process:23353): GLib-GIO-CRITICAL **: 17:32:34.183: g_dbus_proxy_call_sync_internal: assertion 'G_IS_DBUS_PROXY (proxy)' failed
Segmentation fault (core dumped)



æœç´¢æ¥å£
æä¾›DBUSæ¥å£
SERVICE: "com.kylin.softwarecenter.getsearchresults"
PATH: "/com/kylin/softwarecenter/getsearchresults"
æ¥å£åç§°	ä½œç”¨è¯´æ˜	å‚æ•°è¯´æ˜	å¤‡æ³¨
get_search_result
(QString appName)	è·å–å•†åº—å«æœ‰å…³é”®å­—çš„ä¸Šæ¶åº”ç”¨	in_signature='s' {keyword}
out_signature='aa{ss}'	è¿”å›æ ·ä¾‹ï¼š
[{â€œappNameâ€:â€xxxâ€,
â€œdisplayname_cnâ€:â€ä¸­æ–‡åâ€ï¼Œ
â€iconâ€:â€iconPathâ€,
â€versionâ€;â€1.0.0â€,
â€descriptionâ€:â€â€}]



20250110
è°ƒæµ‹CMakeè‡ªåŠ¨åŒ–ç”Ÿæˆkylin_system_upgradeæ¥å£ä»£ç 
ä¿®æ”¹è½¯ä»¶å®‰è£…åŒæ­¥è°ƒç”¨å’Œçº¿ç¨‹å®‰å…¨é€»è¾‘
ä¿®æ”¹è½¯ä»¶å®‰è£…å®Œæˆä¿¡å·æ•è·åŠŸèƒ½
æ·»åŠ è½¯ä»¶å®‰è£…æ—¶å¼‚å¸¸æ•è·å¤„ç†é€»è¾‘


é—®é¢˜: kylin system update dbusåº”ç”¨å®‰è£…æ¥å£æç¤º "å…¶ä»–ä»»åŠ¡æ­£åœ¨æ›´æ–°å‡çº§ä¸­ï¼Œè¯·ç¨åå†è¯•ã€‚"
è§£å†³æ–¹æ³•: (kylinç³»ç»Ÿbugï¼Œå®‰è£…è¡¥ä¸åŒ…è§£å†³)
2403-upgrade.tar.gz
sudo dpkg -i *.deb



20250109
ç¼–å†™sysfuncæµ‹è¯•ç¨‹åºï¼Œæ­å»ºè‡ªæµ‹ç¯å¢ƒ
æ’æŸ¥è§£å†³ukui-searchå®ˆæŠ¤è¿›ç¨‹dbusæœåŠ¡æ— æ³•è¿æ¥é—®é¢˜
è°ƒæµ‹sysfunc.app.getåŠŸèƒ½æ¥å£
è°ƒæµ‹sysfunc.app.installåŠŸèƒ½æ¥å£ï¼Œå®šä½é˜»å¡"å…¶ä»–ä»»åŠ¡æ­£åœ¨æ›´æ–°å‡çº§ä¸­"é—®é¢˜


(1, 'å…¶ä»–ä»»åŠ¡æ­£åœ¨æ›´æ–°å‡çº§ä¸­ï¼Œè¯·ç¨åå†è¯•ã€‚')



  // std::vector<const gchar*> c_strings(2);
  // c_strings[0] = package_name.c_str();
  // c_strings[1] = NULL; // æ·»åŠ  NULL ç»ˆæ­¢ç¬¦
  // auto in_params_strv = g_variant_new_strv(c_strings.data(), 1);
  // GVariant* in_params = g_variant_new("(as)", in_params_strv);
  // g_variant_unref(in_params_strv);




I20250109 16:43:08.819300  7908 log_stream.cc:21] params: kylin-video, gdb
I20250109 16:43:08.819355  7908 log_stream.cc:21] app manager dbus name: com.kylin.systemupgrade
I20250109 16:43:08.819360  7908 log_stream.cc:21] app manager dbus path: /com/kylin/systemupgrade
I20250109 16:43:08.819363  7908 log_stream.cc:21] app manager dbus interface: com.kylin.systemupgrade.interface

I20250109 16:43:08.822460  7908 log_stream.cc:21] app manager dbus method: InstallPackages
I20250109 16:43:09.262569  7914 log_stream.cc:21] app manager received signal InstallDetectStatus
	params: (false, '#0210')
I20250109 16:43:09.262611  7914 log_stream.cc:21] app manager received signal UpdateInstallFinished
	params: (false, ['k', 'y', 'l', 'i', 'n', '-', 'v', 'i', 'd', 'e', 'o'], ' ', 'Package is not in cache')

I20250109 16:43:10.173252  7908 log_stream.cc:21] app manager call InstallPackages kylin-video return: (0, '')


I20250109 16:43:10.173382  7908 log_stream.cc:21] app manager dbus method: InstallPackages
I20250109 16:43:10.175218  7908 log_stream.cc:21] app manager call InstallPackages gdb return: (1, 'å…¶ä»–ä»»åŠ¡æ­£åœ¨æ›´æ–°å‡çº§ä¸­ï¼Œè¯·ç¨åå†è¯•ã€‚')
I20250109 16:43:10.175284  7908 log_stream.cc:21] callback({"cmd":"sysfunc.app.install","eot":true,"private":"test sysfunc","sessionId":101,"state":{"code":0,"extend":"","info":"success"}})



(process:7908): GLib-GObject-WARNING **: 16:43:08.822: invalid (NULL) pointer instance

(process:7908): GLib-GObject-CRITICAL **: 16:43:08.822: g_signal_emit_by_name: assertion 'G_TYPE_CHECK_INSTANCE (instance)' failed


busctl list 2332

systemctl status session-4.scope


/run/systemd/transient/session-4.scope; transient


I20250109 15:06:03.172401 803487 log_stream.cc:21] params: gdb, browser360-cn-stable
I20250109 15:06:03.172430 803487 log_stream.cc:21] app manager dbus name: com.kylin.systemupgrade
I20250109 15:06:03.172433 803487 log_stream.cc:21] app manager dbus path: /com/kylin/systemupgrade
I20250109 15:06:03.172436 803487 log_stream.cc:21] app manager dbus interface: com.kylin.systemupgrade.interface
I20250109 15:06:03.196077 803487 log_stream.cc:21] app manager dbus method: InstallPackages
I20250109 15:06:03.816720 803491 log_stream.cc:21] app manager received signal InstallDetectStatus from :1.85
I20250109 15:06:03.817231 803491 log_stream.cc:21] app manager received signal UpdateInstallFinished from :1.85
I20250109 15:06:03.817327 803491 log_stream.cc:21] app manager received signal UpdateInstallFinished : <85>^?
I20250109 15:06:04.851660 803487 log_stream.cc:21] InstallPackages gdb return: 0
I20250109 15:06:04.851752 803487 log_stream.cc:21] get_app_by_key():gdb
I20250109 15:06:04.855350 803487 log_stream.cc:21] get_app_by_key():[]
I20250109 15:06:04.855430 803487 log_stream.cc:21] error: [json.exception.type_error.309] cannot use insert() with null
I20250109 15:06:04.855440 803487 log_stream.cc:21] callback({"cmd":"sysfunc.app.install","data":null,"eot":true,"private":"test sysfunc","sessionId":101,"state":{"code":500,"extend":"","info":"[json.exception.type_error.309] cannot use insert() with null"}})
I20250109 15:06:04.855448 803487 log_stream.cc:21] kModuleDestroy pInstance = 0x8b5640
I20250109 15:06:04.855454 803487 log_stream.cc:21] [printer] PrinterScanner::~PrinterScanner



è·å–å‡½æ•°æŒ‡é’ˆ: kModuleDestroy

(process:803487): GLib-GObject-WARNING **: 15:06:03.195: invalid (NULL) pointer instance
(process:803487): GLib-GObject-CRITICAL **: 15:06:03.196: g_signal_emit_by_name: assertion 'G_TYPE_CHECK_INSTANCE (instance)' failed
(process:803487): GLib-CRITICAL **: 15:06:03.817: the GVariant format string '(s)' has a type of '(s)' but the given value has a type of '(basss)'
(process:803487): GLib-CRITICAL **: 15:06:03.817: g_variant_get: assertion 'valid_format_string (format_string, TRUE, value)' failed
(process:803487): GLib-CRITICAL **: 15:06:04.851: the GVariant format string '(i)' has a type of '(i)' but the given value has a type of '(is)'
(process:803487): GLib-CRITICAL **: 15:06:04.851: g_variant_get: assertion 'valid_format_string (format_string, TRUE, value)' failed
App info database currunt connection name: "932862936"




Create signalTransformer Interface Failed Because:  QDBusError("org.freedesktop.DBus.Error.Spawn.FileInvalid", "Cannot do system-bus activation with no user\n")
QSqlQuery::prepare: database not open
QSqlError("", "Driver not loaded", "Driver not loaded") QSqlError("", "Driver not loaded", "Driver not loaded") "" QMap()


export DBUS_SESSION_BUS_ADDRESS=unix:path=/run/dbus/system_bus_socket

busctl status

busctl tree
busctl list

Create signalTransformer Interface Failed Because:  QDBusError("org.freedesktop.DBus.Error.NotSupported", "Using X11 for dbus-daemon autolaunch was disabled at compile time,
set your DBUS_SESSION_BUS_ADDRESS instead")

QSqlQuery::prepare: database not open
QSqlError("", "Driver not loaded", "Driver not loaded") QSqlError("", "Driver not loaded", "Driver not loaded") "" QMap()



20250108
å­¦ä¹ GDBusProxyæ¥å£ä½¿ç”¨æµç¨‹
å¼€å‘kylin dbusè½¯ä»¶åŒ…å®‰è£…åŠŸèƒ½
å¼€å‘kylin dbusè½¯ä»¶å®‰è£…çŠ¶æ€ä¿¡å·æ•è·åŠŸèƒ½
å¼€å‘sysfunc.app.installåŠŸèƒ½æ¥å£


20250107
å®‰è£…æ“ä½œç³»ç»Ÿè¡¥ä¸åŒ…kylin-system-updateråŠå…¶ä¾èµ–åŒ…ï¼Œæ’æŸ¥è§£å†³kylin-backup-serveræ— å®‰è£…æºé—®é¢˜
ç ”ç©¶kylinä»æºå®‰è£…è½¯ä»¶åŒ…çš„dbusæ¥å£åŠgdbusä½¿ç”¨æ–¹æ³•
è°ƒç ”å®‰è£…è½¯ä»¶åŒ…æ—¶InstallPackageså¯¹åº”ä¿¡å·çš„æ•è·åŠä½¿ç”¨æ–¹æ³•
è®¾è®¡åº”ç”¨ç®¡ç†app_manageræ¨¡å—



20250106
é‡æ„è®¾è®¡åŸCHnwsModuleæ¨¡å—
ç ”ç©¶kddbus signalåŠŸèƒ½æ¥å£é›†æˆæ–¹æ³•
å¼€å‘kddbusé›†æˆapp status change signalæ¥å£
å¼€å‘sysfunc.app.getåŠŸèƒ½æ¥å£


add_custom_command(
  OUTPUT ${PROJECT_SOURCE_DIR}/sysfunc/inc/kylin_system_upgrade.h
  OUTPUT ${PROJECT_SOURCE_DIR}/sysfunc/inc/kylin_system_upgrade.c
  COMMAND gdbus-codegen
  ARGS --generate-c-code kylin_system_upgrade
       --c-namespace kdm
       --interface-prefix com.kylin.systemupgrade.
       --output-directory ${PROJECT_SOURCE_DIR}/sysfunc
  ${PROJECT_SOURCE_DIR}/sysfunc/com.kylin.systemupgrade.xml
)


add_custom_command(
	COMMAND gdbus-codegen
	ARGS --generate-c-code kylin_system_upgrade --c-namespace kdm
	--output ${PROJECT_SOURCE_DIR}/sysfunc/inc/kylin_system_upgrade.h
	--output ${PROJECT_SOURCE_DIR}/sysfunc/inc/kylin_system_upgrade.c
	--interface-prefix com.kylin.systemupgrade.
	${PROJECT_SOURCE_DIR}/sysfunc/com.kylin.systemupgrade.xml
)

add_custom_command(
	OUTPUT ${PROJECT_SOURCE_DIR}/sysfunc/inc/kylin_system_upgrade.h
	OUTPUT ${PROJECT_SOURCE_DIR}/sysfunc/inc/kylin_system_upgrade.c
	COMMAND gdbus-codegen
	ARGS --generate-c-code kylin_system_upgrade
	--c-namespace kdm
	--interface-prefix com.kylin.systemupgrade.
	${PROJECT_SOURCE_DIR}/sysfunc/com.kylin.systemupgrade.xml
)

add_custom_command(
  TARGET sysfunc
  PRE_BUILD
  COMMAND gdbus-codegen
  ARGS --c-namespace kdm
       --generate-c-code kylin_system_upgrade
       --interface-prefix com.kylin.systemupgrade.
       --output-directory ${PROJECT_SOURCE_DIR}/sysfunc
  ${PROJECT_SOURCE_DIR}/sysfunc/com.kylin.systemupgrade.xml
  COMMAND mv ARGS ${PROJECT_SOURCE_DIR}/sysfunc/kylin_system_upgrade.h
                  ${PROJECT_SOURCE_DIR}/sysfunc/inc/
  COMMAND mv ARGS ${PROJECT_SOURCE_DIR}/sysfunc/kylin_system_upgrade.c
                  ${PROJECT_SOURCE_DIR}/sysfunc/src/
)

--generate-c-code kylin_system_upgrade

gdbus-codegen --output sysfunc/inc/kylin_system_upgrade.h --output sysfunc/inc/kylin_system_upgrade.c --c-namespace kdm --interface-prefix com.kylin.systemupgrade. sysfunc/com.kylin.systemupgrade.xml

gdbus-codegen --output sysfunc/inc/kylin_system_upgrade.h --output sysfunc/inc/kylin_system_upgrade.c --generate-c-code kylin_system_upgrade --c-namespace kdm --interface-prefix com.kylin.systemupgrade. sysfunc/com.kylin.systemupgrade.xml


gdbus-codegen --output-directory sysfunc --generate-c-code kylin_system_upgrade --c-namespace kdm --interface-prefix com.kylin.systemupgrade. sysfunc/com.kylin.systemupgrade.xml


gdbus-codegen --output-directory kddbus --generate-c-code KdserviceDbus --c-namespace KdserviceDbus --interface-prefix com.knowdee.Service. kddbus/com.knowdee.Service.xml

gdbus-codegen --output-directory kddbus --generate-c-code KdserviceDbus --c-namespace KdserviceDbus --interface-prefix com.knowdee.Service. kddbus/com.knowdee.Service.xml

gdbus-codegen --output kddbus/inc/KdserviceDbus.h --output kddbus/src/KdserviceDbus.c --generate-c-code KdserviceDbus --c-namespace KdserviceDbus --interface-prefix com.knowdee.Service. kddbus/com.knowdee.Service.xml


OUTPUT  "${PROJECT_SOURCE_DIR}/kddbus/inc/KdserviceDbus.h"  "${PROJECT_SOURCE_DIR}/kddbus/src/KdserviceDbus.c"
COMMAND gdbus-codegen
ARGS --generate-c-code KdserviceDbus
--c-namespace KdserviceDbus
--interface-prefix com.knowdee.Service.
${PROJECT_SOURCE_DIR}/kddbus/com.knowdee.Service.xml



20250103
å¼€å‘æ–‡æœ¬å‘é‡åŒ–é¢„å¤„ç†åŠŸèƒ½
å¼€å‘æ–‡æœ¬å‘é‡åŒ–æ¨¡å‹æ¨ç†åŠŸèƒ½
å¼€å‘æ–‡æœ¬å‘é‡åŒ–åå¤„ç†åŠŸèƒ½
kt-lib/intenté›†æˆæ–‡æœ¬å‘é‡åŒ–



20250102
ä¼˜åŒ–åŸæœ‰è§£å¯†æ¨¡å—CAesGcmModule
é‡æ„è®¾è®¡åŸæœ‰intentè§„åˆ™åŒ¹é…
å¼€å‘intentè§„åˆ™åŒ¹é…æ¨¡å—
é‡æ„è®¾è®¡åŸæœ‰intentæ–‡æœ¬å‘é‡åŒ–



20241231
ç ”ç©¶kt-lib/intentæ¨¡å—ç»“æ„ç»„æˆä¸è°ƒç”¨æµç¨‹
æ¢³ç†kt-lib/intentæ¨¡å—å†…çš„ç»„ä»¶æ¨¡å—åˆ’åˆ†
æ¢³ç†kt-lib/intentæ¨¡å—å†…éƒ¨åŠŸèƒ½æ¥å£
é‡æ„è®¾è®¡kt-lib/intentæ¨¡å—å·¥ç¨‹


// 1 æ¨¡å‹å’Œé…ç½®ä¿¡æ¯è§£ç (åŠ è½½è§„åˆ™)
CAesGcmModule* caceGcmModel;

// 2 æ„å›¾è¯†åˆ« IR(intent recognition)

	// 2.1 è§„åˆ™åŒ¹é…æ„å›¾(rule match intent)
	CRuleMatchIntent* ruleMatchIntent;

	// 2.2 æ¨¡å‹åŒ¹é…æ„å›¾(model match intent)
		// 2.2.1 æ–‡æœ¬å‘é‡åŒ–
		CEmbeddingModule* cmodel;
		// 2.2.2 å‘é‡åŒ–åæ£€ç´¢â€”â€”topN
		CHnwsModule* chnwModel;
		// 2.2.3 ç»“æœæ’åºâ€”â€”ç²¾æ’top1
		CSortModel* smodel;

20241231
ç ”ç©¶kt-lib/intentæ¨¡å—ç»“æ„ç»„æˆä¸è°ƒç”¨æµç¨‹
æ¢³ç†kt-lib/intentæ¨¡å—å†…çš„ç»„ä»¶æ¨¡å—åˆ’åˆ†
æ¢³ç†kt-lib/intentæ¨¡å—å†…éƒ¨åŠŸèƒ½æ¥å£
é‡æ„è®¾è®¡kt-lib/intentæ¨¡å—å·¥ç¨‹



20241230
å®šä½è§£å†³graphicsmagickä¸‰æ–¹ä¾èµ–ç¬¦å·æŸ¥æ‰¾å¤±è´¥é—®é¢˜
é‡æ–°ç¼–è¯‘kt-lib/logger arm64ç‰ˆæœ¬åŠ¨æ€åº“
è°ƒè¯•test_kdm_image_embeddingç¼–è¯‘
æµ‹è¯•test_kdm_image_embeddingå›¾åƒå‘é‡åŒ–åŠŸèƒ½



(gdb) set environment LD_LIBRARY_PATH=../lib:$LD_LIBRARY_PATH
(gdb) b main
Breakpoint 1 at 0x39f4
(gdb) b main.cc:79
No symbol table is loaded.  Use the "file" command.
Make breakpoint pending on future shared library load? (y or [n]) y
Breakpoint 2 (main.cc:79) pending.
(gdb) r
Starting program: /data/lit/image/bin/bin/test_kdm_image_embedding
[Thread debugging using libthread_db enabled]
Using host libthread_db library "/lib/aarch64-linux-gnu/libthread_db.so.1".

Program received signal SIGSEGV, Segmentation fault.
0x0000007ff4464774 in _GLOBAL__sub_I_logging.cc () from ../lib/libglog.so.1
(gdb) bt
#0  0x0000007ff4464774 in _GLOBAL__sub_I_logging.cc () from ../lib/libglog.so.1
#1  0x0000007ff7fda8b4 in call_init (l=<optimized out>, argc=argc@entry=1, argv=argv@entry=0x7ffffff0d8, env=env@entry=0x7ffffff0e8) at dl-init.c:72
#2  0x0000007ff7fda9b4 in call_init (env=0x7ffffff0e8, argv=0x7ffffff0d8, argc=1, l=<optimized out>) at dl-init.c:30
#3  _dl_init (main_map=0x7ff7fff210, argc=1, argv=0x7ffffff0d8, env=0x7ffffff0e8) at dl-init.c:119
#4  0x0000007ff7fcd184 in _dl_start_user () from /lib/ld-linux-aarch64.so.1
Backtrace stopped: previous frame identical to this frame (corrupt stack?)
(gdb)



20241227
ç¼–è¯‘å®‰è£…kt-lib/logger arm64ç‰ˆæœ¬
ç¼–è¯‘å®‰è£…graphicsmagickåŠå…¶ä¾èµ– arm64ç‰ˆæœ¬é™æ€åº“
è°ƒè¯•test_kdm_image_embeddingç¼–è¯‘æŠ¥é”™é—®é¢˜
è°ƒè¯•graphicsmagickä¸‰æ–¹ä¾èµ–ç¬¦å·æŸ¥æ‰¾å¤±è´¥é—®é¢˜



ubuntu20.04 cross platform compile arm64 bin and lib:
apt install gcc-aarch64-linux-gnu
apt install g++-aarch64-linux-gnu
vcpkg install graphicsmagick:arm64-linux

[100%] Linking CXX executable test_kdm_image_embedding
/usr/bin/ld: ../src/libkdm_image_embedding.so: undefined reference to `deflateInit_'
/usr/bin/ld: ../src/libkdm_image_embedding.so: undefined reference to `gzerror'
/usr/bin/ld: ../src/libkdm_image_embedding.so: undefined reference to `lzma_stream_decoder'
/usr/bin/ld: ../src/libkdm_image_embedding.so: undefined reference to `BZ2_bzDecompress'
/usr/bin/ld: ../src/libkdm_image_embedding.so: undefined reference to `BZ2_bzread'
/usr/bin/ld: ../src/libkdm_image_embedding.so: undefined reference to `deflateInit2_'
/usr/bin/ld: ../src/libkdm_image_embedding.so: undefined reference to `BZ2_bzCompressInit'
/usr/bin/ld: ../src/libkdm_image_embedding.so: undefined reference to `BZ2_bzwrite'
/usr/bin/ld: ../src/libkdm_image_embedding.so: undefined reference to `BZ2_bzCompressEnd'
/usr/bin/ld: ../src/libkdm_image_embedding.so: undefined reference to `zlibVersion'
/usr/bin/ld: ../src/libkdm_image_embedding.so: undefined reference to `BZ2_bzerror'
/usr/bin/ld: ../src/libkdm_image_embedding.so: undefined reference to `gzseek'
/usr/bin/ld: ../src/libkdm_image_embedding.so: undefined reference to `FT_Load_Glyph'
/usr/bin/ld: ../src/libkdm_image_embedding.so: undefined reference to `gzeof'
/usr/bin/ld: ../src/libkdm_image_embedding.so: undefined reference to `FT_Get_Kerning'
/usr/bin/ld: ../src/libkdm_image_embedding.so: undefined reference to `BZ2_bzopen'
/usr/bin/ld: ../src/libkdm_image_embedding.so: undefined reference to `deflate'
/usr/bin/ld: ../src/libkdm_image_embedding.so: undefined reference to `gzflush'
/usr/bin/ld: ../src/libkdm_image_embedding.so: undefined reference to `FT_Outline_Get_BBox'
/usr/bin/ld: ../src/libkdm_image_embedding.so: undefined reference to `deflateEnd'
/usr/bin/ld: ../src/libkdm_image_embedding.so: undefined reference to `FT_Get_Glyph'
/usr/bin/ld: ../src/libkdm_image_embedding.so: undefined reference to `gztell'
/usr/bin/ld: ../src/libkdm_image_embedding.so: undefined reference to `lzma_memusage'
/usr/bin/ld: ../src/libkdm_image_embedding.so: undefined reference to `FT_Init_FreeType'
/usr/bin/ld: ../src/libkdm_image_embedding.so: undefined reference to `crc32'
/usr/bin/ld: ../src/libkdm_image_embedding.so: undefined reference to `FT_Glyph_Transform'
/usr/bin/ld: ../src/libkdm_image_embedding.so: undefined reference to `FT_Get_Char_Index'
/usr/bin/ld: ../src/libkdm_image_embedding.so: undefined reference to `inflate'
/usr/bin/ld: ../src/libkdm_image_embedding.so: undefined reference to `SharpYuvConvert'
/usr/bin/ld: ../src/libkdm_image_embedding.so: undefined reference to `lzma_lzma_preset'
/usr/bin/ld: ../src/libkdm_image_embedding.so: undefined reference to `inflateInit2_'
/usr/bin/ld: ../src/libkdm_image_embedding.so: undefined reference to `inflateInit_'
/usr/bin/ld: ../src/libkdm_image_embedding.so: undefined reference to `BZ2_bzDecompressEnd'
/usr/bin/ld: ../src/libkdm_image_embedding.so: undefined reference to `BZ2_bzDecompressInit'
/usr/bin/ld: ../src/libkdm_image_embedding.so: undefined reference to `SharpYuvInit'
/usr/bin/ld: ../src/libkdm_image_embedding.so: undefined reference to `inflateEnd'
/usr/bin/ld: ../src/libkdm_image_embedding.so: undefined reference to `FT_Outline_Decompose'
/usr/bin/ld: ../src/libkdm_image_embedding.so: undefined reference to `BZ2_bzCompress'
/usr/bin/ld: ../src/libkdm_image_embedding.so: undefined reference to `FT_Glyph_To_Bitmap'
/usr/bin/ld: ../src/libkdm_image_embedding.so: undefined reference to `FT_Set_Charmap'
/usr/bin/ld: ../src/libkdm_image_embedding.so: undefined reference to `inflateReset2'
/usr/bin/ld: ../src/libkdm_image_embedding.so: undefined reference to `inflateReset'
/usr/bin/ld: ../src/libkdm_image_embedding.so: undefined reference to `FT_Vector_Transform'
/usr/bin/ld: ../src/libkdm_image_embedding.so: undefined reference to `deflateReset'
/usr/bin/ld: ../src/libkdm_image_embedding.so: undefined reference to `gzwrite'
/usr/bin/ld: ../src/libkdm_image_embedding.so: undefined reference to `gzopen'
/usr/bin/ld: ../src/libkdm_image_embedding.so: undefined reference to `FT_Select_Charmap'
/usr/bin/ld: ../src/libkdm_image_embedding.so: undefined reference to `lzma_code'
/usr/bin/ld: ../src/libkdm_image_embedding.so: undefined reference to `FT_Done_FreeType'
/usr/bin/ld: ../src/libkdm_image_embedding.so: undefined reference to `FT_Done_Glyph'
/usr/bin/ld: ../src/libkdm_image_embedding.so: undefined reference to `BZ2_bzflush'
/usr/bin/ld: ../src/libkdm_image_embedding.so: undefined reference to `FT_Set_Char_Size'
/usr/bin/ld: ../src/libkdm_image_embedding.so: undefined reference to `gzclose'
/usr/bin/ld: ../src/libkdm_image_embedding.so: undefined reference to `SharpYuvGetConversionMatrix'
/usr/bin/ld: ../src/libkdm_image_embedding.so: undefined reference to `gzgets'
/usr/bin/ld: ../src/libkdm_image_embedding.so: undefined reference to `FT_New_Face'
/usr/bin/ld: ../src/libkdm_image_embedding.so: undefined reference to `BZ2_bzclose'
/usr/bin/ld: ../src/libkdm_image_embedding.so: undefined reference to `gzread'
/usr/bin/ld: ../src/libkdm_image_embedding.so: undefined reference to `FT_Done_Face'
/usr/bin/ld: ../src/libkdm_image_embedding.so: undefined reference to `adler32'
/usr/bin/ld: ../src/libkdm_image_embedding.so: undefined reference to `lzma_end'
/usr/bin/ld: ../src/libkdm_image_embedding.so: undefined reference to `inflateValidate'
/usr/bin/ld: ../src/libkdm_image_embedding.so: undefined reference to `deflateParams'
/usr/bin/ld: ../src/libkdm_image_embedding.so: undefined reference to `lzma_stream_encoder'
collect2: error: ld returned 1 exit status

gdb -tui ./exe
(gdb) tui enable

ä¸€æ—¦è¿›å…¥äº† GDBï¼Œä½ å¯ä»¥ä½¿ç”¨ layout å‘½ä»¤æ¥åˆ‡æ¢åˆ°ä¸åŒçš„å¸ƒå±€ï¼Œä»è€Œå¼€å¯ TUI æ¨¡å¼ã€‚ä»¥ä¸‹æ˜¯å‡ ä¸ªå¸¸ç”¨çš„ layout å­å‘½ä»¤ï¼š
layout srcï¼šæ˜¾ç¤ºæºä»£ç çª—å£ã€‚
layout asmï¼šæ˜¾ç¤ºæ±‡ç¼–ä»£ç çª—å£ã€‚
layout splitï¼šåŒæ—¶æ˜¾ç¤ºæºä»£ç å’Œæ±‡ç¼–ä»£ç çª—å£ã€‚
layout regï¼šæ˜¾ç¤ºå¯„å­˜å™¨çª—å£ã€‚


20241226
å¼€å‘kt-lib/nerä¸­matchæ¨¡å‹åå¤„ç†æ”¯æŒbatchæ¨¡å¼
è°ƒæµ‹kt-lib/nerä¸­matchæ¨¡å‹åå¤„ç†æ”¯æŒbatchæ¨¡å¼
å®šä½è§£å†³kt-lib/nerä¸­matchæ¨¡å‹åå¤„ç†è§£æbatchè¾“å‡ºå¼‚å¸¸é—®é¢˜
è°ƒæµ‹kt-lib/nerä¸­matchæ¨¡å‹æ•´ä½“åŠŸèƒ½


20241225
ä¿®æ”¹kdm asr-proxyä»¥submoduleæ–¹å¼é›†æˆåˆ°kds kd-asr-proxyä¸­
å®šä½è§£å†³kd-asr-proxyæœåŠ¡libhvè§£æè¯·æ±‚æ¶ˆæ¯å¼‚å¸¸coredumpé—®é¢˜
æ„å»ºkd-asr-proxy debug6.0ç‰ˆæœ¬é•œåƒï¼ŒåŒé«˜å®‡è”è°ƒæµ‹è¯•è¯­éŸ³è¯†åˆ«ç»“æœä¸ºç©ºæƒ…å†µ
è°ƒæµ‹kt-lib/nerä¸­matchæ¨¡å‹é¢„å¤„ç†æ”¯æŒbatchæ¨¡å¼




git submodule add git@gitlab.knowdee.com:kdm/cpp/knowdee/asr-proxy.git third_party/asr-proxy
git add .gitmodules third_party/asr-proxy
git commit -m "add kdm asr-proxy as thirdparty with submodule"


20241224
é›†æˆå¼€å‘libhvç½‘ç»œåº“ï¼Œæ›¿æ¢kd-asr-proxyæœåŠ¡ä¸­mongoose
è°ƒæµ‹kd-asr-proxyä¸­libhvç½‘ç»œåº“httpæœåŠ¡åŠŸèƒ½
è°ƒæµ‹kt-lib/nerä¸­matchæ¨¡å‹æ¨ç†æ”¯æŒbatchæ¨¡å¼æ—¶coredumpé—®é¢˜
å¼€å‘kt-lib/nerä¸­matchæ¨¡å‹é¢„å¤„ç†æ”¯æŒbatchæ¨¡å¼



vcpkg install libhv

libhv provides CMake targets:

  # this is heuristically generated, and may not be correct
  find_package(libhv CONFIG REQUIRED)
  target_link_libraries(main PRIVATE hv_static)

20241223
ä¼˜åŒ–ä¿®æ”¹kt-lib/nerä¸­uieæ¨¡å‹ç»“æœè¾“å‡ºæ¥å£
å¼€å‘kt-lib/neré¢„ç½®æ„å›¾ä¸å›ºå®šæ§½ä½æ˜ å°„ä¿¡æ¯Jsonè§£æåŠŸèƒ½
å¼€å‘kt-lib/nerä¸­matchæ¨¡å‹æ¨ç†æ”¯æŒbatchæ¨¡å¼
ä¸‹è½½å®‰è£…ä¸‰æ–¹ä¾èµ–libhvç½‘ç»œåº“



20241221
å®šä½åˆ†æå±±è¥¿çƒ­åŠ›çº¿ä¸Škd-asr-proxyæœåŠ¡è¿è¡Œ24å°æ—¶åhttpç½‘ç»œè¿æ¥ä¸ä¸Šé—®é¢˜
è°ƒç ”ä¸‰æ–¹ä¾èµ–httplibåº•å±‚ç½‘ç»œIOå¤šè·¯å¤ç”¨æœºåˆ¶(select/poll)ï¼Œé€‚åˆè¿½æ±‚ç®€å•æ€§å’Œå¿«é€Ÿå¼€å‘çš„å°å‹é¡¹ç›®
è°ƒç ”ä¸‰æ–¹ä¾èµ–uWebSocketåº•å±‚ç½‘ç»œIOå¤šè·¯å¤ç”¨æœºåˆ¶(libuv:epoll/kqueue/IOCP)ï¼Œç‰¹åˆ«é€‚åˆå¯¹å®æ—¶é€šä¿¡æœ‰è¦æ±‚çš„åº”ç”¨(æ¸¸æˆæœåŠ¡å™¨æˆ–èŠå¤©åº”ç”¨)
è°ƒç ”ä¸‰æ–¹ä¾èµ–libhvåº•å±‚ç½‘ç»œIOå¤šè·¯å¤ç”¨æœºåˆ¶(epoll/kqueue)ï¼Œé’ˆå¯¹éœ€è¦é«˜æ€§èƒ½å’Œå¤šåè®®æ”¯æŒçš„å¤§è§„æ¨¡åº”ç”¨
ä¸‹è½½å®‰è£…ä¸‰æ–¹ä¾èµ–libhvç½‘ç»œåº“



#é—®é¢˜è¡¨ç°ï¼š kd-asr-proxyæœåŠ¡è¿è¡Œ24å°æ—¶åhttpç½‘ç»œè¿æ¥ä¸ä¸Šé—®é¢˜
æ’æŸ¥ç½‘ç»œåº“mongooseæ¥æ”¶http deleteè¯·æ±‚æ—¶ï¼ŒæŠ¥é”™:"connection reset by peer"
mongooseæ‰€ç”¨IOå¤šè·¯å¤ç”¨selectè°ƒç”¨: 1036(fd) > 1024(FD_SETSIZE)

é—®é¢˜åˆ†æï¼šcti deleteè¯·æ±‚å°‘å‘é€ --> kd-asr-proxyæœåŠ¡udp portå ç”¨é€æ¸å¢åŠ  --> å½“å‰asr_serviceè¿›ç¨‹å ç”¨fdé€æ¸å¢åŠ  1036(fd) > 1024(FD_SETSIZE)


2024-12-19 01:45:00    mongoose.cpp:1261:http_cb kds---->5  0 0
2024-12-19 01:45:00    mongoose.cpp:3141:mg_mgr_ 1 -- tchrc
2024-12-19 01:45:00    mongoose.cpp:3102:mg_iote kds---->select active(r/w) connect num = 2
2024-12-19 01:45:00    mongoose.cpp:3136:mg_mgr_ kds---->poll current time = 1734572700154
2024-12-19 01:45:00    mongoose.cpp:3141:mg_mgr_ 174 -w tchrc
2024-12-19 01:45:00    mongoose.cpp:2737:ll_writ 174 tuc 39/39 0
2024-12-19 01:45:00    mongoose.cpp:3141:mg_mgr_ 1 r- tchrc
2024-12-19 01:45:00  E mongoose.cpp:2966:accept_ 1036 > 1024
2024-12-19 01:46:57  E mongoose.cpp:2966:accept_ 1060 > 1024
2024-12-19 01:46:57  E mongoose.cpp:2966:accept_ 1060 > 1024
2024-12-19 01:47:08  E mongoose.cpp:2966:accept_ 1035 > 1024
2024-12-19 01:47:08  E mongoose.cpp:2966:accept_ 1035 > 1024
2024-12-19 01:47:40  E mongoose.cpp:2966:accept_ 1035 > 1024
2024-12-19 01:47:40  E mongoose.cpp:2966:accept_ 1035 > 1024
2024-12-19 01:47:43  E mongoose.cpp:2966:accept_ 1039 > 1024
2024-12-19 01:47:43  E mongoose.cpp:2966:accept_ 1039 > 1024
2024-12-19 01:54:35  E mongoose.cpp:2966:accept_ 1037 > 1024
2024-12-19 01:54:35  E mongoose.cpp:2966:accept_ 1037 > 1024
2024-12-19 01:55:09  E mongoose.cpp:2966:accept_ 1045 > 1024
2024-12-19 01:56:35  E mongoose.cpp:2966:accept_ 1038 > 1024





20241220
ç ”ç©¶kdm-asr-proxyè®¯é£è¯­éŸ³è¯†åˆ«ç»“æœå›ä¼ é€»è¾‘
å®šä½åˆ†ækd-asr-proxyæœåŠ¡é•œåƒ5.0ç‰ˆæœ¬å­˜åœ¨è¯­éŸ³è¯†åˆ«ç»“æœä¸ºç©ºçš„é—®é¢˜
ä¿®æ”¹ä¼˜åŒ–kdm-asr-proxyè®¯é£è¯­éŸ³è¯†åˆ«ç»“æœå›ä¼ é€»è¾‘
è°ƒæµ‹kdm-asr-proxyç¼–è¯‘å’Œè¿è¡ŒæŠ¥é”™ç­‰é—®é¢˜

åŠ å¯†
é‰´æƒ
é™æµ
å‰Šå³°å¡«è°·
å¼‚åœ°å¤šæ´»
å¼‚åœ°ç¾å¤‡
HA
CA/CK

ç±»ä¼¼è”æƒ³å¼€å¤© AIPC ç­‰ç«¯è®¾å¤‡ä¸Šé€šå¸¸å¯ç”¨ç¡¬ä»¶èµ„æºæ¯”è¾ƒç´§å¼ ï¼Œå°¤å…¶å½“å¤šä¸ª AI æ¨¡å‹éƒ¨ç½²åŒæ—¶è¿è¡Œï¼Œå ç”¨èµ„æºè¾ƒé«˜ï¼Œå¦‚ä½•åœ¨æœ‰é™çš„æ¡ä»¶ä¸‹ï¼Œå®ç°ç«¯è®¾å¤‡äº¤äº’æ™ºèƒ½åŒ–ï¼Œå­˜åœ¨æå¤§æŒ‘æˆ˜ã€‚

å·²å®Œæˆåˆæ­¥æ”¹é€ å’Œæ²‰æ·€çš„è¯­éŸ³ç›¸å…³KDM/KDSï¼Œåœ¨æ¶æ„è®¾è®¡å’Œä»£ç è´¨é‡ç­‰æ–¹é¢ä»å­˜åœ¨å†å²æ€§çš„è´Ÿå€ºï¼Œè¿˜éœ€æ·±å…¥ä¼˜åŒ–ä¸è®¾è®¡ã€‚


20241219
å®šä½æ’æŸ¥uieæ¨¡å‹é¢„å¤„ç†æ—¶coredumpé—®é¢˜
å¼€å‘uieæ¨¡å‹åå¤„ç†æ”¯æŒbatchæ¨¡å¼
è°ƒæµ‹uieæ¨¡å‹åå¤„ç†æ”¯æŒbatchæ¨¡å¼
è°ƒæµ‹uieæ¨¡å‹æ¨ç†æ•´ä½“åŠŸèƒ½


20241218
å±±è¥¿çƒ­åŠ›çº¿ä¸Šæµ‹è¯•kd-asr-proxyé•œåƒ5.0ç‰ˆæœ¬ï¼Œå®šä½è¯­éŸ³è¯†åˆ«ç»“æœå­˜åœ¨ä¸ºç©ºã€è®¯é£ç½‘ç»œè¿æ¥10ç§’é€¾æœŸå…³é—­ã€udpç«¯å£å·æœªé‡Šæ”¾é—®é¢˜(ctiå°‘å‘ä¸€æ¬¡deleteè¯·æ±‚é€ æˆ)
å¼€å‘uieæ¨¡å‹é¢„å¤„ç†æ”¯æŒbatchæ¨¡å¼
è°ƒæµ‹uieæ¨¡å‹é¢„å¤„ç†æ”¯æŒbatchæ¨¡å¼
æ’æŸ¥uieæ¨¡å‹é¢„å¤„ç†æ—¶coredumpé—®é¢˜


20241217
ä¿®æ”¹kd-asr-proxyä¸‰æ–¹ä¾èµ–çš„boost, aws, kdm_asr_proxyï¼Œè§£å†³è°ƒç”¨asrå¼•æ“å‚å•†å‡ºé”™é—®é¢˜
æ„å»ºæ‰“åŒ…kd-asr-proxy debugç‰ˆæœ¬é•œåƒ5.0ç‰ˆæœ¬
è”è°ƒkd-asr-proxy debugç‰ˆæœ¬é•œåƒ4.0ç‰ˆæœ¬å’Œ5.0ç‰ˆæœ¬
æ›´æ–°ä¿®æ”¹kdm_asr_proxyä¸‰æ–¹ä¾èµ–çš„boost, aws


20241216
å¼€å‘uieæ¨¡å‹onnxæ¨ç†æ”¯æŒbatchæ¨¡å¼
é…åˆé«˜å®‡æµ‹è¯•kd-asr-proxyæœåŠ¡
æ’æŸ¥kd-asr-proxyåˆ›å»ºä¼šè¯æ—¶è°ƒç”¨asrå¼•æ“å‚å•†å‡ºé”™é—®é¢˜
æ„å»ºæ‰“åŒ…kd-asr-proxy debugç‰ˆæœ¬é•œåƒ4.0


LOG_DEBUG("ASR OPTIONS: AsrRenderId {} {}", asropt->_iAsrRenderId, asropt->_iAsrRenderGiven);



kds: kd-asr-proxy
OnSessionCreate()


kdm: asr-proxy
2 : RECO_ASR_LENOVO_HTTP
3 : RECO_ASR_IFLYTEK


2. asr result is empty:


20000001

å®¶é‡Œæµ‹è¯•ç¯å¢ƒ172.70.10.210:
20000002
2602

msgFactory.h
speech::msgFactory::processMsg
speech::msgFactory::processIflyMsg
speech::msgFactory::createMsg
printf("CreateMsg Index = %d, point = %p\n", iIndex, _pMsg);


kd-asr-proxy.log:
"msg":"recieve result sid , file /var/asr_record/f9ab4b4b-e44d-420a-94da-3909070a481a_0015.wav, result , index 15, pos 0, beginTime 46900, endTime 50080"



1. http connect timeout:
mg_iotestï¼ˆselectï¼‰

mg_mgr_poll
accept_conn


LOG(LL_INFO,
  ("kds---->%d %d\n%.*s", ev, hm.message.len, (int) c->recv.len, c->recv.buf));


LOG(LL_DEBUG, ("%lu accepted %s", c->id, buf));


LOG(LL_INFO, ("%lu accepting on %s", c->id, url));

2024-12-12 03:29:16  I mongoose.cpp:3056:mg_list 1 accepting on 172.70.10.210:10208



URL="http://172.70.10.210:30208/asr/session"
CONCURRENT=1000 # å¹¶å‘è¯·æ±‚æ•°
TOTAL_REQUESTS=10000  # æ€»è¯·æ±‚æ•°


# ä½¿ç”¨ xargs å‘èµ·å¹¶å‘è¯·æ±‚
seq $TOTAL_REQUESTS | xargs -n 1 -P $CONCURRENT -I {} curl -s -o /dev/null -w "time_total: %{time_total}s\n" $URL

curl -s -o /dev/null -w "time_total: %{time_total}s\n" http://172.70.10.210:30208/asr/session

curl -s -o /dev/null -w "time_total: %{time_total}s\n" http://172.70.10.210:30208/asr/session


curl --request POST -s -o /dev/null -w "time_total: %{time_total}s\n" \
Â  --header 'Content-Type: application/json' \
Â  --header 'User-Agent: PostmanRuntime-ApipostRuntime/1.1.0' \
Â  --data '{
Â  Â  "sessionID": "f0459ab4-4f04-4982-b7db-f810fee12f0c_50032"
}' \
  http://172.70.10.210:30208/asr/session


curl --request POST -s -w "time_total: %{time_total}s\n" --header 'Content-Type: application/json'  --data '{"sessionID": "f0459ab4-4f04-4982-b7db-f810fee12f0c_50032"}' http://172.70.10.210:30208/asr/session


curl --request DELETE \
Â  --url http://172.30.207.30:30208/asr/session \
Â  --header 'Accept: */*' \
Â  --header 'Accept-Encoding: gzip, deflate, br' \
Â  --header 'Connection: keep-alive' \
Â  --header 'Content-Type: application/json' \
Â  --header 'User-Agent: PostmanRuntime-ApipostRuntime/1.1.0' \
Â  --data '{
Â  Â  "sessionID": "f0459ab4-4f04-4982-b7db-f810fee12f0c_50032"
}'

curl http://172.30.207.30:30208/asr/session
Â 

curl --request DELETE --url http://172.30.207.30:30208/asr/session --header 'Accept: */*' --header 'Accept-Encoding: gzip, deflate, br' --header 'Connection: keep-alive' --header 'Content-Type: application/json' --header 'User-Agent: PostmanRuntime-ApipostRuntime/1.1.0'  --data '{"sessionID": "f0459ab4-4f04-4982-b7db-f810fee12f0c_50032"}'



æœç´¢ "SESSION_DESTORY" ï¼ˆ1ä¸ªæ–‡ä»¶ä¸­åŒ¹é…åˆ°8æ¬¡ï¼Œæ€»è®¡æŸ¥æ‰¾1æ¬¡ï¼‰ [æ™®é€š: å¤§å°å†™]
  D:\work\knowdee\projects\ivr\asr\log\knodi_asr_proxy_event.log ï¼ˆåŒ¹é…8æ¬¡ï¼‰
#	è¡Œ  58: {"project":"hoicee","module":"knodi_asr_proxy","timestamp":"2024-12-06T10:47:54.914","level":"info","host":"localhost.localdomain","hostIp":"127.0.0.1","event":{"appId":"servicePool_test_appId","sessionId":"5a9afca4-0e6a-4928-8aaf-19c03eae4029_50006"},"eventId":"fb25b82f-5b33-4887-b11e-dac144142d85","eventName":"SESSION_DESTORY"}
#	è¡Œ  86: {"project":"hoicee","module":"knodi_asr_proxy","timestamp":"2024-12-06T10:48:19.023","level":"info","host":"localhost.localdomain","hostIp":"127.0.0.1","event":{"appId":"servicePool_test_appId","sessionId":"4a9112ca-243c-4edb-92de-ed76550b2c4a_50014"},"eventId":"daa86914-b903-4f11-a04c-53d1e95f4d65","eventName":"SESSION_DESTORY"}
#	è¡Œ 133: {"project":"hoicee","module":"knodi_asr_proxy","timestamp":"2024-12-06T10:49:17.018","level":"info","host":"localhost.localdomain","hostIp":"127.0.0.1","event":{"appId":"servicePool_test_appId","sessionId":"6fb16b6a-0c96-48b3-b5b1-9accd1f25ad2_50010"},"eventId":"847aedb6-23c1-486d-ae78-6a8ad0705b42","eventName":"SESSION_DESTORY"}
#	è¡Œ 134: {"project":"hoicee","module":"knodi_asr_proxy","timestamp":"2024-12-06T10:49:18.185","level":"info","host":"localhost.localdomain","hostIp":"127.0.0.1","event":{"appId":"servicePool_test_appId","sessionId":"cad62022-6090-4be1-ac86-94e88fa49942_50002"},"eventId":"94ffe0e0-c252-41fe-bdc3-92618e07c172","eventName":"SESSION_DESTORY"}
#	è¡Œ 196: {"project":"hoicee","module":"knodi_asr_proxy","timestamp":"2024-12-06T10:51:05.061","level":"info","host":"localhost.localdomain","hostIp":"127.0.0.1","event":{"appId":"servicePool_test_appId","sessionId":"40a6e984-fa2d-4148-8e85-415b1dd418cb_50022"},"eventId":"82c9b2d2-d802-4fd0-8ee1-dd6700413be7","eventName":"SESSION_DESTORY"}
#	è¡Œ 209: {"project":"hoicee","module":"knodi_asr_proxy","timestamp":"2024-12-06T10:51:28.420","level":"info","host":"localhost.localdomain","hostIp":"127.0.0.1","event":{"appId":"servicePool_test_appId","sessionId":"d5fc7750-184a-407c-8b0e-a7777e1da9f0_50018"},"eventId":"1e246715-4d04-47ec-9c39-c455d06292f9","eventName":"SESSION_DESTORY"}
#	è¡Œ 252: {"project":"hoicee","module":"knodi_asr_proxy","timestamp":"2024-12-06T10:53:18.955","level":"info","host":"localhost.localdomain","hostIp":"127.0.0.1","event":{"appId":"servicePool_test_appId","sessionId":"f0459ab4-4f04-4982-b7db-f810fee12f0c_50030"},"eventId":"333c7952-5599-4ca8-a2ec-671969d2070c","eventName":"SESSION_DESTORY"}
#	è¡Œ 312: {"project":"hoicee","module":"knodi_asr_proxy","timestamp":"2024-12-06T10:55:15.921","level":"info","host":"localhost.localdomain","hostIp":"127.0.0.1","event":{"appId":"servicePool_test_appId","sessionId":"f0d105d4-2998-48ef-90ee-f65c1cbcff52_50028"},"eventId":"9df21e2d-0711-4654-9137-e810a1bdf72a","eventName":"SESSION_DESTORY"}

æœç´¢ "SESSION_CREATE" ï¼ˆ1ä¸ªæ–‡ä»¶ä¸­åŒ¹é…åˆ°18æ¬¡ï¼Œæ€»è®¡æŸ¥æ‰¾1æ¬¡ï¼‰ [æ™®é€š: å¤§å°å†™]
  D:\work\knowdee\projects\ivr\asr\log\knodi_asr_proxy_event.log ï¼ˆåŒ¹é…18æ¬¡ï¼‰
	#è¡Œ   1: {"project":"hoicee","module":"knodi_asr_proxy","timestamp":"2024-12-06T10:45:12.867","level":"info","host":"localhost.localdomain","hostIp":"127.0.0.1","event":{"appId":"servicePool_test_appId","asrOptions":{"engine":"Xunfei"},"callId":"cad62022-6090-4be1-ac86-94e88fa49942","channelId":"cad62022-6090-4be1-ac86-94e88fa49942","channelType":"user","port":50002,"sessionId":"cad62022-6090-4be1-ac86-94e88fa49942_50002"},"eventId":"cc8545d7-91cc-452f-96ed-a1b233c8cb08","eventName":"SESSION_CREATE"}
	è¡Œ   2: {"project":"hoicee","module":"knodi_asr_proxy","timestamp":"2024-12-06T10:45:12.868","level":"info","host":"localhost.localdomain","hostIp":"127.0.0.1","event":{"appId":"servicePool_test_appId","asrOptions":{"engine":"Xunfei"},"callId":"cad62022-6090-4be1-ac86-94e88fa49942","channelId":"05bf807e-9628-4d32-86af-695380c98ead","channelType":"agent","port":50004,"sessionId":"cad62022-6090-4be1-ac86-94e88fa49942_50004"},"eventId":"45452581-8fee-4b87-b921-450095c196b4","eventName":"SESSION_CREATE"}
	#è¡Œ  42: {"project":"hoicee","module":"knodi_asr_proxy","timestamp":"2024-12-06T10:47:15.598","level":"info","host":"localhost.localdomain","hostIp":"127.0.0.1","event":{"appId":"servicePool_test_appId","asrOptions":{"engine":"Xunfei"},"callId":"5a9afca4-0e6a-4928-8aaf-19c03eae4029","channelId":"5a9afca4-0e6a-4928-8aaf-19c03eae4029","channelType":"user","port":50006,"sessionId":"5a9afca4-0e6a-4928-8aaf-19c03eae4029_50006"},"eventId":"829e9a01-8e51-4c8c-bfa5-9bc82329b643","eventName":"SESSION_CREATE"}
	è¡Œ  43: {"project":"hoicee","module":"knodi_asr_proxy","timestamp":"2024-12-06T10:47:15.599","level":"info","host":"localhost.localdomain","hostIp":"127.0.0.1","event":{"appId":"servicePool_test_appId","asrOptions":{"engine":"Xunfei"},"callId":"5a9afca4-0e6a-4928-8aaf-19c03eae4029","channelId":"6c1a4b41-2fa9-4166-b2bc-cfb9da2c6585","channelType":"agent","port":50008,"sessionId":"5a9afca4-0e6a-4928-8aaf-19c03eae4029_50008"},"eventId":"d2d46c14-f83c-46f4-be74-f16ed335aea4","eventName":"SESSION_CREATE"}
	#è¡Œ  49: {"project":"hoicee","module":"knodi_asr_proxy","timestamp":"2024-12-06T10:47:37.276","level":"info","host":"localhost.localdomain","hostIp":"127.0.0.1","event":{"appId":"servicePool_test_appId","asrOptions":{"engine":"Xunfei"},"callId":"6fb16b6a-0c96-48b3-b5b1-9accd1f25ad2","channelId":"6fb16b6a-0c96-48b3-b5b1-9accd1f25ad2","channelType":"user","port":50010,"sessionId":"6fb16b6a-0c96-48b3-b5b1-9accd1f25ad2_50010"},"eventId":"2103778d-87c6-4c31-a124-96e88bf5ee21","eventName":"SESSION_CREATE"}
	è¡Œ  50: {"project":"hoicee","module":"knodi_asr_proxy","timestamp":"2024-12-06T10:47:37.277","level":"info","host":"localhost.localdomain","hostIp":"127.0.0.1","event":{"appId":"servicePool_test_appId","asrOptions":{"engine":"Xunfei"},"callId":"6fb16b6a-0c96-48b3-b5b1-9accd1f25ad2","channelId":"30d9504f-f793-41ad-8fe4-031daef1fa5f","channelType":"agent","port":50012,"sessionId":"6fb16b6a-0c96-48b3-b5b1-9accd1f25ad2_50012"},"eventId":"48d1228c-fb29-4618-98d4-7b1700d52da2","eventName":"SESSION_CREATE"}
	#è¡Œ  59: {"project":"hoicee","module":"knodi_asr_proxy","timestamp":"2024-12-06T10:47:54.914","level":"info","host":"localhost.localdomain","hostIp":"127.0.0.1","event":{"appId":"servicePool_test_appId","asrOptions":{"engine":"Xunfei"},"callId":"4a9112ca-243c-4edb-92de-ed76550b2c4a","channelId":"4a9112ca-243c-4edb-92de-ed76550b2c4a","channelType":"user","port":50014,"sessionId":"4a9112ca-243c-4edb-92de-ed76550b2c4a_50014"},"eventId":"f856990f-fde2-4f35-88e0-f4feb2f62ad2","eventName":"SESSION_CREATE"}
	è¡Œ  60: {"project":"hoicee","module":"knodi_asr_proxy","timestamp":"2024-12-06T10:47:54.915","level":"info","host":"localhost.localdomain","hostIp":"127.0.0.1","event":{"appId":"servicePool_test_appId","asrOptions":{"engine":"Xunfei"},"callId":"4a9112ca-243c-4edb-92de-ed76550b2c4a","channelId":"149d5a81-9a0a-4d8e-859a-52f6c77f3a06","channelType":"agent","port":50016,"sessionId":"4a9112ca-243c-4edb-92de-ed76550b2c4a_50016"},"eventId":"a445aef6-c7af-440d-8ed6-ab776e2c7520","eventName":"SESSION_CREATE"}
	#è¡Œ 135: {"project":"hoicee","module":"knodi_asr_proxy","timestamp":"2024-12-06T10:49:32.933","level":"info","host":"localhost.localdomain","hostIp":"127.0.0.1","event":{"appId":"servicePool_test_appId","asrOptions":{"engine":"Xunfei"},"callId":"d5fc7750-184a-407c-8b0e-a7777e1da9f0","channelId":"d5fc7750-184a-407c-8b0e-a7777e1da9f0","channelType":"user","port":50018,"sessionId":"d5fc7750-184a-407c-8b0e-a7777e1da9f0_50018"},"eventId":"0f8d64e4-4b74-44a5-ae6a-038bca817083","eventName":"SESSION_CREATE"}
	è¡Œ 136: {"project":"hoicee","module":"knodi_asr_proxy","timestamp":"2024-12-06T10:49:32.934","level":"info","host":"localhost.localdomain","hostIp":"127.0.0.1","event":{"appId":"servicePool_test_appId","asrOptions":{"engine":"Xunfei"},"callId":"d5fc7750-184a-407c-8b0e-a7777e1da9f0","channelId":"84b05dda-48f1-46c7-9590-44edd728e062","channelType":"agent","port":50020,"sessionId":"d5fc7750-184a-407c-8b0e-a7777e1da9f0_50020"},"eventId":"a16eac3e-9926-4e07-9585-77d59cdb742a","eventName":"SESSION_CREATE"}
	#è¡Œ 140: {"project":"hoicee","module":"knodi_asr_proxy","timestamp":"2024-12-06T10:49:49.571","level":"info","host":"localhost.localdomain","hostIp":"127.0.0.1","event":{"appId":"servicePool_test_appId","asrOptions":{"engine":"Xunfei"},"callId":"40a6e984-fa2d-4148-8e85-415b1dd418cb","channelId":"40a6e984-fa2d-4148-8e85-415b1dd418cb","channelType":"user","port":50022,"sessionId":"40a6e984-fa2d-4148-8e85-415b1dd418cb_50022"},"eventId":"c0a8cb55-4554-418c-bcc5-8e3a4a8acaea","eventName":"SESSION_CREATE"}

	è¡Œ 141: {"project":"hoicee","module":"knodi_asr_proxy","timestamp":"2024-12-06T10:49:49.572","level":"info","host":"localhost.localdomain","hostIp":"127.0.0.1","event":{"appId":"servicePool_test_appId","asrOptions":{"engine":"Xunfei"},"callId":"40a6e984-fa2d-4148-8e85-415b1dd418cb","channelId":"e011e253-e335-49f7-bea5-55a7ff0dabf4","channelType":"agent","port":50024,"sessionId":"40a6e984-fa2d-4148-8e85-415b1dd418cb_50024"},"eventId":"ce95de3f-db5f-41cf-9fca-3239ad09bf48","eventName":"SESSION_CREATE"}
	è¡Œ 177: {"project":"hoicee","module":"knodi_asr_proxy","timestamp":"2024-12-06T10:50:46.035","level":"info","host":"localhost.localdomain","hostIp":"127.0.0.1","event":{"appId":"servicePool_test_appId","asrOptions":{"engine":"Xunfei"},"callId":"f0d105d4-2998-48ef-90ee-f65c1cbcff52","channelId":"f0d105d4-2998-48ef-90ee-f65c1cbcff52","channelType":"user","port":50026,"sessionId":"f0d105d4-2998-48ef-90ee-f65c1cbcff52_50026"},"eventId":"1cf9ac98-dce9-4f3e-9026-e49adadb3837","eventName":"SESSION_CREATE"}
	#è¡Œ 178: {"project":"hoicee","module":"knodi_asr_proxy","timestamp":"2024-12-06T10:50:46.036","level":"info","host":"localhost.localdomain","hostIp":"127.0.0.1","event":{"appId":"servicePool_test_appId","asrOptions":{"engine":"Xunfei"},"callId":"f0d105d4-2998-48ef-90ee-f65c1cbcff52","channelId":"83b70294-2e6b-49ee-90aa-c260dfe31452","channelType":"agent","port":50028,"sessionId":"f0d105d4-2998-48ef-90ee-f65c1cbcff52_50028"},"eventId":"9a691284-a0df-4cf3-b4cc-bc92a74e92bd","eventName":"SESSION_CREATE"}
	#è¡Œ 212: {"project":"hoicee","module":"knodi_asr_proxy","timestamp":"2024-12-06T10:51:37.981","level":"info","host":"localhost.localdomain","hostIp":"127.0.0.1","event":{"appId":"servicePool_test_appId","asrOptions":{"engine":"Xunfei"},"callId":"f0459ab4-4f04-4982-b7db-f810fee12f0c","channelId":"f0459ab4-4f04-4982-b7db-f810fee12f0c","channelType":"user","port":50030,"sessionId":"f0459ab4-4f04-4982-b7db-f810fee12f0c_50030"},"eventId":"b2f32bbe-5bd3-48f5-93ee-bc9f313685bd","eventName":"SESSION_CREATE"}

	è¡Œ 213: {"project":"hoicee","module":"knodi_asr_proxy","timestamp":"2024-12-06T10:51:37.982","level":"info","host":"localhost.localdomain","hostIp":"127.0.0.1","event":{"appId":"servicePool_test_appId","asrOptions":{"engine":"Xunfei"},"callId":"f0459ab4-4f04-4982-b7db-f810fee12f0c","channelId":"423066f4-6bb8-4723-a005-0be3d88fe0a1","channelType":"agent","port":50032,"sessionId":"f0459ab4-4f04-4982-b7db-f810fee12f0c_50032"},"eventId":"8890498c-e9c7-4ebb-93be-138d3e9292f4","eventName":"SESSION_CREATE"}
	è¡Œ 266: {"project":"hoicee","module":"knodi_asr_proxy","timestamp":"2024-12-06T10:54:10.888","level":"info","host":"localhost.localdomain","hostIp":"127.0.0.1","event":{"appId":"servicePool_test_appId","asrOptions":{"engine":"Xunfei"},"callId":"24719f54-9218-4960-9b28-d4bd3d64ef48","channelId":"24719f54-9218-4960-9b28-d4bd3d64ef48","channelType":"user","port":50034,"sessionId":"24719f54-9218-4960-9b28-d4bd3d64ef48_50034"},"eventId":"73c0baa7-1315-4f25-808d-1785f4cc558c","eventName":"SESSION_CREATE"}
	è¡Œ 267: {"project":"hoicee","module":"knodi_asr_proxy","timestamp":"2024-12-06T10:54:10.890","level":"info","host":"localhost.localdomain","hostIp":"127.0.0.1","event":{"appId":"servicePool_test_appId","asrOptions":{"engine":"Xunfei"},"callId":"24719f54-9218-4960-9b28-d4bd3d64ef48","channelId":"ef5263eb-9153-438c-99c0-aba26af5d164","channelType":"agent","port":50036,"sessionId":"24719f54-9218-4960-9b28-d4bd3d64ef48_50036"},"eventId":"25abba00-c112-42fb-bd93-6483606c8384","eventName":"SESSION_CREATE"}



20241213
æ„å»ºæ‰“åŒ…kd-asr-proxy debugç‰ˆæœ¬dockeré•œåƒ(å‚è€ƒdocker-composeæµ‹è¯•ç¯å¢ƒ210)
è°ƒæµ‹kd-asr-proxy dockeré•œåƒï¼Œè§£å†³å®¹å™¨è¿è¡Œæ—¶ç›®å½•å¼‚å¸¸å¯åŠ¨å¤±è´¥é—®é¢˜
ç ”ç©¶uieæ¨¡å‹pythonæ¨ç†æ‰€ç”¨schemaä¸é¢„ç½®ä¿¡æ¯èåˆç®—æ³•
ä¸å­æ”¿æ¢³ç†æ²Ÿé€šé¢„ç½®æ§½ä½ä¿¡æ¯ã€schemaä½œç”¨å’Œå¹³æ›¿ã€æ§½åæ¥å£ã€ä¸å¼€å¤©ä¸€æœŸæ§½åå˜åŒ–ç­‰é—®é¢˜



ä½¿ç”¨docker build å’Œ dockerfileæ„å»ºé•œåƒæ—¶ï¼ŒæŠ¥é”™å¦‚ä¸‹ï¼Œå› æ–‡ä»¶ç³»ç»Ÿä¸å…¼å®¹å¯¼è‡´çš„æ–‡ä»¶æƒé™ä¸ä¸€è‡´é€ æˆï¼Œé€šè¿‡æœ¬æœºæ‹·è´åˆ°å…¶ä»–ç›®å½•å³å¯æ„å»ºé•œåƒ
ERROR: failed to solve: archive/tar: unknown file mode ?rwxr-xr-x


20241212
æ·»åŠ kd-asr-proxy/mongooseç½‘ç»œåº“çš„è°ƒè¯•è·Ÿè¸ªæ—¥å¿—
è°ƒæµ‹kd-asr-proxy/mongooseæ—¥å¿—è¾“å‡ºåŠŸèƒ½
å¼€å‘kt-lib/neré¢„ç½®æ„å›¾ä¸å¯å˜æ§½ä½æ˜ å°„ä¿¡æ¯Jsonè§£æåŠŸèƒ½
ç ”ç©¶æ¢³ç†uieæ¨¡å‹pythonæ¨ç†æ‰€ç”¨schemaä¸é¢„ç½®ä¿¡æ¯èåˆç®—æ³•


20241211
è°ƒè¯•è§£å†³kd-asr-proxyè§£æé…ç½®å‚æ•°æ—¶coredumpé—®é¢˜
å®šä½è§£å†³kd-asr-proxyåˆ›å»ºVAD initå¤±è´¥é—®é¢˜
å‹æµ‹kd-asr-proxyå¹¶å‘httpè¯·æ±‚å¤ç°è¶…æ—¶é—®é¢˜
å¼€å‘kt-lib/nerä¸­é¢„ç½®æ„å›¾ä¸æ§½ä½ä¿¡æ¯jsonæ–‡ä»¶åŠ è½½åŠŸèƒ½


20241210
æµ‹è¯•kd-asr-proxy debugç‰ˆæœ¬åŠŸèƒ½
è°ƒæµ‹kt-lib/neræŠ½æ§½æ•´ä½“åŠŸèƒ½
è®¾è®¡æ„å›¾ä¸æ§½ä½æ˜ å°„ä¿¡æ¯é¢„ç½®è¡¨æ ¼è½¬æ¢ç»“æ„
å¼€å‘æ„å›¾ä¸æ§½ä½æ˜ å°„ä¿¡æ¯é¢„ç½®è¡¨æ ¼åŠ è½½å’Œè½¬æ¢JsonåŠŸèƒ½


intent_name
slot_name
slot_value


root@docker-desktop:/work/litt/cpp_dev/ner# curl -sSL https://install.python-poetry.org | python3 -
Retrieving Poetry metadata

# Welcome to Poetry!

This will download and install the latest version of Poetry,
a dependency and package manager for Python.

It will add the `poetry` command to Poetry's bin directory, located at:

/root/.local/bin

You can uninstall at any time by executing this script with the --uninstall option,
and these changes will be reverted.

Installing Poetry (1.8.5): Done

Poetry (1.8.5) is installed now. Great!

To get started you need Poetry's bin directory (/root/.local/bin) in your `PATH`
environment variable.

Add `export PATH="/root/.local/bin:$PATH"` to your shell configuration file.

Alternatively, you can call Poetry explicitly with `/root/.local/bin/poetry`.

You can test that everything is set up by executing:

`poetry --version`


echo 'export PATH="$HOME/.local/bin:$PATH"' >> ~/.bashrc
source ~/.bashrc
æˆ–è€…å¦‚æœä½ ä½¿ç”¨çš„æ˜¯ Zshï¼Œè¯·å°†ä¸Šé¢çš„ .bashrc æ›¿æ¢ä¸º .zshrc


20241209
è°ƒç ”åˆ†æåŸç”Ÿpython uieæ¨¡å‹æ¨ç†ååˆ†æ•°è·å–é€»è¾‘
å¼€å‘è°ƒæ•´kt-lib/neræŠ½æ§½uieæ¨¡å‹åå¤„ç†åˆ†æ•°è®¡ç®—
æ’æŸ¥çº¿ä¸Škd-asr-proxyæœåŠ¡æ— æ³•è¿æ¥æŠ¥è¶…æ—¶é—®é¢˜(æœåŠ¡è¿›ç¨‹åœ¨è·‘ï¼Œä½†æ— æ³•æ”¶åˆ°å»ºç«‹ç½‘ç»œè¿æ¥ï¼Œåªæœ‰æ¯ä¸ªsession useré€šé“é”€æ¯ï¼Œagenté€šé“æœªé”€æ¯å¯¼è‡´wsè¿æ¥ä¹Ÿè¶…æ—¶æ–­è¿)
ç¼–è¯‘kd-asr-proxy debugç‰ˆæœ¬å’Œæ­å»ºå…¶gdbè°ƒè¯•dockeré•œåƒ



20241206
æ·»åŠ kt-lib/neræŠ½æ§½uieæ¨¡å‹è¾“å‡ºæ§½ä½åˆ†æ•°
ä¿®æ”¹kt-lib/neræŠ½æ§½uieæ¨¡å‹è¾“å‡ºç»“æœæ•´åˆé€»è¾‘
ä¿®æ”¹kt-lib/neræŠ½æ§½pipelineè°ƒç”¨é€»è¾‘
å‹æµ‹å¤ç°kd-asr-proxyæœåŠ¡httpå¹¶å‘è¯·æ±‚æ—¶è¶…æ—¶é—®é¢˜





172.70.10.210 root msHsJgKuEu+dO45E8l
ç›®å½•ï¼š/home/hoicee/cti

èƒ½å¸®æ¨è¯­éŸ³æµè¿‡æ¥å‹æµ‹ä¸‹å—ï¼Œçœ‹çœ‹æ˜¯ä¸æ˜¯åé¢è½¬å‘è¯­éŸ³æ•°æ®å“ªä¸ªç¯èŠ‚å‡ºé—®é¢˜å¯¼è‡´çš„ï¼Œ

æƒ³è¦å¤ç°è¶…æ—¶é—®é¢˜ï¼Œä¼°è®¡è¿˜å¾—æ¨è¯­éŸ³æµè¿‡æ¥ï¼Œ


20241205
è°ƒç ”fast_tokenizer/sentencepieceæ”¯æŒå¤„ç†bpeåˆ†è¯
æ·»åŠ kt-lib/neræŠ½æ§½matchæ¨¡å‹è¾“å‡ºæ§½ä½åˆ†æ•°
ä¿®æ”¹kt-lib/neræŠ½æ§½matchæ¨¡å‹è¾“å‡ºç»“æœæ•´åˆé€»è¾‘
è°ƒæµ‹kt-lib/neræŠ½æ§½matchæ¨¡å‹æ•´ä½“åŠŸèƒ½

intent(5ä¸ªæ¨¡å‹)


20241204
æ’æŸ¥è§£å†³tts-proxyä¾èµ–åº“libeventä¸­æœªå®šä¹‰å¼•ç”¨é—®é¢˜
è°ƒè¯•æ¢³ç†tts-proxy kdmæ‰€æœ‰çš„ä¸‰æ–¹ä¾èµ–
ä¼˜åŒ–tts-proxyå®‰è£…ä½ç½®åŠå¤´æ–‡ä»¶å’ŒåŠ¨æ€åº“å‘½å
åˆ†æç®—æ³•ç»„æ›´æ–°çš„neræŠ½æ§½é€»è¾‘å˜åŒ–(python)


bufferevent_openssl_set_allow_dirty_shutdown


20241203
æ¶æ„ä¼šreview kd-unimrcpå’Œä¿®æ”¹éƒ¨åˆ†reviewé—®é¢˜
å®šä½è§£å†³asr-proxyç³»ç»Ÿä¾èµ–uuidç‰ˆæœ¬ä¸å…¼å®¹é—®é¢˜
kd-unimrcpä»¥submoduleæ–¹å¼å¼•å…¥ä¸‰æ–¹ä¾èµ–tts-proxy(kdm)
è°ƒæµ‹kd-unimrcpè¿è¡Œæ—¶tts-proxyçš„ä¸‰æ–¹ä¾èµ–


ç¦…é“ï¼š
è¡¥å……å†å²å·¥æ—¶
è¿­ä»£éœ€è¦å¼€å§‹

Design:
æµç¨‹å›¾ä¸­å®¢æˆ·ç«¯æ”¹åä¸ºè°ƒç”¨ç«¯ï¼ŒåŒºåˆ†émrcpä¸­çš„å®¢æˆ·ç«¯
æµç¨‹å›¾ä¸­æ¶ˆæ¯æµç¨‹çš„æ—¶åºæ€§ï¼Œå¯ä»¥ç”¨åºå·æ¥è¡¨ç¤º

API:
å¯çªå‡ºå¦‚ä½•è°ƒç”¨ plugin çš„ ä¸‰å¥— API çš„ä»‹ç»
å¯ä»¥è¡¨è¾¾ Reco Plugin å’Œ Sync Plugin çš„å·¥ä½œæµç¨‹ä»¥åŠé›†æˆæ–¹æ³•

KDS.JSON:
ç«¯å£èŒƒå›´æ”¾åˆ°åŸºç¡€è¯­éŸ³æœåŠ¡ï¼Œæ‰¾é«˜å®‡

Scello:
éœ€è¦å’Œé«˜å®‡ä¸€èµ·åšC++æœåŠ¡çš„æ”¯æŒ


unimrcp build options:
--disable-option-checking  ignore unrecognized --enable/--with options
--disable-FEATURE       do not include FEATURE (same as --enable-FEATURE=no)
--disable-silent-rules  verbose build output (undo: "make V=0")
--disable-dependency-tracking
--disable-libtool-lock  avoid locking (might break parallel builds)
--disable-interlib-deps
					  disable inter-library dependencies (might break
--disable-client-lib    exclude unimrcpclient lib from build
--disable-client-app    exclude sample unimrcpclient app from build
--disable-umc           exclude sample unimrcpclient C++ app from build
--disable-asr-client    exclude misc ASR client lib and app from build
--disable-server-lib    exclude unimrcpserver lib from build
--disable-server-app    exclude unimrcpserver app from build
--disable-demosynth-plugin
--disable-demorecog-plugin
--disable-demoverifier-plugin
--disable-recorder-plugin


hoicee:
https://wiki.knowdee.com/bin/view/%E5%86%85%E9%83%A8%E5%B7%A5%E5%85%B7%E5%B9%B3%E5%8F%B0/hoicee/%E4%BA%A4%E6%8E%A5%E5%88%97%E8%A1%A8/


k8s
https://wiki.knowdee.com/bin/view/03-%E5%9B%A2%E9%98%9F/%E8%BF%90%E7%BB%B4%E5%9B%A2%E9%98%9F/%E8%BF%90%E7%BB%B4%E6%96%87%E6%A1%A3/%E6%B5%81%E7%A8%8B%E8%A7%84%E8%8C%83/docker%E6%96%B9%E5%BC%8F%E9%83%A8%E7%BD%B2%E5%86%85%E9%83%A8test%E7%8E%AF%E5%A2%83/


scelloéƒ¨ç½²ï¼šk8s-->å…¨é‡--->harbor æ–¹å¼ï¼Œä¸‹è½½deploy-script.taråŒ…ï¼Œä¸Šä¼ å†…ç½‘æœåŠ¡å™¨ã€‚

ASRPROXY_ASR_ENGINE=Xunfei
Xunfei
Lenovo

https://jumpserver.knowdee.com/
gaoyu/gaoyu!qweASD
AsrEngine
yhy-pre-2

scello.knowdee.com/:
admin/admin/123

scelloåœ°å€:
https://devops.knowdee.com

ç°åœ¨è¿™ä¸ªscelloæ”¯æŒæ‰“é•œåƒï¼Œç„¶åé•œåƒå»é¢å’Œå›­é¢„å‘éƒ¨ç½²


chatbotbase/centos_c_compile:7.9.2009


wss://ws-api.xfyun.cn/v2/iat
opt->_iSampleRatio = 8000;


è®¾è®¡intentä¸­æ„å›¾labelæ¨¡å—
æå–æ¨¡å‹å’Œåˆ†è¯æ‰€ç”¨å…¬å…±ç»„ä»¶
åˆ†ç¦»å…·ä½“åŠŸèƒ½ç»„ä»¶å’Œpipelineé€»è¾‘ä»£ç 


creator_zoneå„ä¸ªæ¨¡å—ä»£ç åŒæ­¥
ç¼–è¯‘æ›´æ–°å„ä¸ªæ¨¡å—dll
æµ‹è¯•pipelineæ•´ä½“åŠŸèƒ½



å®¢æˆ·çš„ç¯å¢ƒå‡ºç°å¼‚å¸¸é—®é¢˜:
kd_asr_proxy(è®¯é£asræ¥å£wss:443ç«¯å£)æœ‰key timer expiredè¶…æ—¶æƒ…å†µ


é€‚é…
ä¼˜åŒ–


HTTP
WebSocket
MRCP

SIP/RTSP
SDP
RTP/RTCP

tcp/udp
ip

freeswitch:

unimrcp:

mrcp_generic_header_t *generic_header = mrcp_generic_header_get(request);
if(generic_header && generic_header->vendor_specific_params){
	// recog_channel->vendor_params = apt_pair_array_copy(generic_header->vendor_specific_params, request->pool);
	asrRender = vendor_param_find(generic_header->vendor_specific_params, "engine");
	sessionId = vendor_param_find(generic_header->vendor_specific_params, "sessionId");
	vadEnergyStart = vendor_param_find(generic_header->vendor_specific_params, "Speech-vad-energy-start");
	vadPause = vendor_param_find(generic_header->vendor_specific_params, "Speech-vad-pause");
}



20241202
ç¼–å†™kd-unimrcpæ–‡æ¡£dockerfile
ç¼–å†™kd-unimrcpæ–‡æ¡£docker-compose
ç¼–å†™kd-unimrcpæ–‡æ¡£README.md
ç¼–å†™kd-unimrcpæ–‡æ¡£design.md




ä½œå›¾ï¼šcreator_zone/creator_zone_multi
æœå›¾ï¼šimage_embedding
æŠ å›¾


creator_zoneå‘ç‰ˆåœ°å€:
http://172.70.10.53:6740/tree/1128_cz_fb
root



20241129
æµ‹è¯•creator_zone_multi/PoPipelineTest arm64ç‰ˆæœ¬æ•´ä½“åŠŸèƒ½
æ•´ç†creator_zone_multiç¯å¢ƒï¼Œå¹¶æ‰“åŒ…æä¾›å…ƒæœˆarm64ç‰ˆæœ¬å®‰è£…åŒ…
kd-unimrcpä»¥submoduleæ–¹å¼å¼•å…¥ä¸‰æ–¹ä¾èµ–asr-proxy(kdm)
æ’æŸ¥è§£å†³kd-unimrcpæœåŠ¡å¯åŠ¨æ—¶asr-proxyä¾èµ–ç¼ºå¤±é—®é¢˜

UniMRCP version............... : 1.7.0

APR version................... : 1.5.2
APR-util version.............. : 1.5.4
Sofia-SIP version............. : 1.12.11-239-g54ef3e2

Compiler...................... : gcc
Compiler flags................ : -g -O2 -pthread
Preprocessor definitions...... : -DLINUX -D_REENTRANT -D_GNU_SOURCE
Linker flags.................. :

UniMRCP client lib............ : yes
Sample UniMRCP client app..... : yes
Sample UMC C++ client app..... : yes
Misc ASR client lib and app... : yes

UniMRCP server lib............ : yes
UniMRCP server app............ : yes

Demo synthesizer plugin....... : yes
Demo recognizer plugin........ : yes
Demo verifier plugin.......... : yes
Recorder plugin............... : yes

Installation layout........... : classic
Installation directory........ : /work/knowdee/projects/kds/kd-unimrcp/kd-unimrcp


å®šä½è§£å†³DimExtractæ—¶è¿è¡ŒæŠ›å‡ºå¼‚å¸¸
ç¼ºå°‘classify vocè¯è¡¨æ–‡ä»¶



20241128
æºç ç¼–è¯‘sentencepieceä¾èµ–arm64ç‰ˆæœ¬
é€‚é…creator_zone_multi/DimExtractæ”¯æŒarm64å¹³å°
é€‚é…creator_zone_multi/Classificationæ”¯æŒarm64å¹³å°
é€‚é…creator_zone_multi/PoPipelineæ”¯æŒarm64å¹³å°


20241127
é€‚é…creator_zone_multi/DimSearchæ”¯æŒarm64å¹³å°
é€‚é…creator_zone_multi/DimSearchTestæ”¯æŒarm64å¹³å°
é€‚é…creator_zone_multi/DimRecæ”¯æŒarm64å¹³å°
é€‚é…creator_zone_multi/DimRecTestæ”¯æŒarm64å¹³å°



20241126
æ­å»ºkdsæ ‡å‡†å·¥ç¨‹kd-unimrcp
è¿ç§»unimrcpå·¥ç¨‹ä»£ç è‡³kd-unimrcp
ç¼–è¯‘è°ƒè¯•kd-unimrcpå·¥ç¨‹ä»£ç 
ç¼–å†™kd-unimrcpæ–‡æ¡£kds.json


20241125
æ¢³ç†unimrcp-depä¾èµ–é›†æˆæ–¹å¼
æ¸…ç†unimrcpå·¥ç¨‹ç¼–è¯‘ä¸­é—´æ–‡ä»¶
ç¼–è¯‘è°ƒè¯•unimrcpå·¥ç¨‹
ä¼˜åŒ–ç¼–è¯‘è„šæœ¬å’Œunimrcp-depéä¾µå…¥å¼é›†æˆ



2024-11-26 19:33:02:186151 [INFO]   Load Plugin [Demo-Synth-1] [/work/knowdee/projects/kds/kd-unimrcp/kd-unimrcp/plugin/demosynth.so]
2024-11-26 19:33:02:213123 [WARN]   Failed to Load DSO: libaws-cpp-sdk-s3.so: cannot open shared object file: No such file or directory
2024-11-26 19:33:02:213154 [INFO]   Load Plugin [Demo-Recog-1] [/work/knowdee/projects/kds/kd-unimrcp/kd-unimrcp/plugin/demorecog.so]
2024-11-26 19:33:02:348832 [WARN]   Failed to Load DSO: libMicrosoft.CognitiveServices.Speech.core.so: cannot open shared object file: No such file or directory
2024-11-26 19:33:02:348872 [INFO]   Load Plugin [Demo-Verifier-1] [/work/knowdee/projects/kds/kd-unimrcp/kd-unimrcp/plugin/demoverifier.so]



git submodule add <repository> [<path>]
git submodule add https://github.com/user/external-library.git libs/external-library

git add .gitmodules libs/external-library
git commit -m "Add external-library as a submodule"

git clone --recursive <repository>




ubuntu20.04:
1 /work/knowdee/projects/ivr/mrcp/unimrcp-deps-1.6.0/build-dep-libs.sh
2 make_deployment.sh

>>>>>> Step 8: Copying contents of out/plugin to deployment/plugin... >>>>>>
>>>>>> Step 9: Copying asr and tts lib to deployment/lib... >>>>>>
cp: cannot stat '../recoproxy/api/librecoProxy.so': No such file or directory
cp: cannot stat '../ttsProxy/api/libttsProxy.so': No such file or directory
>>>>>> Step 10: Congratulations it is completed... >>>>>>


Making install in unimrcp-server
make[2]: Entering directory '/work/knowdee/projects/ivr/mrcp/unimrcp/platforms/unimrcp-server'
make[3]: Entering directory '/work/knowdee/projects/ivr/mrcp/unimrcp/platforms/unimrcp-server'
 /usr/bin/mkdir -p '/work/knowdee/projects/ivr/mrcp/unimrcp/out/bin'
  /bin/bash ../../libtool   --mode=install /usr/bin/install -c unimrcpserver '/work/knowdee/projects/ivr/mrcp/unimrcp/out/bin'
libtool: install: /usr/bin/install -c .libs/unimrcpserver /work/knowdee/projects/ivr/mrcp/unimrcp/out/bin/unimrcpserver

libtool: install: /usr/bin/install -c .libs/libunimrcpserver.a /work/knowdee/projects/ivr/mrcp/unimrcp/out/lib/libunimrcpserver.a
libtool: install: chmod 644 /work/knowdee/projects/ivr/mrcp/unimrcp/out/lib/libunimrcpserver.a
libtool: install: ranlib /work/knowdee/projects/ivr/mrcp/unimrcp/out/lib/libunimrcpserver.a
libtool: finish: PATH="/root/vcpkg:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/sbin" ldconfig -n /work/knowdee/projects/ivr/mrcp/unimrcp/out/lib

libtool: install: /usr/bin/install -c .libs/libasrclient.a /work/knowdee/projects/ivr/mrcp/unimrcp/out/lib/libasrclient.a
libtool: install: chmod 644 /work/knowdee/projects/ivr/mrcp/unimrcp/out/lib/libasrclient.a
libtool: install: ranlib /work/knowdee/projects/ivr/mrcp/unimrcp/out/lib/libasrclient.a
libtool: finish: PATH="/root/vcpkg:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/sbin" ldconfig -n /work/knowdee/projects/ivr/mrcp/unimrcp/out/lib

libtool: install: chmod 644 /work/knowdee/projects/ivr/mrcp/unimrcp/out/lib/libunimrcpclient.a
libtool: install: ranlib /work/knowdee/projects/ivr/mrcp/unimrcp/out/lib/libunimrcpclient.a
libtool: finish: PATH="/root/vcpkg:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/sbin" ldconfig -n /work/knowdee/projects/ivr/mrcp/unimrcp/out/lib

libtool: install: /usr/bin/install -c .libs/mrcprecorder.a /work/knowdee/projects/ivr/mrcp/unimrcp/out/plugin/mrcprecorder.a
libtool: install: chmod 644 /work/knowdee/projects/ivr/mrcp/unimrcp/out/plugin/mrcprecorder.a
libtool: install: ranlib /work/knowdee/projects/ivr/mrcp/unimrcp/out/plugin/mrcprecorder.a
libtool: finish: PATH="/root/vcpkg:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/sbin" ldconfig -n /work/knowdee/projects/ivr/mrcp/unimrcp/out/plugin

libtool: install: chmod 644 /work/knowdee/projects/ivr/mrcp/unimrcp/out/plugin/demoverifier.a
libtool: install: ranlib /work/knowdee/projects/ivr/mrcp/unimrcp/out/plugin/demoverifier.a
libtool: finish: PATH="/root/vcpkg:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/sbin" ldconfig -n /work/knowdee/projects/ivr/mrcp/unimrcp/out/plugin

libtool: install: chmod 644 /work/knowdee/projects/ivr/mrcp/unimrcp/out/plugin/demorecog.a
libtool: install: ranlib /work/knowdee/projects/ivr/mrcp/unimrcp/out/plugin/demorecog.a
libtool: finish: PATH="/root/vcpkg:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/sbin" ldconfig -n /work/knowdee/projects/ivr/mrcp/unimrcp/out/plugin

libtool: install: chmod 644 /work/knowdee/projects/ivr/mrcp/unimrcp/out/plugin/demosynth.a
libtool: install: ranlib /work/knowdee/projects/ivr/mrcp/unimrcp/out/plugin/demosynth.a
libtool: finish: PATH="/root/vcpkg:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/sbin" ldconfig -n /work/knowdee/projects/ivr/mrcp/unimrcp/out/plugin
----------------------------------------------------------------------
Libraries have been installed in:
   /work/knowdee/projects/ivr/mrcp/unimrcp/out/plugin

If you ever happen to want to link against installed libraries
in a given directory, LIBDIR, you must either use libtool, and
specify the full pathname of the library, or use the '-LLIBDIR'
flag during linking and do at least one of the following:
   - add LIBDIR to the 'LD_LIBRARY_PATH' environment variable
     during execution
   - add LIBDIR to the 'LD_RUN_PATH' environment variable
     during linking
   - use the '-Wl,-rpath -Wl,LIBDIR' linker flag
   - have your system administrator add LIBDIR to '/etc/ld.so.conf'

See any operating system documentation about shared libraries for
more information, such as the ld(1) and ld.so(8) manual pages.
----------------------------------------------------------------------


20241122
ç ”ç©¶ç°æœ‰unimrcpå·¥ç¨‹ç»“æ„
å¯¹æ¯”åŸunimrcpï¼Œåˆ†æç°æœ‰unimrcpå¢æ”¹å˜åŒ–
æ­å»ºunimrcpå¼€å‘ç¯å¢ƒ
æºç ç¼–è¯‘unimrcp-depä¾èµ–åŒ…



asr-proxy review:
kdm.json:
OS ä½¿ç”¨ï¼šé€æ¸æŠ›å¼ƒ CentOSï¼Œé‡‡ç”¨ Ubuntu å’Œ rocky linux

Desingn:
æ¶æ„å†™çš„å¤ªæ³›ï¼Œéœ€è¦æ¶æ„çš„é€»è¾‘
æ ¸å¿ƒæµç¨‹æ²¡æœ‰åšè¡¨è¾¾ï¼Œéœ€è¦æŠŠè°ƒç”¨åˆ°vadä»¥åŠå¦‚ä½•è°ƒç”¨åˆ° ASR æœåŠ¡çš„æµç¨‹ä½“ç°

APIï¼š
æ¥å£éœ€è¦é€æ¸ä¼˜åŒ–ï¼Œæ”¹ä¸ºæ–°å®šä¹‰çš„æ¥å£(vadå‚æ•°ä¼˜åŒ–)


æ­å»ºasr_proxy Ubuntu20.04å¼€å‘ç¯å¢ƒ
asr_proxyç¼–è¯‘é€‚é…Ubuntu20.04å¹³å°
è°ƒæµ‹asr_proxyæµ‹è¯•ç”¨ä¾‹




-- Build files have been written to: /work/knowdee/projects/kdm/asr-proxy/build
[ 50%] Linking CXX executable test_kdm_asr_proxy

/usr/bin/ld: /work/knowdee/projects/kdm/asr-proxy/install/lib/libkdm_asr_proxy.so: undefined reference to `curl_formadd'
/usr/bin/ld: /work/knowdee/projects/kdm/asr-proxy/install/lib/libkdm_asr_proxy.so: undefined reference to `curl_slist_append'
/usr/bin/ld: /work/knowdee/projects/kdm/asr-proxy/install/lib/libkdm_asr_proxy.so: undefined reference to `curl_easy_perform'
/usr/bin/ld: /work/knowdee/projects/kdm/asr-proxy/install/lib/libkdm_asr_proxy.so: undefined reference to `curl_easy_init'
/usr/bin/ld: /work/knowdee/projects/kdm/asr-proxy/install/lib/libkdm_asr_proxy.so: undefined reference to `curl_formfree'
/usr/bin/ld: /work/knowdee/projects/kdm/asr-proxy/install/lib/libkdm_asr_proxy.so: undefined reference to `curl_global_init'
/usr/bin/ld: /work/knowdee/projects/kdm/asr-proxy/install/lib/libkdm_asr_proxy.so: undefined reference to `curl_easy_cleanup'
/usr/bin/ld: /work/knowdee/projects/kdm/asr-proxy/install/lib/libkdm_asr_proxy.so: undefined reference to `curl_global_cleanup'
/usr/bin/ld: /work/knowdee/projects/kdm/asr-proxy/install/lib/libkdm_asr_proxy.so: undefined reference to `curl_easy_setopt'
/usr/bin/ld: /work/knowdee/projects/kdm/asr-proxy/install/lib/libkdm_asr_proxy.so: undefined reference to `curl_easy_getinfo'
/usr/bin/ld: /work/knowdee/projects/kdm/asr-proxy/install/lib/libkdm_asr_proxy.so: undefined reference to `curl_slist_free_all'
/usr/bin/ld: /work/knowdee/projects/kdm/asr-proxy/install/lib/libcjsonLog.so: undefined reference to `uuid_generate'
/usr/bin/ld: /work/knowdee/projects/kdm/asr-proxy/install/lib/libkdm_asr_proxy.so: undefined reference to `curl_easy_strerror'


collect2: error: ld returned 1 exit status
make[2]: *** [example/CMakeFiles/test_kdm_asr_proxy.dir/build.make:97: example/test_kdm_asr_proxy] Error 1
make[1]: *** [CMakeFiles/Makefile2:98: example/CMakeFiles/test_kdm_asr_proxy.dir/all] Error 2
make: *** [Makefile:136: all] Error 2


20241121
æ¶æ„ä¼šreview kdm asr_proxy
ä¿®æ”¹è°ƒæµ‹asr_proxyè¿è¡Œæ—¶ä¾èµ–å®‰è£…
ä¿®æ”¹asr_proxy reviewéƒ¨åˆ†æ–‡æ¡£é—®é¢˜
æ’æŸ¥å®¢æˆ·ç¯å¢ƒkd_asr_proxyé‰´æƒè¶…æ—¶é—®é¢˜


-L./SDK -lrecoProxy  -Wl,-rpath=./SDK

gcc (GCC) 4.8.5


scl enable devtoolset-9 bash


#!/bin/bash

set -e

cp /etc/yum.repos.d/CentOS-SCLo-scl.repo /etc/yum.repos.d/CentOS-SCLo-scl.repo.backup
cp /etc/yum.repos.d/CentOS-SCLo-scl-rh.repo /etc/yum.repos.d/CentOS-SCLo-scl-rh.repo.backup
cat <<EOF > /etc/yum.repos.d/CentOS-SCLo-rh.repo
  [centos-sclo-rh]
  name=CentOS-7 - SCLo rh
  baseurl=https://mirrors.aliyun.com/centos/7/sclo/x86_64/rh/
  gpgcheck=1
  enabled=1
  gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-SIG-SCLo
EOF

cp /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.backup
curl -o /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo

yum clean all && yum makecache && yum update -y
yum install -y wget gcc gcc-c++ librdkafka-devel openssl openssl-devel centos-release-scl devtoolset-9-gcc*

scl enable devtoolset-9 bash




20241120
è§„æ•´asr_proxyè¿è¡Œæ—¶ä¾èµ–
æ¢³ç†asr_proxyå¤–å±‚APIå…¥å‚å‡ºå‚
ç¼–å†™asr_proxyæ¥å£æ–‡æ¡£apis.md
ç¼–å†™asr_proxyè®¾è®¡æ–‡æ¡£design.md


20241119
æ¢³ç†è°ƒè¯•asr_proxyä¸‰æ–¹ä¾èµ–
å®šä½æµ‹è¯•ç”¨ä¾‹å¯åŠ¨æ—¶æŠ¥é”™undefined symbolé—®é¢˜
ç¼–å†™asr_proxyæ ‡å‡†æ–‡ä»¶kdm.json
ç¼–å†™asr_proxyæ ‡å‡†æ–‡ä»¶README.md


/usr/bin/ld: warning: libssl.so.10, needed by /work/knowdee/projects/ivr/asr/recoproxy/src/../third_party/aws-sdk-cpp/lib/libaws-cpp-sdk-core.so, not found (try using -rpath or -rpath-link)
/usr/bin/ld: warning: libcrypto.so.10, needed by /work/knowdee/projects/ivr/asr/recoproxy/src/../third_party/aws-sdk-cpp/lib/libaws-cpp-sdk-core.so, not found (try using -rpath or -rpath-link)

/usr/bin/ld: ../src/libRECO_PROXY.so: undefined reference to `iflytekAsrRequestParam::BUSINESSARGS_PART2'

/usr/bin/ld: /work/knowdee/projects/ivr/asr/recoproxy/src/../third_party/cjson/lib/libcjsonLog.so: undefined reference to `uuid_generate'
æ­¤ä¾èµ–åº“éœ€è¦uuidï¼Œä½†å…¶æ²¡æœ‰ä¾èµ–é“¾æ¥libuuid.soï¼Œæ•…ä¾èµ–libcjsonLog.soæ—¶ï¼Œéœ€è¦åœ¨ç¼–è¯‘æ—¶åŠ "-luuid"


000000000011a090 W _ZN22iflytekAsrRequestParam13 getFirstFrame B5cxx11EiPvi
00000000001180d0 W _ZN22iflytekAsrRequestParam14 getCommonFrame B5cxx11EiPvi
                 U _ZN22iflytekAsrRequestParam9 createUrl B5cxx11Ev
                 U _ZN22iflytekAsrRequestParam13 getCommonArgs B5cxx11Ev
				 U _ZN22iflytekAsrRequestParam18 BUSINESSARGS_PART1 E
                 U _ZN22iflytekAsrRequestParam18 BUSINESSARGS_PART2 E
0000000000116a90 W _ZN22iflytekAsrRequestParam D1Ev
0000000000116a90 W _ZN22iflytekAsrRequestParam D2Ev




0000000000890964 W _ZN22iflytekAsrRequestParam8getFrameEiPvi
0000000000890922 W _ZN22iflytekAsrRequestParam11setLanguageEPc
0000000000890afa W _ZN22iflytekAsrRequestParam13base64_encodeEPhj
0000000000890d52 W _ZN22iflytekAsrRequestParam13getFirstFrameEiPvi
0000000000891160 W _ZN22iflytekAsrRequestParam14getCommonFrameEiPvi
000000000089094c W _ZN22iflytekAsrRequestParam14setSampleRatioEi
                 U _ZN22iflytekAsrRequestParam9createUrlEv
				 U _ZN22iflytekAsrRequestParam13getCommonArgsEv
                 U _ZN22iflytekAsrRequestParam18BUSINESSARGS_PART1E
                 U _ZN22iflytekAsrRequestParam18BUSINESSARGS_PART2E
0000000000890898 W _ZN22iflytekAsrRequestParamC1Ev
0000000000890898 W _ZN22iflytekAsrRequestParamC2Ev
00000000008908da W _ZN22iflytekAsrRequestParamD1Ev
00000000008908da W _ZN22iflytekAsrRequestParamD2Ev


20241118
æ’æŸ¥è§£å†³recoproxyä»£ç ç¼–è¯‘wssæ—¶æŠ¥é”™é—®é¢˜
è°ƒæµ‹recoproxyæµ‹è¯•ç”¨ä¾‹
æ„å»ºkdmå·¥ç¨‹asr_proxy
è¿ç§»recoproxyä»£ç è‡³asr_proxy


requirements:
3rd-party:
boost 1.74.0
aws-cpp-sdk 1.8.0
websocketpp 0.8.2


std::put_time(c++14)

cjsonLog.so(uuid)
AWS SDK
ubuntu:
apt install libcurl4-openssl-dev libssl-dev uuid-dev

centos:7.9.2009(gcc9.3):
yum install libcurl-devel openssl-devel libuuid cmake

pCreateRecoProxy
pFeedDataToRecoProxy
pCloseRecoProxy

RECOPROXY_PROCESS_PARTIAL

const static int VAD_BUFF_LEN = 2*64*1000;

20241115
æ•´ç†armç‰ˆæœ¬creator_zoneä»£ç å·¥ç¨‹
æ•´ç†å¹¶æ‰“åŒ…armç‰ˆæœ¬PoPipelineTest(å·²æäº¤æ´ªè¾‰)
æ¢³ç†ç°æœ‰recoproxyä»£ç ç»“æ„
ç¼–è¯‘è°ƒè¯•recoproxyä»£ç ï¼Œè§£å†³libcurlä¾èµ–ç¼ºå¤±é—®é¢˜



æ²Ÿé€šäº¤æ¥creator_zoneæ•°æ®åº“ç›¸å…³æ–‡æ¡£
æ¢³ç†creator_zoneå·¥ç¨‹ä»£ç 
å„ä¸ªæ¨¡å‹ç­›é€‰æŒ‡æ ‡å’Œé˜ˆå€¼æ”¹ä¸ºåŠ¨æ€å¯é…config



## æ·±åº¦ç¥ç»ç½‘ç»œDNNæ¨¡å‹æ¨ç†æ¡†æ¶:
vllm
onnxruntime
TensorRT
OpenMP


## GPU compute graph(ç®—å­ï¼Œè®¡ç®—å›¾ï¼ŒçŸ©é˜µè¿ç®—ï¼Œæ•°å­¦åº“):
cudnn
cuda


## GPUç¡¬ä»¶é©±åŠ¨:
nvidia-smi


## GPUç¡¬ä»¶
4090
T4
A100 40G/80G(DGX A100 å…«å¼ å¡)
H100



20241114
armå¹³å°ç¼–è¯‘è°ƒè¯•Classification
armå¹³å°ç¼–è¯‘è°ƒè¯•PoPipeline
æµ‹è¯•armå¹³å°PoPipelineTestæ•´ä½“åŠŸèƒ½
æ’æŸ¥è§£å†³PoPipelineTestå¯åŠ¨æ—¶ä¾èµ–åŠ è½½å¼‚å¸¸é—®é¢˜


20241113
armå¹³å°æºç ç¼–è¯‘sqlcipher
armå¹³å°æºç ç¼–è¯‘openssl
armå¹³å°ç¼–è¯‘è°ƒè¯•DimExtract
armå¹³å°ç¼–è¯‘è°ƒè¯•DimRec


# laa/creator_zone
## dependence:
PoPipeline.dll
Classification.dll
DimExtract.dll
DimRec.dll
DimSearch.dll

core_tokenizers.dll
icudt70.dll
icuuc70.dll

onnxruntime.dll
onnxruntime_providers_shared.dll

sqlcipher.dll(x64)/sqlite3.dll(arm64)
libcrypto-3-x64.dll(x64)


# sqlcipher build(dll: nmake.exe -f ..\Makefile.msc TOP=..\ (in "Developer PowerShell for VS 2022"))

@build sqlcipher
@ 1. clone sqlcipher somewhere (in a sqlcipher directory).
@ 2. install a proper tclsh.exe and put it in the path https://www.activestate.com/products/tcl/
@ 3. install open SSL binaries & static libs https://slproweb.com/products/Win32OpenSSL.html
@ 4. create a "build" directory at same level
@ 5. create a "x64" directory under "build"
@ 6. copy this file in build\x64
@ 7. open "x64 Native Tools Command Prompt for VS 20XX"
@ 8. cd build\x64
@ 9. run buildx64.bat (this file copied in build\x64)
@ 10. after run (somewarning can be ignored and last error about "shell" too) you will get an sqlite.x64.dll (~7 Mb in size)
@ also adapt paths
@ nmake /f ..\Makefile.msc TOP=..\ FOR_WIN10=1 SQLITE3DLL=sqlite3.x64.dll PLATFORM=x64
mkdir build
cd build
@nmake /f ..\Makefile.msc TOP=..\ FOR_WIN10=1  PLATFORM=arm64
nmake /f ..\Makefile.msc TOP=..\

## Makefile.msc modify

# Flags to include OpenSSL
# TCC = $(TCC) -DSQLITE_HAS_CODEC -I"C:\Users\lit\vcpkg\packages\openssl_arm64-windows-static\include"
# RCC = $(RCC) -DSQLITE_HAS_CODEC -I"C:\Users\lit\vcpkg\packages\openssl_arm64-windows-static\include"
TCC = $(TCC) -DSQLITE_HAS_CODEC -I"C:\Users\lit\vcpkg\packages\openssl_x64-windows-static\include"
RCC = $(RCC) -DSQLITE_HAS_CODEC -I"C:\Users\lit\vcpkg\packages\openssl_x64-windows-static\include"

# linker options for OpenSSL
# LTLIBPATHS = $(LTLIBPATHS) /LIBPATH:$(ICULIBDIR) /LIBPATH:"C:\Users\lit\vcpkg\packages\openssl_arm64-windows-static\lib"
LTLIBPATHS = $(LTLIBPATHS) /LIBPATH:$(ICULIBDIR) /LIBPATH:"C:\Users\lit\vcpkg\packages\openssl_x64-windows-static\lib"
LTLIBS = $(LTLIBS) libssl.lib libcrypto.lib ws2_32.lib shell32.lib advapi32.lib gdi32.lib user32.lib crypt32.lib kernel32.lib


## requirements:
openssl(lib:vcpkg install openssl:arm64-windows-static)
tcl(exe:Git\mingw64\bin)

vs2022(c++ã€.net)
vcpkg
git
cmake


sqlcipher
openssl				C:\Users\lit\vcpkg\packages\openssl_arm64-windows-static\include
tcl



20241112
æ­å»ºarmå¹³å°æºç ç¼–è¯‘ç¯å¢ƒ
ç¼–è¯‘å®‰è£…ä¾èµ–åº“easylogger
è°ƒè¯•æ’æŸ¥fast_tokenizerä¾èµ–åŠ è½½å¼‚å¸¸æŠ¥é”™
ç¼–è¯‘è°ƒè¯•creator_zone/dimSearch(sqlcipherç‰ˆæœ¬ä¸å…¼å®¹)


20241111
è°ƒç ”å®‰è£…sqlcipher armç‰ˆæœ¬
æºç äº¤å‰ç¼–è¯‘sqlcipher armç‰ˆæœ¬(å†…ç½®ç¼–è¯‘è„šæœ¬ä¸æ”¯æŒ)
æºç äº¤å‰ç¼–è¯‘openssl armç‰ˆæœ¬
æºç äº¤å‰ç¼–è¯‘tcl armç‰ˆæœ¬



20241108
ç†Ÿæ‚‰creator_zoneæ•´ä½“ä»£ç ç»“æ„ä¸ç»„æˆ
åŒæ´ªè¾‰æ¢è®¨æ¢³ç†creator_zoneä¸šåŠ¡æµç¨‹ä¸é€»è¾‘
è°ƒç ”Windows Armæ¶æ„äº¤å‰ç¼–è¯‘å¯è¡Œæ€§
å®‰è£…VS2022 Armäº¤å‰ç¼–è¯‘æ‰€éœ€å·¥å…·é›†



CZå·¥ç¨‹å¼€å‘å†…å®¹ä¼˜åŒ–
ä»»åŠ¡æè¿°
1ã€åˆå§‹åŒ–loadå ç”¨18mï¼Œæ‰§è¡Œä¸šåŠ¡åï¼Œunloadï¼Œå‰©ä½™75mï¼Œæ²¡å¸è½½å¹²å‡€
2ã€config åŠ¨æ€æŒ‡æ ‡è®¾è®¡
  a.åˆ†ç±»æ¨¡å‹ä¸­çš„labellist(å…¨é‡)
  b.æ£€ç´¢æ¨¡å‹ä¸­çš„ç²—ç­›æ•°é‡(200,config)ï¼Œtopk_gxaric,topk_statiÃ§(é€šè¿‡æ¥å£è‡ªå®šä¹‰)ä»¥åŠåˆ†....
  c.æ¨èæ¨¡å‹å¿…é€‰é¡¹(0.6ï¼Œè¶Šé«˜è¶Šå¥½ï¼Œconfg)ï¼Œå¯é€‰é¡¹(0.8ï¼Œè¶Šé«˜è¶Šå¥½ï¼Œconfig)
3ã€æ•°æ®åº“åˆ†åº“(.db æ˜æ–‡)(.db vec)
4ã€æŠ½å–å’Œæ¨èä¸šåŠ¡é€»è¾‘äº’æ–¥é€»è¾‘ä¼˜åŒ–(ä¼˜å…ˆçº§ä½)

ä»¥ä¸‹æ˜¯czå·¥ç¨‹åŒ–å½“å‰éœ€è¦æ¨è¿›çš„å†…å®¹ï¼š
1. ä¸šåŠ¡é€»è¾‘ï¼Œå·¥ç¨‹ä»£ç ç†Ÿæ‚‰ï¼Œäº¤æ¥
2. æ•°æ®åº“éƒ¨åˆ†ä»£ç çš„æ”¹å†™ï¼Œæ”¯æŒåŒæ—¶ä½¿ç”¨åŠ å¯†çš„promptç‰‡æ®µæ•°æ®åº“å’ŒæœªåŠ å¯†çš„vecæ•°æ®åº“
3. æ”¯æŒARMæ¶æ„




Kd-asr-proxy
è®¾è®¡ï¼š
æ¶æ„ä¸­ä½“ç°ä¸€ä¸‹å¯èƒ½ä¾èµ–çš„rewriteæœåŠ¡
åç»­å¯æ¼”åŒ–ä¸ºå¤šSAASæœåŠ¡çš„å®æ—¶è°ƒåº¦è®¾ç½®ï¼ˆæ€è€ƒæŠ›å¼€ç”µè¯ä¸šåŠ¡ï¼Œæ­¤æœåŠ¡çš„æ¼”è¿›ï¼‰

APIï¼š
Create session æ¥å£ï¼š
APPIDï¼šåç»­KDSå‡çº§æ—¶æ”¹ä¸ºï¼ŒAKSKçš„å®Œæ•´éªŒè¯
æµå¼ä¼ è¾“æ¥å£å¦‚ä½•å®šä¹‰



20241107
æ¶æ„ä¼šreviewæœåŠ¡kd-asr-proxy
ç»†åŒ–è¡¥å……kd-asr-proxyæ–‡æ¡£README.mdã€kds.json
ä¼˜åŒ–kd-asr-proxyå·¥ç¨‹æœåŠ¡ååŠä»£ç å‘½åè§„èŒƒ
ä¼˜åŒ–kd-asr-proxyè®¾è®¡æ–‡æ¡£design.md


kt-lib/intent
laa/creator_zone



20241106
ç»„å†…reviewå·¥ç¨‹kd_asr_proxy
ç»†åŒ–kd_asr_proxyæ¥å£rest apiå‚æ•°è¯´æ˜
è°ƒæ•´è¡¥å……kd_asr_proxyæ–‡æ¡£design.md
ä¿®æ”¹kd_asr_proxyæ–‡æ¡£README.md


20241105
æ’æŸ¥è§£å†³kd_asr_proxyæäº¤è½¯è¿æ¥æ–‡ä»¶å¼‚å¸¸é—®é¢˜
ç»˜åˆ¶kd_asr_proxyæ¶æ„è®¾è®¡å›¾design.md
ç¼–å†™kd_asr_proxyå·¥ç¨‹README.md
æµ‹è¯•ä½¿ç”¨nexusåŸºç¡€é•œåƒéƒ¨ç½²kd_asr_proxy


æµ‹è¯•ä½¿ç”¨æ–°ç‰ˆscelloéƒ¨ç½²kd_asr_proxy


20241104
è¿ç§»hoicee_asr_proxyä»£ç åˆ°kdså·¥ç¨‹kd_asr_proxy
ç¼–è¯‘è°ƒè¯•kdså·¥ç¨‹ä»£ç kd_asr_proxy
æ¢³ç†ä¿®æ”¹third_partyä¾èµ–ï¼Œè§£å†³è¿è¡Œæ—¶é‡å®šä½ä¾èµ–åº“é—®é¢˜
æ¢³ç†hoicee_asr_proxyæœåŠ¡æ¶æ„è®¾è®¡


20241101
æ¢³ç†hoicee_asr_proxyæ¥å£ä»£ç 
ç¼–å†™hoicee_asr_proxyæ¥å£apisæ–‡æ¡£
ä¿®æ”¹kdsæ ‡å‡†æ–‡ä»¶kds.json
è¡¥å……scelloæ‰€ç”¨è„šæœ¬


20241031
æµ‹è¯•sqlcipherå·¥å…·åŠ å¯†dbæ–‡ä»¶åŠŸèƒ½
æ²Ÿé€šæ¢è®¨sqlcipherå·¥å…·é›†æˆæ–¹å¼åŠé—®é¢˜
ç¼–å†™sqlcipheråŠ è§£å¯†dbæ–‡ä»¶çš„ä»£ç æ ·ä¾‹
è°ƒæµ‹ä»£ç ç”¨ä¾‹åŠ è§£å¯†dbæ–‡ä»¶åŠŸèƒ½


ç ”ç©¶sqlite_vecä½¿ç”¨æ–¹æ³•
è®¾è®¡sqliteå‘é‡æ•°æ®æ’å…¥æ¥å£
è®¾è®¡sqliteåˆ é™¤å‘é‡æ•°æ®æ¥å£
è®¾è®¡sqliteä¿®æ”¹å‘é‡æ•°æ®æ¥å£
è®¾è®¡sqliteæ¸…åº“æ¥å£



20241030
è°ƒè¯•creator_zone/DimSearchå¼€å‘ç¯å¢ƒ
ç ”ç©¶ç°æœ‰creator_zone/DimSearchä»£ç 
è°ƒç ”sqlcipheråŠ å¯†å·¥å…·
ç¼–è¯‘å®‰è£…sqlcipherå·¥å…·windowsç‰ˆæœ¬


#define SQLITE_VERSION        "3.45.3"
#define SQLITE_VERSION_NUMBER 3045003
#define SQLITE_SOURCE_ID      "2024-04-15 13:34:05 8653b758870e6ef0c98d46b3ace27849054af85da891eb121e9aaa537f1ealt1"


#define SQLITE_VERSION        "3.46.1"
#define SQLITE_VERSION_NUMBER 3046001
#define SQLITE_SOURCE_ID      "2024-08-13 09:16:08 c9c2ab54ba1f5f46360f1b4f35d849cd3f080e6fc2b6c60e91b16c63f69a1e33"



vcpkg install sqlcipher:x64-windows

# this is heuristically generated, and may not be correct
find_package(sqlcipher CONFIG REQUIRED)
target_link_libraries(main PRIVATE sqlcipher::sqlcipher)

sqlcipher provides pkg-config modules:

# SQL database engine
sqlcipher


vcpkg install sqlitecpp[sqlcipher]:x64-windows

  # this is heuristically generated, and may not be correct
  find_package(SQLiteCpp CONFIG REQUIRED)
  target_link_libraries(main PRIVATE SQLiteCpp)


20241029
ä¼˜åŒ–åŸæœ‰è§„åˆ™æŠ½æ§½CNerMatchModule
ä¿®æ”¹intentæŠ½æ§½æ–°ç‰ˆAPIæ¥å£
è°ƒæµ‹intentæŠ½æ§½æ–°ç‰ˆAPIæ¥å£åŠŸèƒ½
å®‰è£…vs2022å‡†å¤‡creator_zoneå¼€å‘ç¯å¢ƒ

ä¸æ´ªè¾‰æ²Ÿé€šcreator_zoneå‘é‡åº“å¢åˆ æ”¹ç­‰æ“ä½œåŠŸèƒ½æ¥å£



20241028
æ’æŸ¥æµ‹è¯•kt-lib/intentèµ„æºåŠ è½½å¤±è´¥é—®é¢˜
æµ‹è¯•æ—§ç‰ˆintentæ¥å£åŠŸèƒ½
ä¼˜åŒ–åŸæœ‰è§„åˆ™æŠ½æ§½TrieSbcConvertåŠUtil
ä¼˜åŒ–åŸæœ‰è§„åˆ™æŠ½æ§½è§£å¯†CAesGcmModule


20241025
ä¼˜åŒ–matchæ¨¡å‹æ¨ç†æ¡†æ¶
è°ƒæ•´kt-lib/intentè°ƒç”¨æŠ½æ§½æ¨¡å—
ä¿®æ”¹kt-lib/intentæµ‹è¯•ç¨‹åº
è°ƒè¯•å®šä½kt-libç¼–è¯‘é—®é¢˜


20241024
ä¼˜åŒ–uieæ¨¡å—tokenizer
ä¼˜åŒ–matchæ¨¡å—tokenizer
ä¼˜åŒ–uieæ¨¡å‹æ¨ç†æ¡†æ¶
å®šä½uieæ¨¡å‹æ¨ç†æ— ç»“æœé—®é¢˜

uie model structure:
input_ids
name: input_ids
tensor: int64[batch,sequence]
token_type_ids
name: token_type_ids
tensor: int64[batch,sequence]
attention_mask
name: attention_mask
tensor: int64[batch,sequence]


start_prob
name: start_prob
tensor: float32[batch,sequence]
end_prob
name: end_prob
tensor: float32[batch,sequence]


match model structure:
input_ids
name: input_ids
tensor: int64[batch_size,sequence_size]
attention_mask
name: attention_mask
tensor: int64[batch_size,sequence_size]

output
name: output
tensor: float32[batch_size,2]


20241023
è°ƒæµ‹æ•´åˆåneræ¨¡å—å†…è§„åˆ™æŠ½æ§½åŠŸèƒ½
æ’æŸ¥è§„åˆ™æŠ½æ§½åˆå§‹åŒ–å¤±è´¥ï¼Œè§£å†³è§£å¯†é…ç½®æ–‡ä»¶å¤±è´¥é—®é¢˜
é›†æˆneræŠ½æ§½æ¨¡å—åˆ°kt-lib/intent
è°ƒæµ‹kt-lib/intentè°ƒç”¨æŠ½æ§½åŠŸèƒ½ï¼Œå®šä½è§£å†³è§„åˆ™æŠ½æ§½æ— ç»“æœé—®é¢˜


20241022
æ’æŸ¥è§£å†³uieæ¨¡å‹é¢„æµ‹æ— ç»“æœé—®é¢˜
æ’æŸ¥è§£å†³matchæ¨¡å‹tokenizeç»“æœå¼‚å¸¸
å®šä½matchæ¨¡å‹é¢„æµ‹æŠ›å¼‚å¸¸é—®é¢˜
æ•´åˆè§„åˆ™åŒ¹é…æ§½ä½åˆ°neræŠ½æ§½æ¨¡å—å†…


ner No.1 slots: è…¾ è®¯ ä¼š è®®
ner rule re sentence = æ‰“å¼€å¾®ä¿¡, intent = æ‰“å¼€åº”ç”¨
label:æˆ‘çš„æ–‡æ¡£, pattern:.*(æˆ‘çš„æ–‡æ¡£|my document).*
label:æˆ‘çš„å›¾ç‰‡, pattern:.*(æˆ‘çš„å›¾ç‰‡|my picture).*
label:æˆ‘çš„éŸ³ä¹, pattern:.*(æˆ‘çš„éŸ³ä¹|my music).*
label:æˆ‘çš„è§†é¢‘, pattern:.*(æˆ‘çš„è§†é¢‘|my video).*
label:æˆ‘çš„ä¸‹è½½, pattern:.*(æˆ‘çš„ä¸‹è½½|my download).*
label:æˆªå›¾, pattern:.*(æˆªå›¾|shootcut|shoot cut|æˆªå±|æŠ“å›¾|æˆªå–).*
label:ç³»ç»Ÿä¿¡æ¯, pattern:.*(ç³»ç»Ÿé…ç½®|ç¡¬ä»¶ä¿¡æ¯|å¤„ç†å™¨å‹å·|ä¸»æ¿å‹å·|å†…å­˜å®¹é‡|ç¡¬ç›˜å‹å·|æ˜¾å¡å‹å·|æ“ä½œç³»ç»Ÿ|å†…æ ¸ç‰ˆæœ¬|æ³¨å†Œä¿¡æ¯|é©±åŠ¨ç¨‹åº|ç‰ˆæœ¬|å‚å•†|å®‰è£…æ—¶é—´|è½¯ä»¶ç‰ˆæœ¬|ç‰ˆæœ¬ä¿¡æ¯|ç³»ç»Ÿæ—¥å¿—).*
label:TEXTTYPE, pattern:{.*, TEXTTYPE | NUMTYPE}

ner rule re output slots = ["TEXTTYPE","å¾®ä¿¡"]


110å·

4å·æ¥¼1å•å…ƒ3204

è…¾ è®¯ ä¼š è®®
å¾®ä¿¡

20241021
è°ƒè¯•uieæ¨¡å‹é¢„æµ‹æ¥å£
è°ƒè¯•uieæ¨¡å‹åå¤„ç†æ¥å£
ç¼–å†™æŠ½æ§½æµ‹è¯•ç”¨ä¾‹
è°ƒæµ‹æ•´ä½“æµç¨‹å’ŒåŠŸèƒ½


20241018
å¼€å‘è°ƒè¯•matchæ¨¡å‹åå¤„ç†æ¥å£
è°ƒè¯•matchæ¨¡å‹é¢„å¤„ç†æ¥å£
è°ƒè¯•matchæ¨¡å‹é¢„æµ‹æ¥å£
è°ƒè¯•uieæ¨¡å‹é¢„å¤„ç†æ¥å£


20241017
å¼€å‘æŠ½æ§½uieæ¨¡å‹åå¤„ç†æ¥å£
å¼€å‘æŠ½æ§½matchæ¨¡å‹è°ƒç”¨æµç¨‹
å¼€å‘æŠ½æ§½matchæ¨¡å‹é¢„å¤„ç†æ¥å£
å¼€å‘æŠ½æ§½matchæ¨¡å‹é¢„æµ‹æ¥å£


20241016
å¼€å‘æŠ½æ§½uieæ¨¡å‹è°ƒç”¨æµç¨‹
å¼€å‘æŠ½æ§½uieæ¨¡å‹é¢„å¤„ç†æ¥å£
å¼€å‘æŠ½æ§½uieæ¨¡å‹é¢„æµ‹æ¥å£
æµ‹è¯•hoicee_asr_proxyè®¯é£æ¥å£åŠŸèƒ½ï¼Œå®šä½è§£å†³é…ç½®æ— æ•ˆé—®é¢˜ï¼Œç›¸å¯¹åŸæ¥è”æƒ³æ¥å£è¯†åˆ«æ•ˆæœä¸å¤ªå¥½


20241015
æ„å»ºæŠ½æ§½æ¨¡å—å·¥ç¨‹æ¡†æ¶
è®¾è®¡æŠ½æ§½æ¨¡å—è°ƒç”¨æµç¨‹
è®¾è®¡æŠ½æ§½æ¨¡å—åŠŸèƒ½æ¥å£
å¼€å‘æŠ½æ§½æ¨¡å—åŠŸèƒ½æ¥å£


20241014
ç†Ÿæ‚‰æŠ½æ§½æ¨¡å‹windowså·¥ç¨‹æ¡†æ¶åŠç¯å¢ƒ
ç ”ç©¶æŠ½æ§½æ¨¡å‹è°ƒç”¨æµç¨‹
æ¢³ç†æŠ½æ§½æ¨¡å‹åŠŸèƒ½æ¥å£
è®¾è®¡æŠ½æ§½æ¨¡å—linuxå·¥ç¨‹æ¡†æ¶



kt-lib/intent:
hnsw-algo:ä¸€ç§ç”¨äºè¿‘ä¼¼æœ€è¿‘é‚»æœç´¢ï¼ˆApproximate Nearest Neighbor, ANNï¼‰çš„æ•°æ®ç»“æ„ï¼Œæ—¨åœ¨è§£å†³å¤§è§„æ¨¡é«˜ç»´æ•°æ®é›†ä¸­çš„é«˜æ•ˆè¿‘ä¼¼æœ€è¿‘é‚»æœç´¢é—®é¢˜ã€‚

finalres["intent"] = rule_label;
finalres["slots"]
finalres["aux_case"] = aux_case_rec;
finalres["score"] = rec_score;

kt-lib/intent/docs/apis.md:
| `data`           | object | åŒ…å«è¯†åˆ«ç»“æœçš„å¯¹è±¡                                  |
| `aux_case`       | string | è¯†åˆ«å‡ºçš„è¾…åŠ©ä¿¡æ¯ï¼Œè§£é‡Šæ–‡æœ¬ä¸­çš„ç›¸å…³è¡Œä¸º              |
| `intent_code`    | string | è¯†åˆ«å‡ºçš„æ„å›¾æ ‡è¯†                                    |
| `intent_content` | string | è¯†åˆ«å‡ºçš„æ„å›¾å†…å®¹æè¿°                                |
| `score`          | float  | è¯†åˆ«ç»“æœçš„ç½®ä¿¡åº¦åˆ†æ•°ï¼ŒèŒƒå›´ä¸º 0~1                    |
| `slots`          | array  | è¯†åˆ«å‡ºçš„æ§½ä½ä¿¡æ¯ï¼ŒåŒ…å«æ§½ä½æ ‡è¯†ã€å†…å®¹åŠæ§½ä½ç±»å‹       |
| `slot_code`      | string | æ§½ä½æ ‡è¯†ï¼Œå¦‚åœ°ç‚¹ã€æ—¶é—´ã€åº”ç”¨ç­‰                      |
| `slot_content`   | string | æ§½ä½å†…å®¹                                            |
| `slot_type`      | string | æ§½ä½ç±»å‹ï¼Œå¯èƒ½å€¼ä¸º `TEXTTYPE` æˆ– `NUMTYPE`          |


// 1 æ¨¡å‹å’Œé…ç½®ä¿¡æ¯è§£ç (åŠ è½½è§„åˆ™)
CAesGcmModule* caceGcmModel;

// 2 æ„å›¾è¯†åˆ« IR(intent recognition)

	// 2.1 è§„åˆ™åŒ¹é…æ„å›¾(rule match intent)
	CRuleMatchIntent* ruleMatchIntent;

	// 2.2 æ¨¡å‹åŒ¹é…æ„å›¾(model match intent)
		// 2.2.1 æ–‡æœ¬å‘é‡åŒ–
		CEmbeddingModule* cmodel;
		// 2.2.2 å‘é‡åŒ–åæ£€ç´¢â€”â€”topN
		CHnwsModule* chnwModel;
		// 2.2.3 ç»“æœæ’åºâ€”â€”ç²¾æ’top1
		CSortModel* smodel;

// 3 æ§½ä½æŠ½å– NER(named entity recognition)
CNerMatchModule* nerMatchModel;

	// 3.1 è§„åˆ™åŒ¹é…æ§½ä½(rule match ner)
	CRuleMatchNer* ruleMatchNer;

	// 3.2 æ¨¡å‹åŒ¹é…æ§½ä½(model match ner)
		// 2.2.1 æ–‡æœ¬å‘é‡åŒ–
		CEmbeddingModule* cmodel;
		// 2.2.2 å‘é‡åŒ–åæ£€ç´¢â€”â€”topN
		CHnwsModule* chnwModel;
		// 2.2.3 ç»“æœæ’åºâ€”â€”ç²¾æ’top1
		CSortModel* smodel;


RE-intent:è§„åˆ™åŒ¹é…æ„å›¾(CRuleMatchIntent)
NER:å‘½åå®ä½“è¯†åˆ«(CNerMatchModule)
input:	{std::string:sentence, std::string:intent}
output:	{std::vector<slot>: slots}


UIE:é€šç”¨ä¿¡æ¯æå–{vocab_file[fast_tokenizer], onnx_model[onnxruntime]}
input:text(çœ‹ç”µå½±), type
output:start, end


kd_uie_mod.0.0.2.onnx
input_ids
name: input_ids
tensor: int64[batch,sequence]
token_type_ids
name: token_type_ids
tensor: int64[batch,sequence]
attention_mask
name: attention_mask
tensor: int64[batch,sequence]

start_prob
name: start_prob
tensor: float32[batch,sequence]
end_prob
name: end_prob
tensor: float32[batch,sequence]



20241012
ç ”ç©¶å­¦ä¹ creator_zoneé¡¹ç›®åŠŸèƒ½æ¥å£
ç¼–å†™hoicee_asr_proxyå·¥ç¨‹kdsæ ‡å‡†æ–‡ä»¶
ä¿®æ”¹è¡¥å……hoicee_asr_proxyå·¥ç¨‹è„šæœ¬
ç ”ç©¶scelloå¹³å°nexusä»“åº“ä¸­çš„C/C++å¼€å‘å’Œéƒ¨ç½²åŸºç¡€é•œåƒç¯å¢ƒ


20241011
å®šä½è§£å†³éjpegæ ¼å¼å›¾ç‰‡ç¼©æ”¾å¤±è´¥é—®é¢˜
æµ‹è¯•ç»Ÿè®¡å›¾ç‰‡å‘é‡åŒ–å’Œæ–‡æœ¬åˆ†è¯å‘é‡åŒ–è€—æ—¶
ä¿®æ”¹è¡¥å……kdm_imageæ–‡æ¡£reviewç›¸å…³é—®é¢˜
ç ”ç©¶ç†Ÿæ‚‰creator_zoneé¡¹ç›®å·¥ç¨‹æ¶æ„


textï¼š0.0446931 ç§’	51ä¸ªæ±‰å­—
textï¼š0.0363529 ç§’	17ä¸ªæ±‰å­—
textï¼š0.0362122 ç§’	3ä¸ªæ±‰å­—

image: 0.428111 ç§’	anima.png		9.3MB	4000x2667(4K:3840x2160)
image: 0.201518 ç§’	appback.png		1.0MB	1920x1080(2K)
image: 0.161042 ç§’	intro.jpg		411KB	1920x1080(2K)
image: 0.135175 ç§’	pokemon.jpeg	6.07KB	224x224(input)

image resize time(s) = 0.0542023
image resize time(s) = 0.0534377
image resize time(s) = 0.055892
image resize time(s) = 0.0638162
image resize time(s) = 0.063987


20241010
reviewå›¾åƒå‘é‡åŒ–å·¥ç¨‹kdm_image
ä¼˜åŒ–ä¿®æ”¹kdm_imageå·¥ç¨‹reviewä»£ç è§„èŒƒé—®é¢˜
æµ‹è¯•ç”¨ä¾‹æ·»åŠ å›¾åƒå‘é‡åŒ–å¹³å‡è€—æ—¶ç»Ÿè®¡åŠŸèƒ½
è°ƒæµ‹ä¿®æ”¹åçš„kdm_imageæ•´ä½“åŠŸèƒ½


Image-embedding kdm reviewï¼š
# æŠ½æ—¶é—´è¿›è¡Œå›¾ç‰‡å‘é‡åŒ–çš„è€—æ—¶ç»Ÿè®¡è¡¥å……ç»Ÿè®¡ç»“æœ
# imageå·¥ç¨‹åç§°éœ€è¦ä¿®æ”¹æˆä¸ºimage-embeddingç­‰å¯ä»¥ä½“ç°å…·ä½“åŠŸèƒ½çš„åç§°
ååŒç®—æ³•å›¢é˜Ÿï¼Œè€ƒè™‘å°†fp32é™ä¸ºfp16
æ¶æ„ä¸­ä¸€æ ·çš„ runtime æ”¾åˆ°å…¬å…±åŒºåŸŸä½œä¸ºæ”¯æ’‘
# æµç¨‹ sentence / feature è¡¥å…… é™åˆ¶
å’Œç®—æ³•åŒäº‹ç¡®è®¤ï¼š224x224å›¾ç‰‡å¤§å°æ˜¯å¦å¯ä»¥æ”¹ä¸ºå’Œç”¨æˆ·å¹³æ—¶ä½¿ç”¨çš„å¤§å°å¯¹é½
# æµç¨‹ä¸­çš„å¿«æ¨¡å—è¿æ¥çº¿è¦ç”±è¡¨è¾¾ï¼Œè¾“å‡ºæ˜¯ä»€ä¹ˆ
# è¾“å…¥æ–‡æœ¬çš„å‚æ•°å»ºè®®æ·»åŠ å¯¹æ–‡æœ¬ç¼–ç çš„æè¿°
ä¼ å…¥çš„è·¯å¾„éœ€è¦å…¼å®¹æˆ–çº¦æŸä»¥å…¼å®¹è·¨æ“ä½œç³»ç»Ÿ
# kdmg ä¿®æ”¹ä¸ºæ­£ç¡®çš„åˆ†ç»„
# kdm_description: æ·»åŠ æ–‡æœå›¾ï¼Œå›¾æœå›¾çš„æè¿°ï¼Œè¯´æ˜ä½¿ç”¨åœºæ™¯


20241009
ç ”ç©¶å­¦ä¹ scello CICDä½¿ç”¨æµç¨‹
ä½¿ç”¨scelloæ„å»ºhoicee_asr_proxyé•œåƒ
æ’æŸ¥æ„å»ºhoicee_asr_proxyé•œåƒå¤±è´¥é—®é¢˜
è°ƒæ•´hoicee_asr_proxyå·¥ç¨‹ç»“æ„


20241008
æ’æŸ¥hoicee_asr_proxy s3åˆå§‹åŒ–è¿æ¥å¤±è´¥é—®é¢˜
æµ‹è¯•hoicee_asr_proxyä½¿ç”¨dockerfileæ„å»ºè¿è¡Œé•œåƒ
æµ‹è¯•hoicee_asr_proxyä½¿ç”¨docker-compose.yamlè¿è¡Œå®ä¾‹
ä¼˜åŒ–kdm_imageæ¥å£å’Œç›¸å…³æ–‡æ¡£


20240930
ä¿®æ”¹kdm_imageæ¥å£Initä¼ å‚
åŒæ­¥æ›´æ–°kdm_imageç›¸å…³æ–‡æ¡£
æ­å»ºhoicee_asr_proxyæµ‹è¯•ç¯å¢ƒ
æµ‹è¯•hoicee_asr_proxyè¿è¡Œ


20240929
å­¦ä¹ ä½¿ç”¨drawioç»˜å›¾å·¥å…·
ç»˜åˆ¶kdm_imageä¸»ä½“æ¡†æ¶è®¾è®¡å›¾
ç»˜åˆ¶kdm_imageå›¾åƒå‘é‡åŒ–æµç¨‹å›¾
ç»˜åˆ¶kdm_imageæ–‡æœ¬åˆ†è¯å‘é‡åŒ–æµç¨‹å›¾


20240927
ç¼–å†™kdm_imageæ–‡æ¡£apis.md
ç¼–å†™kdm_imageæ–‡æ¡£design.md
ç ”ç©¶æ¢³ç†hoicee_asr_proxyéƒ¨ç½²æµç¨‹
ä¿®æ”¹docker-compose.yamléƒ¨ç½²ç¯å¢ƒ


20240926
ç†Ÿæ‚‰hoicee_asr_proxyä»£ç 
æ­å»ºcentosç¼–è¯‘hoicee_asr_proxyå¼€å‘ç¯å¢ƒ
ç¼–è¯‘è°ƒè¯•hoicee_asr_proxyä»£ç 
ä¿®æ”¹dockerfileå¼€å‘ç¯å¢ƒ


20240925
ä¿®æ”¹kdm_imageéƒ¨åˆ†ä¸‰æ–¹ä¾èµ–
åˆå¹¶kdm_imageåˆ°kt-libå·¥ç¨‹
è°ƒæµ‹kt-libä¸­kdm_imageæ¨¡å—åŠæ•´ä½“ç¼–è¯‘å®‰è£…
ç¼–å†™æ·»åŠ å›¾åƒå·¥ç¨‹æ–‡ä»¶kdm_image.json


20240924
æ’æŸ¥å›¾åƒé€šé“è·å–å¼‚å¸¸é—®é¢˜
å®šä½å¼ é‡çŸ©é˜µè½¬æ¢å¤±è´¥é—®é¢˜
è°ƒè¯•å›¾åƒæ¨¡å‹æ¨ç†åŠŸèƒ½
è°ƒè¯•å›¾åƒå‘é‡åŒ–ç»“æœåå¤„ç†åŠŸèƒ½


20240923
å¼€å‘å›¾åƒé¢„å¤„ç†-å¼ é‡è½¬æ¢
å¼€å‘å›¾åƒé¢„å¤„ç†-å¼ é‡æ ‡å‡†åŒ–
ç¼–å†™å›¾åƒå‘é‡åŒ–æµ‹è¯•ç”¨ä¾‹demo
è°ƒè¯•å›¾åƒé¢„å¤„ç†åŠŸèƒ½


opencv4
GraphicsMagick++ã€
imageMagick/Magick++

Eigen

  # this is heuristically generated, and may not be correct
  find_package(Eigen3 CONFIG REQUIRED)
  target_link_libraries(main PRIVATE Eigen3::Eigen)



  # this is heuristically generated, and may not be correct
  find_package(Eigen3 CONFIG REQUIRED)
  target_link_libraries(main PRIVATE Eigen3::Eigen)



vcpkg install graphicsmagick:x64-linux-dynamic

  # this is heuristically generated, and may not be correct
  find_package(unofficial-graphicsmagick CONFIG REQUIRED)
  target_link_libraries(main PRIVATE unofficial::graphicsmagick::graphicsmagick)

graphicsmagick provides CMake targets:

  # this is heuristically generated, and may not be correct
  find_package(unofficial-graphicsmagick CONFIG REQUIRED)
  target_link_libraries(main PRIVATE unofficial::graphicsmagick::graphicsmagick)


_ZN8
CryptoPP
21
SimpleKeyingInterface
6
SetKeyEPKhmRKNS
_14
NameValuePairs
E

SetKeyEPKhmRKNS

20240920
é›†æˆgraphicsmagickå›¾åƒå¤„ç†åº“
å¼€å‘å›¾åƒé¢„å¤„ç†-resizeã€RGBè½¬æ¢åŠŸèƒ½
å¼€å‘å›¾åƒé¢„å¤„ç†-åƒç´ ç‚¹å½’ä¸€åŒ–
è°ƒç ”å¼ é‡çŸ©é˜µè¿ç®—åº“Eigen


20240919
è°ƒç ”å›¾åƒå¤„ç†åº“
å®‰è£…opencvåŠå…¶ä¾èµ–åº“
å¼€å‘å›¾åƒå‘é‡åŒ–æ¨¡å‹æ¨ç†åŠŸèƒ½
å¼€å‘å›¾åƒå‘é‡åŒ–ç»“æœåå¤„ç†åŠŸèƒ½

```
vcpkg install opencv4[core,default-features,dnn,gtk,jpeg,png,quirc,tiff,webp]:x64-linux-dynamic
apt install libx11-dev libxft-dev libxext-dev libgles2-mesa-dev

```

```
vcpkg install graphicsmagick:x64-linux-dynamic

```

20240918
å®šä½è§£å†³æ–‡æœ¬æ¨¡å‹æ¨ç†è´Ÿå€¼é—®é¢˜
è®¾è®¡å›¾åƒå‘é‡åŒ–åŠŸèƒ½API
æ·»åŠ æ„å»ºå›¾åƒå‘é‡åŒ–åŠŸèƒ½æ¨¡å—ç»“æ„
å¼€å‘å›¾åƒå‘é‡åŒ–æ¨¡å‹åŠ è½½ã€å¸è½½åŠŸèƒ½


20240914
ä¿®å¤gitlab/kt-lib-ext/.gitignoreå’Œå¯¹åº”æ¨¡å—ä»£ç åŠå…¶ä¾èµ–
ç¼–å†™æ–‡æœ¬å‘é‡åŒ–åŠŸèƒ½æ¥å£æµ‹è¯•ç”¨ä¾‹
è°ƒæµ‹æ–‡æœ¬å‘é‡åŒ–åŠŸèƒ½æ¥å£ï¼Œå®šä½æ¨ç†æ—¶å…¥å‚æ— æ•ˆé—®é¢˜
ä¿®æ”¹kdm_imageç›¸å¯¹è·¯å¾„linkä¾èµ–


20240913
æ–‡æœ¬å‘é‡åŒ–ç»“æœåå¤„ç†å¼€å‘
æ–‡æœ¬å‘é‡åŒ–åŠŸèƒ½æ¥å£æ—¥å¿—æ·»åŠ 
å¢åŠ å„ä¸ªåŠŸèƒ½æ¥å£çŠ¶æ€æŸ¥è¯¢
ç¼–è¯‘è°ƒè¯•åŠŸèƒ½æ¥å£


ç½‘ç»œrouterè·Ÿè¸ª:
sngrep


20240912
å¼€å‘æ–‡æœ¬é¢„å¤„ç†åŠŸèƒ½
å¼€å‘æ–‡æœ¬å‘é‡åŒ–æ¨¡å‹åŠ è½½ã€å¸è½½åŠŸèƒ½
å¼€å‘æ–‡æœ¬å‘é‡åŒ–æ¨¡å‹æ¨ç†
è°ƒæ•´APIæ¥å£è®¾è®¡æ·»åŠ é”™è¯¯ç åŠŸèƒ½


20240911
è°ƒç ”å¼ é‡è½¬æ¢ã€å †å ã€å»å•C++å®ç°
è®¾è®¡å›¾åƒçš„æ–‡æœ¬åˆ†è¯åŠå‘é‡åŒ–åŠŸèƒ½API
æ­å»ºæ–‡æœ¬åˆ†è¯åŠå‘é‡åŒ–å·¥ç¨‹ç»“æ„
é›†æˆå¼€å‘fast_tokenizeråˆ†è¯


# image embedding_text
text
name: text
tensor: int64[1,52]
unnorm_text_features
name: unnorm_text_features
tensor: float32[1,512]

# image embedding_image
image
name: image
tensor: float32[1,3,224,224]
unnorm_image_features
name: unnorm_image_features
tensor: float32[1,512]


# intent text_token_embedding
input_ids
name: input_ids
tensor: int64[batch_size,sequence_size]
attention_mask
name: attention_mask
tensor: int64[batch_size,sequence_size]
output
name: output
tensor: float32[batch_size,Divoutput_dim_1]


# intent sort_topNç²¾æ’åº
input_ids
name: input_ids
tensor: int64[batch_size,sequence_size]
attention_mask
name: attention_mask
tensor: int64[batch_size,sequence_size]
output
name: output
tensor: float32[batch_size,2]


# senword
input_ids
name: input_ids
tensor: int64[batch_size,sequence_length]
attention_mask
name: attention_mask
tensor: int64[batch_size,sequence_length]
output
name: output
tensor: float32[batch_size,sequence_length]


20240910
ç†Ÿæ‚‰intentå‘é‡åŒ–æ¨¡å—
ç ”ç©¶ç°æœ‰intentæ–‡æœ¬åˆ†è¯æ¨¡å—
æ²Ÿé€šåº•å±‚å›¾ç‰‡å‘é‡åŒ–åŠå…¶æ–‡æœ¬åˆ†è¯å‘é‡åŒ–
æ¢³ç†å›¾ç‰‡å‘é‡åŒ–åŠå…¶æ–‡æœ¬åˆ†è¯å‘é‡åŒ–çš„åŠŸèƒ½æ¨¡å—


// 1 æ¨¡å‹å’Œé…ç½®ä¿¡æ¯è§£ç (åŠ è½½è§„åˆ™)
CAesGcmModule* caceGcmModel;

// 2 æ„å›¾è¯†åˆ« IR(intent recognition)

	// 2.1 è§„åˆ™åŒ¹é…æ„å›¾(rule match intent)
	CRuleMatchIntent* ruleMatchIntent;

	// 2.2 æ¨¡å‹åŒ¹é…æ„å›¾(model match intent)
		// 2.2.1 æ–‡æœ¬å‘é‡åŒ–
		CEmbeddingModule* cmodel;
		// 2.2.2 å‘é‡åŒ–åæ£€ç´¢â€”â€”topN
		CHnwsModule* chnwModel;
		// 2.2.3 ç»“æœæ’åºâ€”â€”ç²¾æ’top1
		CSortModel* smodel;

// 3 æ§½ä½æŠ½å– NER(named entity recognition)
CNerMatchModule* nerMatchModel;


20240909
ç†Ÿæ‚‰kt-lib:intentä»£ç ç»“æ„
å½’çº³æ±‡æ€»intentå¯¹å¤–åŠŸèƒ½API
KDM ASRæ·»åŠ é”™è¯¯ç å’Œæµ‹è¯•
è°ƒè¯•hmac_sha1ç§˜é’¥ç¼–ç åŠŸèƒ½


20240906
è°ƒè¯•è™šæ‹Ÿæœºè”ç½‘é—®é¢˜ï¼Œå¾…è§£å†³
kt-lib:masteråˆ†æ”¯ä»£ç ä¿®æ”¹
kt-lib:masterç¼–è¯‘è°ƒè¯•æ‰“åŒ…
kt-lib-extä»£ç åˆå¹¶ä¸Šä¼ 


20240905
ä¿®æ”¹ErroCodeå®šä¹‰
è°ƒç ”hmac_sha1ç§˜é’¥ç¼–ç 
å°†sha1ç¼–ç æ”¹ä¸ºhmac_sha1ç§˜é’¥ç¼–ç 
å¤–å‡ºå¼€å¤©ç°åœºç†Ÿæ‚‰å’Œé…ç½®ç¯å¢ƒ


20240904
ErroCodeè®¾è®¡ä¸å®šä¹‰
æ’æŸ¥è§£å†³è®¯é£ç­¾åå¤±è´¥signature, ä¿®æ”¹ç­¾åå…¬å¼ï¼šbase64(hmac_sha1(md5(app_id + timestamp), api_key))å®ç°
KDM ASRå¢åŠ loggeræ¨¡å—
loggeråŠŸèƒ½æµ‹è¯•


20240903
ä¿®æ”¹æ”¯æŒSSLçš„websocket clientåº“
ä¿®æ”¹KDM ASRæµ‹è¯•ç”¨ä¾‹
æµ‹è¯•å®æ—¶è¯­éŸ³è¯†åˆ«åŠŸèƒ½
åŠŸèƒ½æ¶æ„æ‹†åˆ†ä¼šè®®æ¢è®¨


20240902
è®¯é£ASRæ¥å£é€‚é…è°ƒæ•´ï¼Œæ·»åŠ md5ã€sha1ã€base64ç­‰åŠŸèƒ½ä»¥æ”¯æŒæ•°å­—ç­¾åï¼›
è°ƒè¯•è®¯é£ASRæ¥å£
è°ƒè¯•KDM ASR APIæµ‹è¯•ç”¨ä¾‹
ç”³è¯·è®¯é£è´¦å·keyæµ‹è¯•åŠŸèƒ½


20240830
vcpkgå°è¯•ç¼–è¯‘ç¬¬ä¸‰æ–¹websocketåº“
é›†æˆwebsocketæ¡†æ¶å®¢æˆ·ç«¯
è°ƒè¯•websocketæ¡†æ¶å®¢æˆ·ç«¯
å¼€å‘è®¯é£ASRæ¥å£é€‚é…


20240829
è°ƒç ”websocketæ¡†æ¶
å®‰è£…vcpkgä¾èµ–åŒ…ç®¡ç†
å¼€å‘KDM ASR APIæµ‹è¯•ç”¨ä¾‹
è°ƒè¯•è§£å†³KDM ASRæ¥å£è¿è¡Œæ—¶configæ–‡ä»¶è§£æå¼‚å¸¸


20240828
å‚åŠ æ–°å‘˜å·¥å…¥èŒåŸ¹è®­
kdm_asr tomlé…ç½®åº“æ”¹ä¸ºnlohmann-json
è°ƒè¯•VSCode + MinGW_GCCç¼–è¯‘ç¯å¢ƒ
è°ƒè¯•kdm_asrç¼–è¯‘é—®é¢˜


20240827
ç»†åŒ–libnm APIåŠŸèƒ½åˆ—è¡¨
éº’éºŸOSäº§å“ç”¨æˆ·æ‰‹å†Œé˜…è¯»
éº’éºŸOS SDKå¼€å‘æŒ‡å—é˜…è¯»
æ±‡æ€»ä½¿ç”¨éº’éºŸOS SDKåŠŸèƒ½åˆ—è¡¨


WinLibs standalone build of GCC and MinGW-w64 for Windowsï¼š
https://winlibs.com


ä¸‹å‘¨äº”å‰ï¼šï¼ˆ20240830ï¼‰
WiFiæ— çº¿ç½‘ç»œå’Œæœ‰çº¿ç½‘ç»œäº¤äº’åˆ‡æ¢é…ç½®ï¼Œè°ƒç ”ç³»ç»Ÿå±‚æ¥å£å¯å¤„ç†å“ªäº›èƒ½åŠ›ï¼›
éº’éºŸå•†åº—ï¼Œè°ƒç ”æŸ¥è¯¢ã€å®‰è£…ç­‰å¯ç”¨æ¥å£ï¼Œå¦‚ä½•ç”¨ï¼›


1ã€éº’éºŸæ“ä½œç³»ç»Ÿçš„ç½‘ç»œè¿æ¥ WiFi å’Œ æœ‰çº¿ç½‘		è°ƒç ”wifiå’Œæœ‰çº¿å¯ä»¥è°ƒç”¨åˆ°çš„èƒ½åŠ›(æ¥å£ã€å‘½ä»¤)
WiFiæ— çº¿ç½‘ç»œå’Œæœ‰çº¿ç½‘ç»œäº¤äº’åˆ‡æ¢é…ç½®ï¼Œè°ƒç ”ç³»ç»Ÿå±‚æ¥å£å¯å¤„ç†å“ªäº›èƒ½åŠ›ï¼›

2ã€è½¯ä»¶å®‰è£…	è°ƒç”¨éº’éºŸå•†åº—æ¥å£ï¼Œåè°ƒéº’éºŸçš„æŸ¥è¯¢ã€å®‰è£…æ¥å£
éº’éºŸå•†åº—ï¼Œè°ƒç ”æŸ¥è¯¢ã€å®‰è£…ç­‰å¯ç”¨æ¥å£ï¼Œå¦‚ä½•ç”¨ï¼›


æ¢³ç†éº’éºŸè½¯ä»¶å•†åº—-æŸ¥è¯¢ã€å®‰è£…æ¥å£

å¤§å®¶ä¸Šåˆå¥½ï¼Œæˆ‘æ˜¯ç ”å‘éƒ¨ç«¯ä¸Šè¯­éŸ³å›¢é˜Ÿçš„C++å¼€å‘â€”â€”æå»·ï¼Œä¹‹å‰ä¸€ç›´ä»äº‹æ™ºèƒ½è¯­éŸ³å¼•æ“ç›¸å…³å·¥ä½œï¼Œå¯¹AIè¯­éŸ³æ¨¡å‹æ¨ç†å’Œå·¥ç¨‹è½åœ°è¿™æ–¹é¢æ¯”è¾ƒç†Ÿæ‚‰ï¼Œæ¥åˆ°è¯ºè°›å¤§å®¶åº­å·²åŠä¸ªæœˆå·¦å³ï¼Œä¸»è¦ä¹Ÿæ˜¯å›´ç»•è¯­éŸ³å’ŒC++å·¥ç¨‹å¼€å‘æ–¹é¢å¼€å±•å·¥ä½œã€‚
å¸Œæœ›æœªæ¥å’Œå¤§å®¶ä¸€èµ·åŠªåŠ›å·¥ä½œï¼Œç›¸äº’å­¦ä¹ ï¼Œå…±åŒæˆé•¿ï¼Œä¸ºæˆ‘ä»¬è¿™ä¸ªå¤§å®¶åº­çš„æœªæ¥å‘å±•å¢ç –æ·»ç“¦ï¼Œè´¡çŒ®ä¸€ä»½åŠ›é‡ã€‚


å‘½ä»¤è¡Œapt/libapt-pkg
éº’éºŸæ“ä½œç³»ç»Ÿçš„å®˜æ–¹API d-bus


https://www.kylinos.cn/upload/product/20240613/87e4b1d1e8520f894c247e2fac4a2087.pdf

è°ƒç ”sdbus-c++åº“
è°ƒç ”dbus-cxxåº“


20240826
è¡¥å……dbuså’Œnmé…åˆä½¿ç”¨åŠŸèƒ½åˆ—è¡¨
è°ƒç ”sdbus-c++åº“
è°ƒç ”éº’éºŸå•†åº—è½¯ä»¶æŸ¥è¯¢æ¥å£
è°ƒç ”éº’éºŸå•†åº—è½¯ä»¶å®‰è£…æ¥å£


20240823
è°ƒç ”dbuså’Œnmé…åˆä½¿ç”¨APIç®¡æ§ç³»ç»Ÿç½‘ç»œ
è°ƒç ”dbus-cxxåº“
è°ƒç ”libnmåº“
æ±‡æ€»dbuså’Œnmé…åˆä½¿ç”¨åŠŸèƒ½åˆ—è¡¨


20240822
è°ƒç ”ip/ifconfigå‘½ä»¤ç®¡æ§ç³»ç»Ÿç½‘ç»œ
è°ƒç ”wicd-cli/nmcliå‘½ä»¤ç®¡æ§ç³»ç»Ÿç½‘ç»œ
è°ƒç ”dbusæ¡†æ¶
è°ƒç ”dbuså’Œwicdé…åˆä½¿ç”¨APIç®¡æ§ç³»ç»Ÿç½‘ç»œ


20240821
å¼€å‘KDM ASRé…ç½®åŠŸèƒ½
æ­å»ºvcpkgä¾èµ–ç¯å¢ƒ
è°ƒè¯•CMakeé¢„è®¾é…ç½®
ç¼–è¯‘è°ƒè¯•KDM ASRæ¥å£æ¡†æ¶


20240820
åˆ†ærecogProxyè®¯é£ASRæ¥å£
åˆ†ærecogProxyå¾®è½¯ASRæ¥å£
è®¾è®¡å¼€å‘KDM ASRæ•´ä½“æ¥å£
ç¼–å†™æ ‡å‡†åŒ–kd_asr.kdm


20240819
è°ƒç ”è®¯é£äº‘ä¾§ASR APIæ¥å£
è°ƒç ”å¾®è½¯äº‘ä¾§ASR APIæ¥å£
æ„å»ºKDM ASRè½¯ä»¶å·¥ç¨‹
è®¾è®¡KDM ASR APIæ¥å£

### å¼€å‘ç¯å¢ƒä¾èµ–é¡¹

- è¯­è¨€ç‰ˆæœ¬ï¼š`C++17`
- æ‰€éœ€çš„ç¬¬ä¸‰æ–¹åº“æˆ–æ¡†æ¶ï¼š`vcpkg`ã€`Boost`ã€`Websocket`

### å¼€å‘ç¯å¢ƒæ­å»ºæ­¥éª¤

1. å®‰è£…ä¾èµ–é¡¹ï¼š
   - Linux å¼€å‘ç¯å¢ƒï¼š

    ```bash

    <!-- åŸºç¡€ä¾èµ– -->
    sudo apt install -y vim ssh curl zip unzip git cmake build-essential pkg-config

    <!-- cmake 3.30 -->
    wget cmake.sh

    <!-- C++ä¾èµ–ç®¡ç†å™¨ -->
    git clone https://github.com/microsoft/vcpkg.git ~/vcpkg
    cd ~/vcpkg
    ./bootstrap-vcpkg.sh

    ```

2. é…ç½®ç¯å¢ƒå˜é‡ï¼ˆå¦‚é€‚ç”¨ï¼‰ï¼š

   ```bash

    echo 'export VCPKG_ROOT="$HOME/vcpkg"' >> ~/.bashrc
    echo 'export PATH="$VCPKG_ROOT:$PATH"' >> ~/.bashrc
    source ~/.bashrc

   ```

3. å…‹éš†ä»“åº“å¹¶ç¼–è¯‘ä»£ç ï¼š

   ```bash

   git clone http://gitlab.knowdee.com/kdm/cpp/knowdee/voice-processer.git


   ```


KD_ASR_API SDK:
KdAsr(compsited with AsrApi instance)
	AsrApi(inherite from this)
		XfyunAsr
		MsAsr(microsoft)
		KnowDeeAsr(local)
		FunAsr
		BaiDuAsr
		TencentAsr

kt-libä»£ç è¿è¡Œæ—¶åŠ è½½soå¤±è´¥é—®é¢˜
4ã€æ¶ˆæ¯åè®®json string

ssh lenovo@192.168.51.215
scp lenovo@192.168.51.215:/app/com.knowdee.


20240816
AIPCåŠŸèƒ½ä½“éªŒå’Œæ„Ÿå—æ±‡æ€»
æ¢³ç†kt-libä»£ç grpcå„ç±»cmdæ¶ˆæ¯å¤„ç†æµç¨‹
kt-libä»£ç è¿è¡Œæ—¶kdm-pkg::create_directoryæŠ›å¼‚å¸¸
kt-libä»£ç é—®é¢˜æ±‡æ€»



20240815
kt-libä»£ç é˜…è¯»ç†Ÿæ‚‰				å­¦ä¹ kt-libä»£ç æ¶æ„ï¼Œé€šè¿‡nodejsè°ƒç”¨å„ä¸ªåŠŸèƒ½KModuleInstanceå’Œgrpcè°ƒç”¨å„ä¸ªåŠŸèƒ½KModuleInstance
AIPCåŠŸèƒ½ä½“éªŒï¼ˆ10ä¸ªä½“éªŒæ„Ÿå—ï¼‰			é‡åˆ°å¡æ­»æ— ç»“æœè¿”å›æƒ…å†µï¼Œæ–‡æœ¬äº¤äº’æ²¡èµ°å®Œæµç¨‹
kt-libä»£ç ç¼–è¯‘ä¾èµ–å®‰è£…								å®‰è£…è™šæ‹Ÿæœºç¼–è¯‘ç¯å¢ƒçš„kt-libæ‰€éœ€ä¾èµ–
kt-libä»£ç ç¼–è¯‘è¿‡ç¨‹ä¸­resourceç¼ºå°‘é—®é¢˜æ’æŸ¥					æ‹·è´215ç¯å¢ƒçš„æ–‡ä»¶è§£å†³

ï¼ˆMake Error at CMakeLists.txt:40 (file):  file COPY cannot find "/data/usershare/projects/kt/kt-lib/../resource": No  such file or



kt-libä»£ç é—®é¢˜ï¼š
1ã€kt-libæ•´ä½“è½¯ä»¶æ¶æ„å±äºä¼ ç»Ÿçš„è½¯ä»¶æ¶æ„é£æ ¼ï¼Œæ˜¯å¤§è€Œå…¨ï¼Œå¯ä»¥æŒ‰ç…§åŠŸèƒ½æ‹†åˆ†ä¸ºå¤šä¸ªè½»é‡åŒ–æ¶æ„çš„æ•æ·è½¯ä»¶å·¥ç¨‹ï¼Œä¾¿äºå…¶ä¸­å„ä¸ªåŠŸèƒ½æ¨¡å—å¤ç”¨åˆ°æœªæ¥å…¶ä»–è½¯ä»¶å·¥ç¨‹ã€‚
2ã€åŒä¸€ä¸ªè½¯ä»¶reposçš„ç¼–ç¨‹èŒƒå¼æ¯”è¾ƒå¤šæ ·ï¼Œæ‰åˆäº†é¢å‘è¿‡ç¨‹Cã€åŸºäºå¯¹è±¡C++ã€é¢å‘å¯¹è±¡C++ã€å‡½æ•°å¼ç¼–ç¨‹çš„å¤šç§ç¼–ç¨‹èŒƒå¼ï¼Œå»ºè®®ä»¥å…¶ä¸­ä¸€ç§ç¼–ç¨‹èŒƒå¼ä¸ºä¸»ï¼Œå¿…è¦æ—¶å¯ä»¥å¦ä¸€ç§ç¼–ç¨‹èŒƒå¼ä¸ºè¾…ï¼Œæœ€å¥½ä¸è¶…è¿‡ä¸¤ç§ï¼Œç‰¹æ®Šæƒ…å†µé™¤å¤–ã€‚
3ã€åŒä¸€ä¸ªè½¯ä»¶reposçš„ä»£ç styleå¤šç§å¤šæ ·ï¼Œåç»­æ ‡å‡†åŒ–å¯æŒ‰ç…§çº¦å®šç»Ÿä¸€è§„èŒƒã€‚
4ã€C++è½¯ä»¶å·¥ç¨‹ä¸­ï¼Œä½¿ç”¨äº†Cè¯­è¨€é£æ ¼çš„ä»£ç å†™æ³•ï¼Œæœ€å¥½ä»¥ç°ä»£C++çš„å†™æ³•æ›¿ä»£ï¼ˆå¦‚å‡½æ•°å›è°ƒtypedefä»¥std::functionæ›¿ä»£Cé£æ ¼çš„å‡½æ•°æŒ‡é’ˆå’Œå‚æ•°ç­‰ï¼‰ã€‚
5ã€void*ç­‰è£¸æŒ‡é’ˆå’Œnewå †å†…å­˜çš„å†™æ³•è¾ƒå¤šï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨ç°ä»£C++çš„æ™ºèƒ½æŒ‡é’ˆï¼ˆå¦‚std::shared_ptræˆ–std::unique_ptrï¼‰ä»£æ›¿ï¼Œé¿å…å†…å­˜æ³„æ¼æˆ–åŒé‡é‡Šæ”¾ã€‚
6ã€å‡½æ•°ä¼ å‚å’Œè¿”å›å€¼æœ‰ä¸€äº›æ˜¯by valueä¼ å€¼å†™æ³•ï¼Œå¯è€ƒè™‘æ”¹ä¸ºby referenceå†™æ³•ï¼ŒåŒæ—¶åªè¯»å‚æ•°å’Œåªè¯»è¿”å›å€¼å»ºè®®ç»Ÿä¸€åŠ ä¸Šconstä¿®é¥°ç¬¦ï¼Œä»¥æé«˜ä»£ç æ•ˆç‡å’Œå®‰å…¨æ€§ã€‚
7ã€å¤´æ–‡ä»¶çš„åˆ†å±‚å’Œä¾èµ–æ¯”è¾ƒéšæ„ï¼Œå°½å¯èƒ½åœ¨.ccå’Œ.cppä¸­includeéœ€è¦çš„å¤´æ–‡ä»¶ï¼Œ.hæ–‡ä»¶åªåŒ…å«å¿…é¡»çš„å¤´æ–‡ä»¶å’Œç±»å‹å®šä¹‰ï¼Œé¿å…è¿‡å¤šå¯¹å¤–æš´éœ²å®ç°ï¼Œé€ æˆä¸å¯é¢„çŸ¥çš„å†²çªã€‚
8ã€å‘½åç©ºé—´çš„å¼•å…¥æ¯”è¾ƒé‡ï¼Œå°½é‡é¿å…ç›´æ¥åœ¨å¤´æ–‡ä»¶ä¸­using namespace stdæˆ–æŒ‡å®šå¼•å…¥å…·ä½“ä½¿ç”¨çš„std::somethingã€‚
9ã€å„ä¸ªæ¨¡å—ä»£ç æ²¡æœ‰åšå‘½åç©ºé—´çš„ç®¡ç†ï¼Œå»ºè®®å„ä¸ªæ¨¡å—ä»£ç æ”¾å…¥å¯¹åº”å‘½ä»¤ç©ºé—´å†…ã€‚
10ã€ç¼ºä¹å…¬å…±åŸºç¡€å·¥å…·çš„ç»Ÿä¸€é›†ä¸­ç®¡ç†ï¼Œé€ æˆå„ä¸ªæ¨¡å—å†…éƒ¨æœ‰ä¸€äº›å°åŠŸèƒ½é‡å¤codeã€‚
11ã€æœ‰äº›æŒ‡é’ˆç¼ºå°‘å®‰å…¨æ€§æ£€æŸ¥ï¼Œå¯å¯¹æ­¤æ·»åŠ ç©ºæŒ‡é’ˆå’Œéæ³•æŒ‡é’ˆæ£€æŸ¥ã€‚
12ã€å¯èƒ½æŠ›å¼‚å¸¸çš„å‡½æ•°è°ƒç”¨ï¼Œé…Œæƒ…ä½¿ç”¨try-catchå—å¤„ç†å¼‚å¸¸å®‰å…¨ï¼Œæ˜ç¡®nothrowæ–¹æ³•ï¼Œé¿å…ä½¿ç”¨å¼‚å¸¸æ•è·ã€‚



AIPCä½“éªŒæ„Ÿå—ï¼š
1ã€appå¯åŠ¨åå¼¹å‡ºçš„å¯¹è¯æ¡†UIæŒºè¿…é€Ÿæ¼‚äº®ã€‚
2ã€æ–‡æœ¬å¯¹è¯äº¤äº’æ—¶ï¼ŒæŒ‡ç¤ºå…¶æ‰“å¼€æ“ä½œç³»ç»Ÿä¸­çš„å¸¸è§„åº”ç”¨ï¼ˆå¦‚è®¡ç®—å™¨ã€ç»ˆç«¯ã€è°·æ­Œæµè§ˆå™¨ã€æ–‡ä»¶èµ„æºç®¡ç†ç­‰ï¼‰æ¯”è¾ƒé¡ºç•…æ— è¯¯ã€‚
3ã€æŒ‡ç¤ºå…¶æ‰“å¼€è®¾ç½®æ—¶ï¼Œè¯†åˆ«å¯èƒ½å‡ºé”™äº†ï¼Œæ€»æ˜¯æ‰“å¼€éº’éºŸç®¡å®¶ã€‚
4ã€æ—¥å¸¸è¯é¢˜é—®ç­”å¯¹è¯æ—¶ï¼Œæ€»æ˜¯æç¤ºï¼Œæ„Ÿå—ä¸å¤ªå‹å¥½ï¼Œå¸Œæœ›èƒ½å¤Ÿè¦†ç›–å¹¿æ³›çš„ä¸»é¢˜é¢†åŸŸçŸ¥è¯†ã€‚
5ã€å¯¹è¯çš„å®æ—¶å“åº”é€Ÿåº¦è¿˜å¯ä»¥ï¼Œæ²¡æœ‰å»¶è¿Ÿå¾ˆé•¿æ—¶é—´ï¼Œèƒ½æ¥å—ï¼Œä½†å“åº”é€Ÿåº¦ä¸å¦‚é€šä¹‰åƒé—®å¿«ã€‚
6ã€äº¤äº’æ—¶æœ‰çš„é—®é¢˜ï¼Œä¼šå‡ºç°ç­”éæ‰€é—®çš„æƒ…å†µï¼Œæ„å›¾è¯†åˆ«çš„å‡†ç¡®ç‡å¾…æé«˜ã€‚




20240814
PCç«¯æ­å»ºè™šæ‹ŸæœºVMwareå’Œéº’éºŸç³»ç»Ÿç­‰è¿è¡Œè°ƒè¯•ç¯å¢ƒ
ç³»ç»Ÿæ¦‚è¦è®¾è®¡ - AIPCç«¯æœåŠ¡æŠ€æœ¯æ–‡æ¡£å­¦ä¹ 
ç³»ç»Ÿæ¦‚è¦è®¾è®¡ - AIPCå°å¤©ç«¯åº”ç”¨æŠ€æœ¯æ–‡æ¡£å­¦ä¹ 
kt-libä»£ç é˜…è¯»ç†Ÿæ‚‰


AIPCåŠŸèƒ½ä½“éªŒ
AIPCç°æœ‰ä»£ç å­¦ä¹ 


20240813
CICDæµç¨‹ï¼ŒGitlabçš„ç›®å½•ç»“æ„ç®¡ç†ç­‰æŸ”æ€§è½¯ä»¶å·¥ç¨‹å­¦ä¹ 
KDS,KDMç›¸å…³è§„çº¦æè¿°åŠå…¶åˆ†å±‚ç­‰æŸ”æ€§è½¯ä»¶å·¥ç¨‹å­¦ä¹ 
ç«¯ä¸Š&è¯­éŸ³ç›¸å…³æŠ€æœ¯æ¶æ„æ–‡æ¡£å­¦ä¹ 
C++å¼€å‘ç¯å¢ƒæ­å»ºé…ç½®


20240812
å…¥èŒæ‰‹ç»­åŠç†
ä¸ªäººPCåŠå…¬ç¯å¢ƒå®‰è£…
å„ä¸ªç³»ç»Ÿï¼ˆwiki/é’‰é’‰/ç¦…é“/ä¼ä¸šé‚®ç®±ï¼‰è´¦å·ç™»å½•éªŒè¯
ä¸ªäººä¿¡æ¯é‡‡é›†å¡«å†™
å­¦ä¹ å‘˜å·¥æ‰‹å†Œå’Œç®¡ç†è§„å®š



å…¬å…±è®¨è®ºä¼šè®®åŠå…¶ä»–å›¢é˜Ÿäº‹åŠ¡


lenovo@lenovo-pc:~$ ldd --version
ldd (Ubuntu GLIBC 2.31-0kylin9.1k21.2) 2.31
Copyright (C) 2020 è‡ªç”±è½¯ä»¶åŸºé‡‘ä¼šã€‚
è¿™æ˜¯ä¸€ä¸ªè‡ªç”±è½¯ä»¶ï¼›è¯·è§æºä»£ç çš„æˆæƒæ¡æ¬¾ã€‚æœ¬è½¯ä»¶ä¸å«ä»»ä½•æ²¡æœ‰æ‹…ä¿ï¼›ç”šè‡³ä¸ä¿è¯é€‚é”€æ€§
æˆ–è€…é€‚åˆæŸäº›ç‰¹æ®Šç›®çš„ã€‚
ç”± Roland McGrath å’Œ Ulrich Drepper ç¼–å†™ã€‚
lenovo@lenovo-pc:~$ g++ --version
g++ (Kylin 9.3.0-10kylin5k0.5) 9.3.0
Copyright (C) 2019 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

lenovo@lenovo-pc:~$ gcc --version
gcc (Kylin 9.3.0-10kylin5k0.5) 9.3.0
Copyright (C) 2019 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

root@docker-desktop:/\work# ldd --version
ldd (Ubuntu GLIBC 2.31-0ubuntu9.16) 2.31
Copyright (C) 2020 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
Written by Roland McGrath and Ulrich Drepper.


root@docker-desktop:/\work# gcc --version
gcc (Ubuntu 9.4.0-1ubuntu1~20.04.2) 9.4.0
Copyright (C) 2019 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

root@docker-desktop:/\work# g++ --version
g++ (Ubuntu 9.4.0-1ubuntu1~20.04.2) 9.4.0
Copyright (C) 2019 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

sudo nano /etc/systemd/system/tinysshd.service

D:\Virtual Machines\Kylin10\Kylin10.vmdk

D:\tools\Kylin-Desktop-V10-SP1-2403-Beta2-20240103-x86_64.iso

AIPC1.0 æµ‹è¯•æœºå™¨ï¼š
192.168.51.215
lenovo/qwer1234


ldap/vpn/wiki/gitlab:
litt/liting2131

ç¦…é“ï¼š
litt/Liting2131.

ä¼ä¸šé‚®ç®±ï¼š
litt@knowdee.com/Liting2131.
litt@knowdee.com/Liting2131,


æ–°ç‰ˆscelloåœ°å€ï¼š
http://scello.knowdee.com
litt/Liting2131

hyper-v:kylin2403ç³»ç»Ÿè´¦å·
lit/7777777
